window.__require=function e(t,n,i){function o(s,c){if(!n[s]){if(!t[s]){var r=s.split("/");if(r=r[r.length-1],!t[r]){var l="function"==typeof __require&&__require;if(!c&&l)return l(r,!0);if(a)return a(r,!0);throw new Error("Cannot find module '"+s+"'")}}var d=n[s]={exports:{}};t[s][0].call(d.exports,function(e){return o(t[s][1][e]||e)},d,d.exports,e,t,n,i)}return n[s].exports}for(var a="function"==typeof __require&&__require,s=0;s<i.length;s++)o(i[s]);return o}({AdvanceView:[function(e,t,n){"use strict";cc._RF.push(t,"f39f7cEn8NPOLPQc+RQ9SjR","AdvanceView"),cc.Class({extends:cc.Component,properties:{takeBtn:cc.Node,iconType:cc.Sprite,iconVideoFrame:cc.SpriteFrame,iconShareFrame:cc.SpriteFrame},onLoad:function(){},start:function(){this.rewardType=window.facade.getComponent("ShareADModel").getShareADType(),2!=this.rewardType?(this.iconType.spriteFrame=this.iconVideoFrame,this.type="Video"):(this.iconType.spriteFrame=this.iconShareFrame,this.type="Share")},initData:function(){},doClose:function(){window.facade.getComponent("GameModel").newerRewardCancelCount++,window.facade.getComponent("GameModel").passLevelCount=0},takeAward:function(){window.facade.getComponent("ShareADModel").showShareAD({inviteId:1536,videoId:21108,assistId:0,interstitalId:31110},{succ:function(e){this.takeAwardSuccess()}.bind(this),fail:function(e,t){popUp.getComponent("FloatTip").showTip(e)}.bind(this)})},takeAwardSuccess:function(){window.facade.getComponent("GameModel").takeAdvanceReward(),window.facade.getComponent("GameModel").newerRewardCancelCount--,popUp.getComponent("Pop").removeTop()}}),cc._RF.pop()},{}],AlertTool:[function(e,t,n){"use strict";cc._RF.push(t,"7128bMwCDpDspZ2dLgOzJGz","AlertTool");t.exports={};var i={showMessage:function(e){cc.sys.platform==cc.sys.WECHAT_GAME&&wx.showToast({title:e,icon:"none",mask:!0,duration:2e3})},showSuccess:function(e){cc.sys.platform==cc.sys.WECHAT_GAME&&wx.showToast({title:e,icon:"success",mask:!0,duration:2e3})},hideToast:function(){cc.sys.platform==cc.sys.WECHAT_GAME&&wx.hideToast()},showLoading:function(e,t){cc.sys.platform==cc.sys.WECHAT_GAME&&wx.showLoading({title:e,mask:t})},hideLoading:function(){cc.sys.platform==cc.sys.WECHAT_GAME&&wx.hideLoading()},showConfirmModal:function(e,t,n){wx.showModal({title:e,content:t,confirm:function(){console.log("\u70b9\u51fb\u786e\u5b9a"),n.confirm&&n.confirm()}})},showModal:function(e,t,n,i){cc.sys.platform==cc.sys.WECHAT_GAME?wx.showModal({title:"\u63d0\u793a",content:e,confirmText:n,confirmColor:"#0a9528",cancelColor:"#646464",cancelText:t,success:function(e){e.confirm?(i.confirm(),console.log("\u7528\u6237\u70b9\u51fb\u786e\u5b9a")):e.cancel&&(i.cancel(),console.log("\u7528\u6237\u70b9\u51fb\u53d6\u6d88"))}}):i.cancel()}};t.exports=i,cc._RF.pop()},{}],AnalyticsUtilities:[function(e,t,n){"use strict";cc._RF.push(t,"06ec5x8XN5OsbnQwv5YN1Ls","AnalyticsUtilities");var i=t.exports={};Object.defineProperty(i,"__esModule",{value:!0});var o=function(){function e(){}return e.logEvent=function(e,t){return void 0===t&&(t=null),__awaiter(this,void 0,void 0,function(){var n;return __generator(this,function(i){return n=null,CC_WECHATGAME&&window.wx.aldSendEvent&&(window.wx.aldSendEvent(e,t),n="wx"),console.info("\u6253\u70b9"+n+": event = "+e+", bundle = "+JSON.stringify(t)),[2]})})},e}();i.AnalyticsUtilities=o,cc._RF.pop()},{}],BackEnergyView:[function(e,t,n){"use strict";var i;function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}cc._RF.push(t,"3d71e8GYvlJC7FQAW6LcVTe","BackEnergyView");var a=e("ModuleEventEnum");e("CommonFunc"),cc.Class((o(i={extends:cc.Component,properties:{btn:cc.Sprite,shareSkin:cc.SpriteFrame,videoSkin:cc.SpriteFrame,rewardEnergyLabel:cc.Label,recommendPre:cc.Prefab},onLoad:function(){this.frameCount=0},initData:function(e){this.addValue=e},start:function(){this.rewardType=window.facade.getComponent("ShareADModel").getShareADType(),2!=this.rewardType?this.btn.spriteFrame=this.videoSkin:this.btn.spriteFrame=this.shareSkin,this.rewardEnergyLabel.string=this.addValue},onEnable:function(){cc.director.getScene().getChildByName("Canvas").getChildByName("recommendBar").zIndex=1e4},onDisable:function(){cc.director.getScene().getChildByName("Canvas").getChildByName("recommendBar").zIndex=1},close:function(){window.facade.getComponent("GameModel").rewardEnergy(this.addValue),popUp.getComponent("FloatTip").showTip("\u6536\u83b7\u4f53\u529b x "+this.addValue),window.popUp.getComponent("Pop").removeTop()}},"onDisable",function(){cc.systemEvent.emit(a.BACK_ENERGY_CLOSED),window.facade.getComponent("BannerModel").hideBanner()}),o(i,"comfirm",function(){if(!facade.isMiniGame)return window.facade.getComponent("GameModel").rewardEnergy(2*this.addValue),popUp.getComponent("FloatTip").showTip("\u6536\u83b7\u4f53\u529b x "+2*this.addValue),void window.popUp.getComponent("Pop").removeTop();window.facade.getComponent("ShareADModel").showShareAD({inviteId:1529,videoId:21103,assistId:0,interstitalId:31103},{succ:function(e){console.log("\u4f53\u529b\u5206\u4eab\u6210\u529f:",e),window.facade.getComponent("GameModel").rewardEnergy(2*this.addValue),popUp.getComponent("FloatTip").showTip("\u6536\u83b7\u4f53\u529b x "+2*this.addValue),window.popUp.getComponent("Pop").removeTop()}.bind(this),fail:function(e,t){popUp.getComponent("FloatTip").showTip(e)}.bind(this)})}),o(i,"update",function(e){this.frameCount++}),i)),cc._RF.pop()},{CommonFunc:"CommonFunc",ModuleEventEnum:"ModuleEventEnum"}],BannerModel:[function(e,t,n){"use strict";cc._RF.push(t,"ec605HNWI5PtYwJ6mu+7pcQ","BannerModel");var i=e("Network");cc.Class({extends:cc.Component,properties:{bannerAd:null,isTransfinite:!1,isOpen:!1,isInclude:!1,showCount:0,hideCount:0,delayTime:2e3,mistakeTime:2e3,isRandomLoc:!1,isRandomLocInclude:!1},initConfig:function(){},onLoad:function(){},initBanner:function(){if(window.facade.bannerWidth=300,window.facade.bannerHeight=226,facade.isMiniGame){facade.Screenratio&&1/facade.Screenratio>2.06&&(window.facade.bannerHeight=290),this.leftSize=0,window.facade.windowWidth>window.facade.bannerWidth&&(this.leftSize=(window.facade.windowWidth-window.facade.bannerWidth)/2);var e=this,t={};switch(net.platformName){case"wx":t={adUnitId:"adunit-83ab50403a2e3b36",style:{left:e.leftSize,top:window.facade.windowHeight-93,width:window.facade.bannerWidth}};break;case"swan":t={appid:"a0072267",apid:"6446734",style:{left:e.leftSize,top:facade.windowHeight-93,width:facade.bannerWidth}};break;case"qq":case"tt":t={}}return this.bannerAd=wx.createBannerAd(t),this.bannerAd.onLoad(function(){}),this.bannerAd.onError(function(t){e.bannerAd=null}),this.bannerAd.onResize(function(t){e.bannerHeight=t.height,facade.Screenratio&&1/facade.Screenratio>2.06?window.facade.bannerHeight=2*(t.height+15+20)+30:window.facade.bannerHeight=2*(t.height+20),this.rePosBanner()}.bind(this)),this.bannerAd}},showBanner:function(e){if(facade.isMiniGame)return e&&facade.isMiniGame?window.facade.SAVE_MODE?(this.delayTime=0,void this.setupDelay(e)):this.isTransfinite?void this.setupDelay(e):this.isOpen?this.isInclude?void this.setupDelay(e):parseInt(this.getBannerCount())%(parseInt(this.hideCount)+parseInt(this.showCount))<this.hideCount?void this.setupDelay(e):void this.setupMistake(e):void this.setupDelay(e):void this.setupBanner();e&&(e.startDelay(),this.delayTimer=setTimeout(function(){e.endDelay()},this.delayTime))},showVirtualBanner:function(e){var t=function(e){e&&e.endDelay()}.bind(this);if(this.isShowVirBanner=!0,facade.isMiniGame){if(window.facade.SAVE_MODE)return;if(this.isTransfinite)return console.log("lc banner-- \u5c55\u793a\u6b21\u6570\u8d85\u8fc7\u9650\u5236"),void t(e);if(!this.isOpen)return console.log("lc banner-- \u8bef\u70b9\u529f\u80fd\u672a\u5f00\u653e, \u5ef6\u8fdf"),void t(e);if(this.isInclude)return console.log("lc banner-- \u5904\u4e8e\u5173\u95ed\u5217\u8868, \u5ef6\u8fdf"),void t(e);var n=parseInt(this.getBannerCount());console.log("lc banner-- \u5c55\u793a\u6b21\u6570 no = ",this.hideCount," show = ",this.showCount);var i=n%(parseInt(this.hideCount)+parseInt(this.showCount));return console.log("lc banner--  bannerCount = "+n+"  show = "+i),i<this.hideCount?(console.log("lc banner-- \u83b7\u53d6 banner \u7c7b\u578b : \u4e0d\u5904\u4e8e\u5173\u95ed\u5217\u8868, \u5f53\u524d\u4e0d\u51fa\u73b0, \u5ef6\u8fdf"),void t(e)):(console.log("lc banner-- \u83b7\u53d6 banner \u7c7b\u578b : \u4e0d\u5904\u4e8e\u5173\u95ed\u5217\u8868, \u5f53\u524d\u51fa\u73b0, \u8bef\u70b9"),void this.setupMistake(e))}e&&(e.startDelay(),console.log("lc banner-- \u975e\u5fae\u4fe1 \u5f00\u59cb\u5ef6\u8fdf"),this.delayTimer=setTimeout(function(){console.log("lc banner-- \u975e\u5fae\u4fe1 \u7ed3\u675f\u5ef6\u8fdf"),e.endDelay()},this.delayTime))},hideBanner:function(){null!=this.mistakeTimer&&(clearTimeout(this.mistakeTimer),this.mistakeTimer=null),null!=this.delayTimer&&(clearTimeout(this.delayTimer),this.delayTimer=null),this.isShowBanner=!1,null!=this.bannerAd&&this.bannerAd.hide()},setupDelay:function(e){e&&(e.startDelay(),this.setupBanner(null),this.delayTime>0?this.delayTimer=setTimeout(function(){e.endDelay()},this.delayTime):e.endDelay())},setupMistake:function(e){var t=this;e&&(this.isRandom=!1,this.isRandomLoc&&!this.isRandomLocInclude&&(this.isRandom=!0),e.startMistake(this.getStartRandomLocation()),this.mistakeTime>0?this.mistakeTimer=setTimeout(function(){t.isShowBanner?e.endMistake(t.getEndRandomLocation()):t.setupBanner(e)},this.mistakeTime):this.isShowBanner?e.endMistake(this.getEndRandomLocation()):this.setupBanner(e))},getStartRandomLocation:function(){var e=0,t=window.facade.bannerHeight/2-20,n=window.facade.windowWidth,i=-40;return this.isRandom&&(e=parseInt(Math.random()*(n-100)-(n-100)/2),t=parseInt(Math.random()*(window.facade.bannerHeight-100)+40),i=parseInt(150*Math.random()+160)),{x:e,bottom:t,top:i}},getEndRandomLocation:function(){var e=0,t=window.facade.bannerHeight+160,n=window.facade.windowWidth;return this.isRandom&&(e=parseInt(Math.random()*(n-100)-(n-100)/2)),{x:e,bottom:t,top:-40}},setupBanner:function(e){var t=this,n=this;this.isShowVirBanner&&(this.isShowVirBanner=!1,null!=e&&e.endMistake(n.getEndRandomLocation())),null!=this.bannerAd?(this.bannerAd.show().then(function(){n.isShowBanner=!0,n.uploadBannerShow(),null!=e&&e.endMistake(n.getEndRandomLocation())}),this.bannerAd.onError(function(i){t.bannerAd=null,console.log("lc banner-- \u663e\u793a err = "+i),null!=e&&e.endMistake(n.getEndRandomLocation())}),this.rePosBanner()):(this.bannerAd=this.initBanner(),this.bannerAd.onError(function(i){t.bannerAd=null,null!=e&&e.endMistake(n.getEndRandomLocation())}),this.bannerAd.show().then(function(){n.uploadBannerShow(),null!=e&&e.endMistake(n.getEndRandomLocation())}),this.rePosBanner())},rePosBanner:function(){facade.Screenratio&&1/facade.Screenratio>2.06?this.bannerAd.style.top=window.facade.windowHeight-window.facade.bannerHeight/2+20+15+15:this.bannerAd.style.top=window.facade.windowHeight-window.facade.bannerHeight/2+20},getBannerCount:function(){var e=cc.sys.localStorage.getItem("bannerCount"),t=cc.sys.localStorage.getItem("bannerTime");return e=e||0,t=t||0,parseInt(t)<window.net.getComponent("Net").getServerToday0Clock()&&(e=0),e},saveBannerCount:function(){var e=this.getBannerCount(),t=window.net.getComponent("Net").getServerTimeSec();e+=1,cc.sys.localStorage.setItem("bannerCount",e),cc.sys.localStorage.setItem("bannerTime",t)},uploadBannerShow:function(){var e=this,t=window.facade.httpServerAdress+"game/adBannerShow",n={game_id:window.facade.GameId,token:window.facade.getComponent("PlayerModel").token};i.postRequest(t,n,{success:function(t){e.isTransfinite=1!=t.is_show,e.saveBannerCount()},failure:function(t){e.isTransfinite=!1}})}}),cc._RF.pop()},{Network:"Network"}],Block:[function(e,t,n){"use strict";cc._RF.push(t,"fcffbre2W5Kz58mIfA72AdH","Block");var i=e("ModuleEventEnum");cc.Class({extends:cc.Component,properties:{},onLoad:function(){},start:function(){},onBeginContact:function(e,t,n){"prop"==t.node.group&&"body"==n.node.group&&cc.v2(t.body._b2Body.m_linearVelocity.x-n.body._b2Body.m_linearVelocity.x,t.body._b2Body.m_linearVelocity.y- -n.body._b2Body.m_linearVelocity.y).mag()>2&&this.killSuffer(n.node)},onPreSolve:function(e,t,n){},onPostSolve:function(e,t,n){},killSuffer:function(e){if(!this.suffer||this.suffer!=e.parent){this.suffer=e.parent;var t=cc.instantiate(this.suffer.getChildByName("blood"));t.active=!0,t.getComponent(cc.ParticleSystem).resetSystem(),t.parent=e,cc.systemEvent.emit(i.KILLED,this.suffer.name)}},expolosiveAnimate:function(){},update:function(e){}}),cc._RF.pop()},{ModuleEventEnum:"ModuleEventEnum"}],Boom:[function(e,t,n){"use strict";cc._RF.push(t,"1a5b96zuXBLSopJtQGYUVXE","Boom");var i=e("ModuleEventEnum");cc.Class({extends:cc.Component,properties:{boomPre:cc.Prefab},onLoad:function(){},start:function(){},onBeginContact:function(e,t,n){"boom"==t.node.group&&"bullet"==n.node.group?this.explosive():"boom"==t.node.group&&"body"==n.node.group?cc.v2(t.body._b2Body.m_linearVelocity.x-n.body._b2Body.m_linearVelocity.x,t.body._b2Body.m_linearVelocity.y- -n.body._b2Body.m_linearVelocity.y).mag()>2&&this.explosive():"boom"==t.node.group&&"boom"==n.node.group&&cc.v2(t.body._b2Body.m_linearVelocity.x-n.body._b2Body.m_linearVelocity.x,t.body._b2Body.m_linearVelocity.y- -n.body._b2Body.m_linearVelocity.y).mag()>2&&this.explosive()},explosive:function(){this.expolosiveAnimate(),this.findSuffer(),this.node.removeFromParent(),window.audio.getComponent("SoundManager").playEffect("bomb")},onPreSolve:function(e,t,n){},findSuffer:function(){var e=window.facade.selectedLevelType,t="other";"vip"==e&&(t="vip"),"injury"==e&&(t="role");for(var n=cc.director.getScene().getChildByName("Canvas").getChildByName("levelPlay").getChildren(),i=this.node.position,o=0;o<n.length;o++)if((n[o].name.match("suffer")||n[o].name.match(t))&&n[o].position.sub(i).mag()<2*this.node.width){var a=n[o];this.killSuffer(a)}},onPostSolve:function(e,t,n){},killSuffer:function(e){for(var t=e.position.sub(this.node.position).normalizeSelf(),n=0;n<e.getChildren().length;n++){var o=e.getChildren()[n],a=o.getComponent(cc.RigidBody);if("body"==o.group&&a){var s=cc.director.getScene().getChildByName("Canvas").getChildByName("levelPlay").convertToNodeSpaceAR(o.convertToWorldSpaceAR(cc.v2()));a.applyLinearImpulse(t.mulSelf(1.8),s);var c=cc.instantiate(e.getChildByName("blood"));c.active=!0,c.getComponent(cc.ParticleSystem).resetSystem(),c.parent=o}}cc.systemEvent.emit(i.KILLED,e.name)},expolosiveAnimate:function(){var e=cc.instantiate(this.boomPre);e.position=cc.director.getScene().getChildByName("Canvas").getChildByName("levelPlay").convertToNodeSpaceAR(this.node.convertToWorldSpaceAR(cc.v2())),e.getComponent(cc.ParticleSystem).autoRemoveOnFinish=!0,e.getComponent(cc.ParticleSystem).resetSystem(),cc.director.getScene().getChildByName("Canvas").getChildByName("levelPlay").addChild(e)},update:function(e){}}),cc._RF.pop()},{ModuleEventEnum:"ModuleEventEnum"}],Bullet:[function(e,t,n){"use strict";cc._RF.push(t,"f3152GumVhKvJSjpOYHIHx4","Bullet");var i=e("ModuleEventEnum");cc.Class({extends:cc.Component,properties:{crateBoomPre:cc.Prefab},onLoad:function(){this._first=!0,this._kills={},this.frameCount=0,this.reflectCount=0},start:function(){this.node.master.match("suffer")&&(this.node.getChildByName("tail").getComponent(cc.MotionStreak).color=cc.color(255,255,255))},onBeginContact:function(e,t,n){if("bullet"==t.node.group&&"body"==n.node.group){if(this._kills[n.node.parent.name]);else{if(this.reflectCount<=0&&"role"==n.node.parent.name)return;if(this._hitman=n.node.parent,this.hit=!0,this.out=!1,this._hitman&&this._hitman.getChildByName("blood")){var o=cc.instantiate(this._hitman.getChildByName("blood"));o.active=!0,o.getComponent(cc.ParticleSystem).resetSystem(),o.parent=n.node}}return this._kills[n.node.parent.name]=!0,void cc.systemEvent.emit(i.KILLED,n.node.parent.name)}if("bullet"==t.node.group&&this._first&&("border"==n.node.group||"prop"==n.node.group)){var a=cc.instantiate(cc.director.getScene().getChildByName("Canvas").getChildByName("hitEarth"));a.position=cc.director.getScene().getChildByName("Canvas").getChildByName("levelPlay").convertToNodeSpaceAR(t.node.convertToWorldSpaceAR(cc.v2())),a.getComponent(cc.ParticleSystem).autoRemoveOnFinish=!0,a.getComponent(cc.ParticleSystem).resetSystem(),cc.director.getScene().getChildByName("Canvas").getChildByName("levelPlay").addChild(a),this._first=!1}this.reflectCount++,window.audio.getComponent("SoundManager").playEffect("reflect"),this.reflectCount>20&&(window.facade.getComponent("LevelModel").useABullet(),this.node.removeFromParent())},onPreSolve:function(e,t,n){if("bullet"==t.node.group&&"body"==n.node.group)return this.out?void(e.disabled=!0):(e.disabled=!0,void n.node.getComponent(cc.RigidBody).applyForceToCenter(cc.v2(1e4,1e4)));if(t.body.isCross=!1,"bullet"==t.node.group&&"box"==n.node.group){var i=cc.instantiate(this.crateBoomPre);i.position=cc.director.getScene().getChildByName("Canvas").getChildByName("levelPlay").convertToNodeSpaceAR(n.node.convertToWorldSpaceAR(cc.v2())),i.getComponent(cc.ParticleSystem).autoRemoveOnFinish=!0,i.getComponent(cc.ParticleSystem).resetSystem(),cc.director.getScene().getChildByName("Canvas").getChildByName("levelPlay").addChild(i),n.node.removeFromParent()}},onPostSolve:function(e,t,n){"bullet"==t.node.group&&"body"==n.node.group&&(e.disabled=!0,this.out=!0),t.body.isCross=!1},update:function(e){this.frameCount++;var t=this.node.convertToWorldSpaceAR(cc.v2());(t.x<-500||t.x>1300||t.y<=-500||t.y>2e3)&&(window.facade.getComponent("LevelModel").useABullet(),this.node.removeFromParent())}}),cc._RF.pop()},{ModuleEventEnum:"ModuleEventEnum"}],ButtonScaler:[function(e,t,n){"use strict";cc._RF.push(t,"a32f2d7UklG8b2ja+3plXvA","ButtonScaler"),cc.Class({extends:cc.Component,properties:{pressedScale:1.1,transDuration:.24},onLoad:function(){var e=this;function t(t){0!=this.getComponent(cc.Button).interactable&&1!=e.pressedScale&&(this.stopAllActions(),this.runAction(e.scaleUpAction))}e.initScale=this.node.scale,e.button=e.getComponent(cc.Button),e.scaleDownAction=cc.scaleTo(e.transDuration,e.pressedScale),e.scaleUpAction=cc.scaleTo(e.transDuration,e.initScale),this.node.on("touchstart",function(t){0!=this.getComponent(cc.Button).interactable&&(1!=e.pressedScale&&(this.stopAllActions(),this.runAction(e.scaleDownAction)),window.audio.getComponent("SoundManager").playEffect("click"))},this.node),this.node.on("touchend",t,this.node),this.node.on("touchcancel",t,this.node)}}),cc._RF.pop()},{}],CarTouch:[function(e,t,n){"use strict";cc._RF.push(t,"8b36dnk0phKprFbi8DjcQ75","CarTouch");var i=e("MathUtils");cc.Class({extends:cc.Component,properties:{},onLoad:function(){this.inDragging=!1},initData:function(){this.track=this.node.getComponent("CarOperations").track,this.track.on(cc.Node.EventType.TOUCH_START,this.onTouchStart,this),this.track.on(cc.Node.EventType.TOUCH_MOVE,this.onTouchMove,this),this.track.on(cc.Node.EventType.TOUCH_END,this.onTouchEnd,this),this.track.on(cc.Node.EventType.TOUCH_CANCEL,this.onTouchCancel,this)},releaseData:function(){this.track.off(cc.Node.EventType.TOUCH_START),this.track.off(cc.Node.EventType.TOUCH_MOVE),this.track.off(cc.Node.EventType.TOUCH_END),this.track.off(cc.Node.EventType.TOUCH_CANCEL),this.track=null,this.rangePoints=null},onTouchStart:function(e){var t=e.getLocation();this._startTouchPos=t;var n=this.pickACar(t);n&&(n.park.getComponent("ParkCarJS").getParkStatus()==facade.CAR_GIFT||n.park.getComponent("ParkCarJS").carUId&&""!=n.park.getComponent("ParkCarJS").carUId&&n.park.getComponent("ParkCarJS").getParkStatus()!=facade.CAR_ANIMATION)?this._selectPark=n:this._selectPark=null},onTouchMove:function(e){var t=e.getLocation();if(this._selectPark&&this._selectPark.park.getComponent("ParkCarJS").getParkStatus()!=facade.CAR_RACING&&this._selectPark.park.getComponent("ParkCarJS").getParkStatus()!=facade.CAR_GIFT)if(this.inDragging){var n=this.node.getComponent("CarOperations").parkField.parent.convertToNodeSpaceAR(t);this.dragOne.x=n.x,this.dragOne.y=n.y}else cc.pDistance(this._startTouchPos,t)>=20&&this.startDrag()},onTouchEnd:function(e){if(this._selectPark){var t=this._selectPark.park.getComponent("ParkCarJS");if(!t.isMainPark||1!=t.carState){var n=this.node.getComponent("CarOperations").parkField,i=this.node.getComponent("CarOperations").parks,o=e.getLocation(),a=facade.getComponent("GameModel");if(this._selectPark.park.getComponent("ParkCarJS").getParkStatus()==facade.CAR_GIFT&&cc.pDistance(this._startTouchPos,o)<20){var s=facade.getComponent("UserModel").roleInfo.curSceneId;a.openCarGift(this._selectPark.index,s)}if(this._selectPark.park.getComponent("ParkCarJS").getParkStatus()==facade.CAR_RACING&&cc.pDistance(this._startTouchPos,o)<20)this.node.getComponent("CarOperations").rePark(this._selectPark.index,this._selectPark.park);else if(this.inDragging){var c=facade.getComponent("GuideModel"),r=window.facade.getComponent("UserModel").roleInfo.signinCount;if(!this.inFieldRange(o))return 1==r&&c.curStep<=window.facade.GUIDE_COMPOSE?void this.dragCancel():a.isLaneLimited()?a.hasLowerCarOnRacing(this._selectPark.park.getComponent("ParkCarJS").carUId)?(this.node.getComponent("CarOperations").switchTrack(this._selectPark.index,this._selectPark.park,o),void this.dragEnd()):(window.popUp.getComponent("FloatTip").showTip("\u8d5b\u9053\u5df2\u7ecf\u592a\u62e5\u6324\u5566\uff01"),void this.dragCancel()):(this.node.getComponent("CarOperations").toTrack(this._selectPark.index,this._selectPark.park,o),void this.dragEnd());var l=this.node.getComponent("GameMainJS").recycleNode.convertToWorldSpaceAR(cc.Vec2(0,0));if(cc.pDistance(l,o)<this.node.getComponent("GameMainJS").recycleNode.width/2)return this.node.getComponent("CarOperations").recycle(this._selectPark.index,this._selectPark.park),void this.dragEnd();if(1==r&&c.curStep==window.facade.GUIDE_MOVETO_TRACK)return void this.dragCancel();for(var d=0;d<i.length;d++){var h=i[d].convertToWorldSpaceAR(cc.Vec2(0,0));if(cc.pDistance(h,o)<=i[d].width*n.scaleX/2&&i[d]!=this._selectPark.park){if(i[d].getComponent("ParkCarJS").getParkStatus()==facade.CAR_RACING||i[d].getComponent("ParkCarJS").getParkStatus()==facade.CAR_ANIMATION||i[d].getComponent("ParkCarJS").getParkStatus()==facade.CAR_GIFT)break;return a.getBestCarId(),void(i[d].getComponent("ParkCarJS").carId==this._selectPark.park.getComponent("ParkCarJS").carId?a.getBestCarId()!=this._selectPark.park.getComponent("ParkCarJS").carId?(s=facade.getComponent("UserModel").roleInfo.curSceneId,a._mergeTarget={mapId:s,posId:i[d].getComponent("ParkCarJS").parkIndex},this.node.getComponent("CarOperations").mergeCar(d,this._selectPark.index,i[d],this._selectPark.park),this.dragRelease()):this.dragCancel():null!=i[d].getComponent("ParkCarJS").carId&&""!=i[d].getComponent("ParkCarJS").carId?(this.node.getComponent("CarOperations").switchPark(d,this._selectPark.index,i[d],this._selectPark.park),this.dragEnd()):(this.node.getComponent("CarOperations").movePark(d,this._selectPark.index,i[d],this._selectPark.park),this.dragEnd()))}}this.dragCancel()}}}},onTouchCancel:function(e){this.onTouchEnd(e)},pickACar:function(e){for(var t=this.node.getComponent("CarOperations").parks,n=this.node.getComponent("CarOperations").parkField,i=0;i<t.length;i++){var o=t[i].convertToWorldSpaceAR(cc.Vec2(0,0));if(cc.pDistance(o,e)<=t[i].width*n.scaleX/2)return{park:t[i],index:i}}return null},startDrag:function(){if(this._selectPark.park.getComponent("ParkCarJS").carUId&&""!=this._selectPark.park.getComponent("ParkCarJS").carUId){this.node.getComponent("GameMainJS").disableBuy(),this.inDragging=!0;var e=window.facade.getComponent("GameModel").getCarLevelById(this._selectPark.park.getComponent("ParkCarJS").carId);this.dragOne=this.node.getComponent("CarOperations").createMoveCar(e);var t=this._selectPark.park.convertToNodeSpaceAR(this._startTouchPos);this.dragOne.x=t.x,this.dragOne.y=t.y;var n=this._selectPark.park.getComponent("ParkCarJS");n.isMainPark&&this.dragOne.getComponent(cc.Sprite)._sgNode.setState(n.carState),this._selectPark.park.getComponent("ParkCarJS").setCarGray(!0),this.node.getComponent("CarOperations").showMergeNote(this._selectPark.park.getComponent("ParkCarJS"))}},startComposeGuide:function(){var e=window.facade.getComponent("GuideModel");if(1==window.facade.getComponent("UserModel").roleInfo.signinCount&&e.curStep==window.facade.GUIDE_COMPOSE){this._selectPark&&this.inDragging&&(this.dragCancel(),this._selectPark=null),this.dragOne&&(this.dragOne.removeFromParent(),this.dragOne=null),this.inDragging=!0;var t=this.node.getComponent("CarOperations").parks;this._selectPark={park:t[0],index:0},this.dragOne=this.node.getComponent("CarOperations").createMoveCar(1),this._selectPark.park.getComponent("ParkCarJS").setCarGray(!0);var n=this._selectPark.park.convertToWorldSpaceAR(cc.v2(0,0));n=this.dragOne.parent.convertToNodeSpaceAR(n),this.dragOne.x=n.x,this.dragOne.y=n.y,this.node.getComponent("CarOperations").showMergeNote(this._selectPark.park.getComponent("ParkCarJS"));var i=t[1].convertToWorldSpaceAR(cc.v2(0,0));i=this.dragOne.parent.convertToNodeSpaceAR(i);var o=cc.sequence(cc.moveTo(.8,i),cc.callFunc(function(){this.node.getComponent("CarOperations").mergeCar(1,this._selectPark.index,t[1],this._selectPark.park),this.dragRelease(),this.endGuide()}.bind(this)));this.dragOne.runAction(o)}},startMovetoTarckGuide:function(){var e=window.facade.getComponent("GuideModel");if(1==window.facade.getComponent("UserModel").roleInfo.signinCount&&e.curStep==window.facade.GUIDE_MOVETO_TRACK){this._selectPark&&this.inDragging&&(this.dragCancel(),this._selectPark=null),this.dragOne&&(this.dragOne.removeFromParent(),this.dragOne=null),this.inDragging=!0;var t=this.node.getComponent("CarOperations").parks;this._selectPark={park:t[1],index:1},this._selectPark.park.getComponent("ParkCarJS").setCarGray(!0);var n=window.facade.getComponent("GameModel").getCarLevelById(this._selectPark.park.getComponent("ParkCarJS").carId);this.dragOne=this.node.getComponent("CarOperations").createMoveCar(n);var i=this.dragOne.parent.convertToNodeSpaceAR(this.node.convertToWorldSpaceAR(cc.v2(287,0))).x,o=this.dragOne.parent.convertToNodeSpaceAR(t[1].convertToWorldSpaceAR(cc.v2(0,0))).y,a=t[1].convertToWorldSpaceAR(cc.v2(0,0));a=this.dragOne.parent.convertToNodeSpaceAR(a),this.dragOne.position=a;var s=cc.sequence(cc.moveTo(.8,cc.v2(i,o)),cc.callFunc(function(){this.node.getComponent("CarOperations").toTrack(this._selectPark.index,this._selectPark.park,cc.v2(i,o)),this.dragEnd(),this.endGuide()}.bind(this)));this.dragOne.runAction(s)}},endGuide:function(){this.inDragging=!1,this.dragOne=null,this._selectPark=null,this.node.getComponent("CarOperations").hideMergeNote()},dragCancel:function(){this.node.getComponent("CarOperations").hideMergeNote();var e=this.node.getComponent("CarOperations").parkField.parent.convertToNodeSpaceAR(this._startTouchPos);this.dragOne&&this.dragOne.runAction(cc.sequence(cc.moveTo(.2,e),cc.callFunc(this.dragCancelDeal,this)))},dragCancelDeal:function(){this.node.getComponent("GameMainJS").enableBuy(),this._selectPark.park.getComponent("ParkCarJS").setCarGray(!1),this.dragOne.removeFromParent(),this.dragOne=null,this.inDragging=!1},dragEnd:function(){this.node.getComponent("CarOperations").hideMergeNote(),this.node.getComponent("GameMainJS").enableBuy(),this._selectPark.park.getComponent("ParkCarJS").setCarGray(!1),this.dragOne.removeFromParent(),this.dragOne=null,this.inDragging=!1},dragRelease:function(){this.node.getComponent("CarOperations").hideMergeNote(),this.node.getComponent("GameMainJS").enableBuy(),this.dragOne.removeFromParent(),this.dragOne=null,this.inDragging=!1},inFieldRange:function(e){this.range=this.node.getComponent("CarOperations").range;var t=this.range.node.parent.convertToNodeSpaceAR(e),n=this.getRangePoints();return i.pointIsInPolygon(t,n)},getRangePoints:function(){if(this.rangePoints)return this.rangePoints;for(var e=[],t=this.range.points,n=0;n<t.length;n++){var i=t[n].clone();i.x*=this.range.node.scaleX,i.y*=this.range.node.scaleY,e.push(i)}return this.rangePoints=e,this.rangePoints}}),cc._RF.pop()},{MathUtils:"MathUtils"}],ChangeNameView:[function(e,t,n){"use strict";cc._RF.push(t,"08e3fk0b/BIIZBijkOhvQYv","ChangeNameView");var i=e("ModuleEventEnum");e("CommonFunc"),cc.Class({extends:cc.Component,properties:{comfirbtn:cc.Sprite,judgeInput:cc.Sprite,judgeTrue:cc.SpriteFrame,judgeFalse:cc.SpriteFrame,nameEditBox:cc.EditBox,titleLabel:cc.Label},onLoad:function(){if(!window.filterWord.m_wordList){var e=cc.loader.getRes("config/FilterwordDB.txt",cc.TextAsset);this.filterwordDBList=e.text.split(","),window.filterWord.init(this.filterwordDBList)}},start:function(){},initData:function(){},comfirBtn:function(){var e=this.nameEditBox.string,t=window.filterWord.runFilterWord(e);e!=t&&(this.nameEditBox.string=t,e=t,window.popUp.getComponent("FloatTip").showTip("\u5185\u5bb9\u5305\u542b\u654f\u611f\u8bcd\u6c47\uff0c\u5df2\u81ea\u52a8\u5c4f\u853d")),window.facade.getComponent("PlayerModel").nick=e,window.facade.getComponent("PlayerModel").recordRoleProfile(),cc.systemEvent.emit(i.PLAYER_NAME_CHANGE,e),window.popUp.getComponent("Pop").removeTop()},update:function(e){}}),cc._RF.pop()},{CommonFunc:"CommonFunc",ModuleEventEnum:"ModuleEventEnum"}],Chapter:[function(e,t,n){"use strict";cc._RF.push(t,"4c666yQ4flFvoDZdiN7ofuy","Chapter"),cc.Class({extends:cc.Component,properties:{itemPre:cc.Prefab,gird:cc.Node,mask:cc.Node,bg:cc.Sprite},onLoad:function(){},start:function(){this._data=this.node.data,this.currentLevel=window.facade.getComponent("LevelModel").getUnlockedLevelByType(facade.selectedLevelType),this._data[0].Level>this.currentLevel&&(this.locked=!0,this.mask.active=!0);for(var e=0;e<this._data.length;e++){var t=cc.instantiate(this.itemPre);t.config=this._data[e],t.currentLevel=this.currentLevel,this.gird.addChild(t)}this.chapterId=Math.floor(this._data[0].Level/15)+1,this.bgSkinUrl="scene/Scene_BG_"+this.chapterId,cc.loader.getRes(this.bgSkinUrl,cc.SpriteFrame)?this.bg.spriteFrame=cc.loader.getRes(this.bgSkinUrl,cc.SpriteFrame):cc.loader.loadRes(this.bgSkinUrl,cc.SpriteFrame,this.onSkinLoaded.bind(this))},onSkinLoaded:function(e,t){this.bg.spriteFrame=cc.loader.getRes(this.bgSkinUrl,cc.SpriteFrame)},update:function(e){}}),cc._RF.pop()},{}],CharacterBox:[function(e,t,n){"use strict";cc._RF.push(t,"68251ETCO9Ac5XoVfKT4OgP","CharacterBox");var i=e("ModuleEventEnum");cc.Class({extends:cc.Component,properties:{itemPre:cc.Prefab,content:cc.Node,character:cc.Sprite,characterHand:cc.Sprite,btn:cc.Node,priceLabel:cc.Node,buyBtnSprite:cc.SpriteFrame,useBtnSprite:cc.SpriteFrame,videoBtnSprite:cc.SpriteFrame},onLoad:function(){this.datas=[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16],this.node.on(cc.Node.EventType.TOUCH_START,this._onTouchBegan,this),this.node.on(cc.Node.EventType.TOUCH_MOVE,this._onTouchMoved,this),this.node.on(cc.Node.EventType.TOUCH_END,this._onTouchEnded,this),this.node.on(cc.Node.EventType.TOUCH_CANCEL,this._onTouchCancelled,this),cc.systemEvent.on(i.CHARACTER_INFO,this.onGotCharater,this),cc.systemEvent.on(i.SKIN_WATCHED,this.onSKinWatched,this)},_onTouchBegan:function(e,t){var n=e.touch;this._startTouch=n.getLocation().clone(),this._startContentX=this.content.x},_onTouchMoved:function(e,t){var n=e.touch;this.deltaMove=n.getLocation().sub(n.getStartLocation()),this._touchMoved?this.content.x=this._startContentX+this.deltaMove.x:this.deltaMove.mag()>7&&(this.content.x=this._startContentX+this.deltaMove.x,this._touchMoved=!0)},_onTouchEnded:function(e,t){var n=e.touch;this._touchMoved&&e.stopPropagation(),this._touchMoved?(this._touchMoved=!1,this.turnHome()):this.onClick(n)},onClick:function(e){for(var t=this.content.getChildren(),n=null,i=0;i<t.length;i++){var o=t[i];if(o.convertToNodeSpaceAR(e.getLocation()).mag()<120){o.getComponent("CharacterItem").onClick(),n=o;break}}if(n){this._touchMoved=!0;var a=200*Math.round(-n.x/200);this.deltaMove||(this.deltaMove=cc.v2()),this.deltaMove.x=a-this.content.x,this.content.stopAllActions();var s=cc.moveTo(.2,a,0);s.easing(cc.easeSineIn()),this.content.runAction(cc.sequence(s,cc.callFunc(this.selected,this)))}},_onTouchCancelled:function(e,t){this._touchMoved=!1,this.turnHome()},turnHome:function(){var e=200*Math.round(this.content.x/200);this.content.stopAllActions();var t=cc.moveTo(.2,e,0);t.easing(cc.easeSineIn()),this.content.runAction(cc.sequence(t,cc.callFunc(this.selected,this)))},selected:function(){this._touchMoved=!1;for(var e=this.content.getChildren(),t=999999,n=null,i=0;i<e.length;i++){var o=e[i],a=this.node.convertToNodeSpaceAR(o.convertToWorldSpaceAR(cc.v2(0,0))).x,s=Math.abs(a);s<t&&(t=s,n=e[i])}this._selectOne=n,window.facade.getComponent("GameModel").isCharacterLocked(n.data)},onBuyClick:function(){window.facade.getComponent("GameModel").isCharacterLocked(this._selectOne.data)&&(2==this.selectedConfig.CostType?window.facade.getComponent("GameModel").watchACharacter(this._selectOne.data):(window.facade.getComponent("GameModel").buyACharacter(this._selectOne.data),this.updateStatus()))},pageChange:function(e,t){if(console.log(e._curPageIdx),e._curPageIdx<this._curPageIdx)for(var n=0;n<this._curPageIdx-e._curPageIdx;n++)this.removeRight(),this.addLeft();else e._curPageIdx,this._curPageIdx;this.removeLeft(),this.addRight()},removeRight:function(){var e=this.node.getComponent(cc.PageView).getPages();this.node.getComponent(cc.PageView).removePageAtIndex(e.length-1)},addLeft:function(){var e=this.node.getComponent(cc.PageView).getPages()[0].data-1;e<=0&&(e=this.datas[this.datas.length-1]);var t=cc.instantiate(this.itemPre);t.data=e,this.node.getComponent(cc.PageView).insertPage(t,0),this.updatePosition()},updatePosition:function(){this.node.getComponent(cc.PageView)._curPageIdx=2,this.content.x=-this.content.width/2,this._curPageIdx=2},removeLeft:function(){},addRight:function(){},start:function(){window.facade.getComponent("GameModel").charaterConfig&&this.onGotCharater()},onGotCharater:function(){this.characterId=window.facade.getComponent("GameModel").characterId;for(var e=[],t=0,n=0;n<this.datas.length;n++)this.characterId==this.datas[n]&&(t=n);for(var i=0;i<5;i++){var o=t-2+i;o<0?o=this.datas.length+o:o>=this.datas.length&&(o-=this.datas.length),e[i]=this.datas[o]}for(i=0;i<5;i++){var a=cc.instantiate(this.itemPre);a.data=e[i],a.x=200*i-400,this.content.addChild(a)}this.updateContent(),this.selected()},onSKinWatched:function(){this.updateStatus()},init:function(){this.content.x=-this.content.width/2},updateContent:function(){this.content.width=200*this.content.getChildren().length},insertToRight:function(e){var t=this.content.getChildren(),n=t[t.length-1],i=n.data+1;i>this.datas[this.datas.length-1]&&(i=this.datas[0]),e.data=i,e.getComponent("CharacterItem").init(),e.x=n.x+200},insertToLeft:function(e){var t=this.content.getChildren()[0],n=t.data-1;n<this.datas[0]&&(n=this.datas[this.datas.length-1]),e.data=n,e.getComponent("CharacterItem").init(),e.x=t.x-200},dealSelection:function(e){e!=this._selectId&&(this._selectId=e,this.setSkin(),this.updateStatus())},setSkin:function(){cc.loader.getRes("roles",cc.SpriteAtlas)?(this.character.spriteFrame=cc.loader.getRes("roles",cc.SpriteAtlas).getSpriteFrame("MrBullet_Role_Body_0"+this._selectId),this.characterHand.spriteFrame=cc.loader.getRes("roles",cc.SpriteAtlas).getSpriteFrame("MrBullet_Role_AimArm_0"+this._selectId)):cc.loader.loadRes("roles",cc.SpriteAtlas,this.setSkin.bind(this))},updateStatus:function(){if(this.selectedConfig=window.facade.getComponent("GameModel").charaterConfig[String(this._selectId)],console.log(this.selectedConfig),window.facade.getComponent("GameModel").isCharacterLocked(this._selectId))if(2==this.selectedConfig.CostType){var e=window.facade.getComponent("GameModel").getWatchCount(this._selectId);this.priceLabel.getComponent("TextureLabel").setText(e+"/"+this.selectedConfig.Cost),this.priceLabel.parent.active=!0,this.priceLabel.parent.getChildByName("cash").active=!1,this.btn.getComponent(cc.Sprite).spriteFrame=this.videoBtnSprite,this.btn.active=!0}else this.priceLabel.getComponent("TextureLabel").setText(String(this.selectedConfig.Cost)),this.priceLabel.parent.getChildByName("cash").active=!0,this.priceLabel.parent.active=!0,this.btn.getComponent(cc.Sprite).spriteFrame=this.buyBtnSprite,this.btn.active=!0;else this.priceLabel.parent.active=!1,this.btn.getComponent(cc.Sprite).spriteFrame=this.useBtnSprite,window.facade.getComponent("GameModel").characterId==this._selectId?this.btn.active=!1:this.btn.active=!0},useSkin:function(){cc.systemEvent.emit(i.ROLE_SELECTED,this._selectId),this.btn.active=!1},btnClick:function(){this.priceLabel.parent.active?this.onBuyClick():this.useSkin()},update:function(e){var t=this.content.getChildren();if(this._touchMoved){for(var n=0;n<t.length;n++){var i=(o=t[n]).convertToWorldSpaceAR(cc.v2(100,0));if(i.x<0&&this.deltaMove.x<0){this.insertToRight(o);break}if(i.x>740&&this.deltaMove.x>0){this.insertToLeft(o);break}}t.sort(function(e,t){return e.x<t.x?-1:1})}for(n=0;n<t.length;n++){var o=t[n],a=this.node.convertToNodeSpaceAR(o.convertToWorldSpaceAR(cc.v2(0,0))).x;o.selection=-1e-5*Math.pow(a,2)+1.3,o.selection>1.25&&this.dealSelection(o.data)}}}),cc._RF.pop()},{ModuleEventEnum:"ModuleEventEnum"}],CharacterItem:[function(e,t,n){"use strict";cc._RF.push(t,"a9e02PQyjxNZ6RjSxD3hyzy","CharacterItem");var i=e("ModuleEventEnum");cc.Class({extends:cc.Component,properties:{man:cc.Sprite,frame:cc.Sprite,frameSkin1:cc.SpriteFrame,frameSkin2:cc.SpriteFrame,effect:cc.Node,freeIcon:cc.Node},onLoad:function(){this.node.opacity=0,cc.systemEvent.on(i.CHARACTER_GOT,this.characterGot,this)},start:function(){this.init()},init:function(){cc.loader.getRes("roles",cc.SpriteAtlas)?this.initSkins():cc.loader.loadRes("roles",cc.SpriteAtlas,this.onAtlasLoad.bind(this)),this.config=window.facade.getComponent("GameModel").charaterConfig[String(this.node.data)],facade.getComponent("GameModel").isCharacterLocked(this.node.data)?this.freeIcon.active=2==this.config.CostType:this.freeIcon.active=!1},onAtlasLoad:function(){this.initSkins()},initSkins:function(){this.node.runAction(cc.fadeIn(.2));var e=cc.loader.getRes("roles",cc.SpriteAtlas);this.man.spriteFrame=e.getSpriteFrame("Role_0"+this.node.data+"_head")},characterGot:function(e){e==this.node.data&&(this.effect.active=!0,this.effect.getComponent(cc.ParticleSystem).resetSystem())},onClick:function(){console.log("click...",this.node.data)},update:function(e){!this.node.selection||this.node.selection<=1.2?this.frame.spriteFrame=this.frameSkin1:this.frame.spriteFrame=this.frameSkin2}}),cc._RF.pop()},{ModuleEventEnum:"ModuleEventEnum"}],ClientServerUI:[function(e,t,n){"use strict";cc._RF.push(t,"54d71IO4uJBIJSHenLgyuij","ClientServerUI"),cc.Class({extends:cc.Component,properties:{},start:function(){facade.getComponent("GameModel").checkClientRewardShow()},onClickBack:function(){popUp.getComponent("Pop").removeByName("ClientServerUI")},onClickReward:function(){window.wx&&facade.getComponent("PlayerModel").wxAdaptor.getClientReward()}}),cc._RF.pop()},{}],CollectGift:[function(e,t,n){"use strict";cc._RF.push(t,"9e54b3UIkNBw7LcAA25ZZrU","CollectGift"),cc.Class({extends:cc.Component,properties:{tipNode:cc.Node,content:cc.Node,backBtn:cc.Node,getBtn:cc.Node},start:function(){var e=facade.getComponent("GameModel").lastFetchColectTime;e||(e=0),this.getBtn.active=0==e},viewDidAppear:function(){this.updatePos();var e=cc.moveBy(.3,cc.v2(0,-100)),t=cc.repeatForever(cc.sequence(e,e.reverse()));this.tipNode.runAction(t)},updatePos:function(){var e=facade.getComponent("PlayerModel").wxAdaptor.getMenuPos();null!=e&&(this.tipNode.x=e.x*facade.screenWidth-this.tipNode.width/2,this.tipNode.y=e.y*facade.screenHeight-this.tipNode.height/2,this.backBtn.y=this.tipNode.y+20,this.content.y=this.tipNode.y-30,this.content.scale=.87)},onClickBack:function(){popUp.getComponent("Pop").removeTop()},onClickGet:function(){facade.getComponent("PlayerModel").wxAdaptor.checkCollectCondi()?(facade.getComponent("GameModel").getCollectReward(),popUp.getComponent("Pop").removeTop()):popUp.getComponent("FloatTip").showTip("\u8bf7\u4ece\u6211\u7684\u5c0f\u7a0b\u5e8f\u8fdb\u5165\u6e38\u620f\uff01")}}),cc._RF.pop()},{}],CommonConfig:[function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}cc._RF.push(t,"642caD5keBGkK5gzOk7CCkx","CommonConfig");var o=function e(){i(this,e)};o.httpconfig={host:"igamesland.com",port:"8090",log:!0},t.exports=o,cc._RF.pop()},{}],CommonFunc:[function(e,t,n){"use strict";cc._RF.push(t,"7c648/IvX1OzawDZw9kDlHp","CommonFunc");t.exports={};var i={changeNumToTime:function(e){var t=parseInt(e/60),n="",i=parseInt(t/60);i>0&&(n=i+":",t=parseInt(t%60));var o=e%60,a=t+"",s=o+"";return 0===t&&(a="0"),t<10&&(a="0"+t),o<10&&(s="0"+o),n+a+":"+s},setShareADShow:function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;switch(e){case 1:t.active=!0,null!=i&&(i.string="\u770b\u89c6\u9891");break;case 2:n.active=!0,null!=i&&(i.string="\u53bb\u5206\u4eab")}}};t.exports=i,cc._RF.pop()},{}],Earth:[function(e,t,n){"use strict";cc._RF.push(t,"068cadzUbpBHavKGexxGZi7","Earth");var i=e("ModuleEventEnum");cc.Class({extends:cc.Component,properties:{},start:function(){},onBeginContact:function(e,t,n){"border"==t.node.group&&"body"==n.node.group&&cc.v2(n.body._b2Body.m_linearVelocity.x,n.body._b2Body.m_linearVelocity.y).mag()>2&&this.killSuffer(n.node)},onPreSolve:function(e,t,n){},onPostSolve:function(e,t,n){},killSuffer:function(e){if(!this.suffer){this.suffer=e.parent;var t=cc.instantiate(this.suffer.getChildByName("blood"));t.active=!0,t.getComponent(cc.ParticleSystem).resetSystem(),t.parent=e,cc.systemEvent.emit(i.KILLED,this.suffer.name)}}}),cc._RF.pop()},{ModuleEventEnum:"ModuleEventEnum"}],EnergyNeedView:[function(e,t,n){"use strict";cc._RF.push(t,"ad100rUk+lMYIZzty3UDNLp","EnergyNeedView"),e("CommonFunc"),cc.Class({extends:cc.Component,properties:{btn:cc.Sprite,shareSkin:cc.SpriteFrame,videoSkin:cc.SpriteFrame,title:cc.Label},onLoad:function(){this.frameCount=0},initData:function(){},start:function(){this.rewardType=window.facade.getComponent("ShareADModel").getShareADType(),2!=this.rewardType?(this.btn.spriteFrame=this.videoSkin,this.title.string="\u89c2\u770b\u89c6\u9891\u83b7\u5f97"):(this.btn.spriteFrame=this.shareSkin,this.title.string="\u5206\u4eab\u7ed9\u670b\u53cb\u4eec\u83b7\u5f97")},close:function(){window.popUp.getComponent("Pop").removeTop()},onDisable:function(){window.facade.getComponent("BannerModel").hideBanner()},comfirm:function(){if(!facade.isMiniGame)return window.facade.getComponent("GameModel").rewardEnergy(5),popUp.getComponent("FloatTip").showTip("\u6536\u83b7\u4f53\u529b x 5"),void window.popUp.getComponent("Pop").removeTop();window.facade.getComponent("ShareADModel").showShareAD({inviteId:1526,videoId:21101,assistId:0,interstitalId:31101},{succ:function(e){console.log("\u4f53\u529b\u5206\u4eab\u6210\u529f:",e),window.facade.getComponent("GameModel").rewardEnergy(5),popUp.getComponent("FloatTip").showTip("\u6536\u83b7\u4f53\u529b x 5"),window.popUp.getComponent("Pop").removeTop()}.bind(this),fail:function(e,t){popUp.getComponent("FloatTip").showTip(e)}.bind(this)})},update:function(e){this.frameCount++}}),cc._RF.pop()},{CommonFunc:"CommonFunc"}],EnergyTimer:[function(e,t,n){"use strict";cc._RF.push(t,"b2cacT+nhRPM5WGiPq9O1Ft","EnergyTimer");var i=e("CommonFunc");cc.Class({extends:cc.Component,properties:{energyLabel:cc.Node,energyCD:cc.Node},onLoad:function(){this.frameCount=0},start:function(){},init:function(){},update:function(e){if(this.energyLabel.getComponent("TextureLabel").setText(String(window.facade.getComponent("GameModel").energy)),this.energyCD.active=!window.facade.getComponent("GameModel").isEnergyFull(),this.frameCount++,this.frameCount%30==0){var t=window.facade.getComponent("GameModel").getNextEnergyTime(),n=(new Date).getTime(),o=Math.round((t-n)/1e3),a=String(i.changeNumToTime(o));this.energyCD.getComponent("TextureLabel").setText(a)}}}),cc._RF.pop()},{CommonFunc:"CommonFunc"}],EntranceItem:[function(e,t,n){"use strict";cc._RF.push(t,"ac8cbn8DlJLGawjpwJrejqC","EntranceItem"),cc.Class({extends:cc.Component,properties:{desc:cc.Label,icon:cc.Sprite,btn:cc.Node},start:function(){cc.loader.loadRes("uis",cc.SpriteAtlas,function(e,t){e?console.error(e):this.icon.spriteFrame=t.getSpriteFrame(this.itemData.name)}.bind(this)),this.desc.string=this.itemData.desc,this.btn.getChildByName("strength").active=1==this.itemData.type,this.btn.getChildByName("cash").active=!(1==this.itemData.type),this.btn.getChildByName("Label").getComponent(cc.Label).string=this.itemData.act},setItemData:function(e,t){this.itemId=e,this.itemData=t},onClickSelf:function(){if(""!=this.itemData.target){if("HoverWinUI"==this.itemData.target&&facade.getComponent("PlayerModel").wxAdaptor.checkHoverWinShow())return void facade.getComponent("GameModel").applyHoverWinReward();popUp.getComponent("Pop").addPopByName(this.itemData.target,null,!0,!0,!1),e("VirBannerCtrl").hideVirBanner()}else popUp.getComponent("FloatTip").showTip("\u5f00\u53d1\u4e2d\uff0c\u656c\u8bf7\u671f\u5f85\uff01")}}),cc._RF.pop()},{VirBannerCtrl:"VirBannerCtrl"}],EntranceUI:[function(e,t,n){"use strict";cc._RF.push(t,"53acfRSOfRGJbpC7wdxQJNm","EntranceUI");var i=e("ModuleEventEnum");cc.Class({extends:cc.Component,properties:{title:cc.Label,scroll:cc.ScrollView,item:cc.Prefab,recommendPre:cc.Prefab,mianfeitili:cc.Node,xinrenhaoli:cc.Node},onLoad:function(){cc.systemEvent.on(i.UPDATE_HOVER_SHOW,this.initContent,this),this.strengthList=[{name:"pop_icon_fc",desc:"\u6dfb\u52a0\u6d6e\u7a97\u5f97\u4f53\u529b",type:1,target:"HoverWinUI",act:"\u53bb\u9886\u53d6"},{name:"pop_icon_yq",desc:"\u9080\u8bf7\u597d\u53cb\u5f97\u4f53\u529b",type:1,target:"InviteDailyUI",act:"\u53bb\u9886\u53d6"}],this.cashList=[{name:"pop_icon_sc",desc:"\u6536\u85cf\u6e38\u620f\u5f97\u597d\u793c",type:0,target:"CollectGift",act:"\u53bb\u6536\u85cf"},{name:"pop_icon_rz",desc:"\u65b0\u624b\u5165\u9a7b\u5f97\u8c6a\u793c",type:0,target:"InviteNewUI",act:"\u53bb\u9080\u8bf7"}]},start:function(){this.initContent()},initData:function(e){this.data=e},onEnable:function(){cc.director.getScene().getChildByName("Canvas").getChildByName("recommendBar").zIndex=1e4},onDisable:function(){cc.director.getScene().getChildByName("Canvas").getChildByName("recommendBar").zIndex=1},initContent:function(){if(facade.getComponent("GameModel").checkHoverWinRewardShow()||this.strengthList.shift(),!facade.getComponent("GameModel").checkClientRewardShow()){var e=2==this.strengthList.length?0:1;this.strengthList.splice(e,1)}0!=facade.getComponent("GameModel").lastFetchColectTime&&this.cashList.splice(0,1);var t=1==this.data?this.strengthList:this.cashList;for(var n in this.mianfeitili.active=this.xinrenhaoli.active=!1,1==this.data?this.mianfeitili.active=!0:this.xinrenhaoli.active=!0,0!=this.scroll.content.childrenCount&&this.scroll.content.removeAllChildren(),t){var i=cc.instantiate(this.item);i.getComponent("EntranceItem").setItemData(parseInt(n),t[n]),this.scroll.content.addChild(i)}},doClose:function(){cc.systemEvent.off(i.UPDATE_HOVER_SHOW,this.initContent,this)},onClickBack:function(){popUp.getComponent("Pop").removeTop()}}),cc._RF.pop()},{ModuleEventEnum:"ModuleEventEnum"}],Facade:[function(e,t,n){"use strict";cc._RF.push(t,"fe1be+EMEJAzahMcKCVIdhh","Facade"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){switch(this.node.reEnter=!1,this.node.inQQ=!1,this.node.qqAppId="",this.node.qqAppKey="",this.node.VERSION=1002,window.net.platformName){case"wx":this.node.GameId=91,this.node.Client_Secret=""}this.node.token="",this.node.FOR_DEVELOP=!0,this.node.SAVE_MODE=!1,this.node.ResPath="",this.node.ProjName="",this.node.AllowWXInfo=!0,this.node.SkipLogin=!1,this.node.isEnteredGame=!1,this.node.isEnabledPay=!1,this.node.isEnabledGuilde=!0,this.node.isEnabledVideoAd=!0,this.node.SERVER_ID=2,this.node.SERVER_ID_BETA=3,this.node.FIRST_CAR_ID=10101,this.node.PopOrder=9999,this.node.FloatOrder=11e3,this.node.BEHAVE_WELLBEING=5001,this.node.BEHAVE_MAINRECOMMEND=5002,this.node.BEHAVE_COMMONRECOMMEND=5003,this.node.BEHAVE_CPARECOMMEND=5004,this.node.CLICK_MAIN_BOX=3002,this.node.CLICK_ADVENTURE=3003,this.node.BEHAVE_WX_LOGIN=1001,this.node.BEHAVE_LOADING_START=1002,this.node.BEHAVE_LOADING_END=1003,this.node.BEHAVE_CLICK_RACING=3001,this.node.PAY_SUCCESS=13,this.node.BEHAVE_ROLE=12,this.node.BEHAVE_LOGIN=11,this.node.BEHAVE_ALLOWED=10,this.node.BEHAVE_ONSHOW=9,this.node.BEHAVE_FORM_SHARE=8,this.node.BEHAVE_SHARE=7,this.node.BEHAVE_ENTER=1,this.node.BEHAVE_VIDEOSTART=4,this.node.BEHAVE_VIDEOEND=5,this.node.INVITE_LEVERAWARD="1511",this.node.INVITE_RECALL="1517",this.node.INVITE_PARARA="1513",this.node.INVITE_UNLOCK_FRIEND_GUARD="1514",this.node.INVITE_FRIEND_GUARD="1515",this.node.INVITE_UNIVERSAL_FRAGMENT="1516",this.node.INVITE_LOVESEA="1518",this.node.INVITE_AWARDRES="1519",this.node.INVITE_SHAREDOG="1520",this.node.INVITE_SHAREFRIEND="1521",this.node.INVITE_SHARERANK="1522",this.node.INVITE_LUCKYDRAW="1523",this.node.INVITE_TIMEINIVTE="1524",this.node.uiNames={NextLoginView:1,NewerView:2,AdvanceView:3,EnergyNeedView:4,BackEnergyView:5,EntranceUI:6,Rank:8,skinPanel:9},this.node.PlayerAtrriKeys={},this.node.GlobalKeys={},this.node.httpServerAdress="",this.node.behaveReportAdress="",this.node.appLinkReportAdress="",this.node.openapiUrl="",this.node.showRankPage=1,this.node.canShowShareGroup=!0,this.node.lastSessionid="0",this.node.showShareTicket=null,this.node.isEnterGameFirst=!0,this.node.queryRoleID=null,this.node.isShareOut=!1,this.node.isOpenedGiftbag=!1,this.node.logicCode="",this.node.tipsNode=null}}),cc._RF.pop()},{}],FakeInterUI:[function(e,t,n){"use strict";cc._RF.push(t,"2a2e5DCyQZC8IYemZGm5PJC","FakeInterUI");var i=e("ModuleEventEnum");cc.Class({extends:cc.Component,properties:{item:cc.Prefab,content:cc.Node},onLoad:function(){cc.systemEvent.on(i.MORE_GAME,this.initContent,this),facade.getComponent("MoreGameModel").requestMoreGameList()},initData:function(e){this.mainDatas=e},initContent:function(){var e,t=[];if((t=t.concat(facade.getComponent("MoreGameModel").boxList[0])).sort(function(e,t){return parseInt(e.sort)>parseInt(t.sort)?-1:1}),window.facade.getComponent("PlayerModel").isClickCountLimit(2))for(var n=0;n!=t.length;){var i=t[n].navout_max_cnt;parseInt(i)&&""!=parseInt(i)&&0!=parseInt(i)&&t[n].navout_cnt>=parseInt(i)?t.splice(n,1):n++}if(facade.getComponent("PlayerModel").isIconRandomOrder("interstitial")){var o=facade.getComponent("PlayerModel").getInterstiRecommondRandomCount(),a=t.slice(0,o),s=t.slice(o,t.length);a&&a.length>1&&a.sort(function(){return.5-Math.random()}),t=[],t=a.concat(s)}else t.sort(function(e,t){return Number(e.weight)>Number(t.weight)?-1:1});for(var c in e=t.length>9?t.splice(0,9):t){var r=cc.instantiate(this.item);r.getComponent("RecommendGameItem").setupItemData(e[c]),r.parent=this.content;var l=new cc.Node,d=l.addComponent(cc.Label);d.string=e[c].game_name,d.fontSize=22,r.addChild(l),l.y=-20-r.height/2,l.color=cc.Color.GRAY}},onClickClose:function(){popUp.getComponent("Pop").removeTop()}}),cc._RF.pop()},{ModuleEventEnum:"ModuleEventEnum"}],FloatTip:[function(e,t,n){"use strict";cc._RF.push(t,"4d2446SQc9EDZGKyL3AJlKY","FloatTip"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){var t=e("ModuleEventEnum");cc.systemEvent.once(t.OPEN_VIDEO,this.hideFloat.bind(this))},start:function(){},showTip:function(e){cc.log("FloatOrder===",window.facade.FloatOrder),null==this.floatNode?cc.loader.loadRes("pfb/FloatTip",function(t,n){this.floatNode=cc.instantiate(n),this.floatNode.getChildByName("Label").getComponent(cc.Label).string=e,cc.director.getScene().getChildByName("Canvas").addChild(this.floatNode,window.facade.FloatOrder),this.runFloat()}.bind(this)):(this.floatNode.getChildByName("Label").getComponent(cc.Label).string=e,this.floatNode.stopAllActions(),this.floatNode.opacity=255,this.floatNode.setPosition(0,50),this.runFloat())},runFloat:function(){this.floatNode.opacity=255,this.floatNode.runAction(cc.sequence(cc.delayTime(1),cc.spawn(cc.moveBy(1,cc.v2(0,50)),cc.fadeOut(1)),cc.callFunc(this.hideFloat,this)))},hideFloat:function(){this.floatNode&&(this.floatNode.removeFromParent(),this.floatNode=null)}}),cc._RF.pop()},{ModuleEventEnum:"ModuleEventEnum"}],GameConfig:[function(e,t,n){"use strict";cc._RF.push(t,"4686fnufLFIOrxJ7brIUYSD","GameConfig");var i=t.exports={},o=t;Object.defineProperty(i,"__esModule",{value:!0}),window.gameVersion="201901010000";var a=i.GameConfig={gameVersion:window.gameVersion,isOpen:1,adId:1111,PLATFORM:"",SHARE_IMAGE_URL:"",SHARE_STR:"\uff01",clientSecret:"",videoID:"",bannerID:"",gameId:61,userId:0,channelId:0,channelSub:0,boxId:0,boxGid:0,boxUid:0,stDifference:null,GAME_DATA:400,serverTimeStamp:function(){var e=Date.parse(new Date).toString().substr(0,10);return parseInt(e)+parseInt(this.stDifference)},clientTimeStamp:function(){return Date.parse(new Date).toString().substr(0,10)}};"undefined"!=typeof gmbox?a.PLATFORM="viso":cc.sys.platform===cc.sys.WECHAT_GAME?a.PLATFORM="wx":a.PLATFORM="",o.exports=a,cc._RF.pop()},{}],GameEntry:[function(e,t,n){"use strict";cc._RF.push(t,"c70e5ATaVpHbYV6+ew9gJH2","GameEntry");var i=e("ModuleEventEnum"),o=e("AnalyticsUtilities").AnalyticsUtilities;cc.Class({extends:cc.Component,properties:{star:cc.Label,locked:cc.Node,unlockNeed:cc.Label,starItemIcon:cc.Node},onLoad:function(){},start:function(){this.isLocked=!0,this.type=this.node.name.split("_")[1],"classic"==this.type&&(this.isLocked=!1)},onClick:function(){if(o.logEvent("\u70b9\u51fb\u5f00\u59cb\u6e38\u620f"),this.isLocked){var e=facade.getComponent("LevelModel")[this.type+"StarNeed"];return e?"injury"==this.type&&facade.getComponent("GameModel").gotNextReward<=0?void window.popUp.getComponent("Pop").addPopByName("NextLoginView",null,!0,!0):void popUp.getComponent("FloatTip").showTip("\u6536\u96c6\u6ee1"+e+"\u9897\u661f\u661f\u518d\u6765\u5427\uff01"):void popUp.getComponent("FloatTip").showTip("\u65b0\u7684\u73a9\u6cd5\uff0c\u656c\u8bf7\u671f\u5f85\uff01")}facade.selectedLevelType=this.type,facade.getComponent("LevelModel").setLevelTypeStr(this.type),cc.systemEvent.emit(i.LEVEL_SELECT,this.type)},update:function(e){if("classic"==this.type);else{var t=facade.getComponent("LevelModel")[this.type+"StarNeed"],n=facade.getComponent("LevelModel").getTotalStar();t?n>=t?(this.isLocked=!1,this.unlockNeed.node.active=!1,this.starItemIcon.active=!0,this.star.node.active=!0):"injury"==this.type&&facade.getComponent("GameModel").gotNextReward>=1?(this.isLocked=!1,this.unlockNeed.node.active=!1,this.starItemIcon.active=!0,this.star.node.active=!0):"vip"==this.type&&facade.getComponent("GameModel").gotAdvanceReward>=1?(this.isLocked=!1,this.unlockNeed.node.active=!1,this.starItemIcon.active=!0,this.star.node.active=!0):(this.isLocked=!0,this.unlockNeed.node.active=!0,this.unlockNeed.string="\u5dee"+(t-n)+"\u661f\u89e3\u9501",this.starItemIcon.active=!1,this.star.node.active=!1):(this.isLocked=!0,this.unlockNeed.node.active=!1),this.locked.active=this.isLocked}this.star.string=facade.getComponent("LevelModel").getStarByLevelType(this.type)}}),cc._RF.pop()},{AnalyticsUtilities:"AnalyticsUtilities",ModuleEventEnum:"ModuleEventEnum"}],GameLogic:[function(e,t,n){"use strict";cc._RF.push(t,"33e21/rOHRPZY12lgYJigKO","GameLogic");var i=e("ModuleEventEnum");cc.Class({extends:cc.Component,properties:{},onLoad:function(){cc.systemEvent.on(i.LEVEL_ADDED,this.onLevelAdded,this),cc.systemEvent.on(i.LEVEL_ONE_SHOT_ADD,this.onLevelAdded,this),cc.systemEvent.on(i.KILLED,this.onKilled,this),cc.systemEvent.on(i.SKIP,this.onSkip,this),cc.systemEvent.on(i.FAILURE,this.onFailure,this)},start:function(){},rich1111:function(){window.facade.getComponent("GameModel").gainEnergy11111()},onLevelAdded:function(e){this.failure=!1,this.hasPassed=!1,this.levelData=e,this.level=e.node,this.killed=[],this.suffers={},this.vips={};for(var t=this.level.getChildren(),n=0;n<t.length;n++)t[n].name.match("suffer")?this.suffers[t[n].name]=!1:t[n].name.match("vip")?this.vips[t[n].name]=!1:t[n].name.match("role")&&"injury"==e.levelType&&(this.vips[t[n].name]=!1)},onKilled:function(e){if(!(this.failure||window.facade.getComponent("LevelModel").lastBullets<0||1==this.suffers[e]||1==this.vips[e])){if(window.audio.getComponent("SoundManager").playEffect("kill"),null!=this.vips[e])return this.vips[e]=!0,cc.systemEvent.emit(i.FAILURE_BUY_KILL),void(this.levelData.isDebug&&window.popUp.getComponent("FloatTip").showTip("\u6d4b\u8bd5\u4fe1\u606f\uff1a\u5931\u8d25\u4e86"));for(var t in null!=this.suffers[e]&&(this.suffers[e]=!0),this.suffers)if(0==this.suffers[t])return;this.passed()}},onSkip:function(){window.facade.getComponent("LevelModel").shotedBullets=99999,this.passed(!0)},passed:function(e){if(!e){if(this.failure)return;if(this.waitingForPass)return;if("vip"==this.levelData.levelType||"injury"==this.levelData.levelType)for(var t=this.level.getChildren(),n=0;n<t.length;n++)if(t[n].name.match("bullet"))return void(this.waitingForPass=!0)}this.hasPassed||(this.hasPassed=!0,window.facade.getComponent("LevelModel").oneShotLevel?cc.systemEvent.emit(i.LEVEL_SHOT_PASSED,e):cc.systemEvent.emit(i.LEVEL_PASSED,e),this.levelData.isDebug&&window.popUp.getComponent("FloatTip").showTip("\u6d4b\u8bd5\u4fe1\u606f\uff1a\u8fc7\u5173\u4e86"),this.node.runAction(cc.sequence(cc.delayTime(1),cc.callFunc(function(){window.audio.getComponent("SoundManager").playEffect("whisper")}))))},onFailure:function(){this.failure=!0},update:function(e){if(this.waitingForPass){for(var t=this.level.getChildren(),n=0;n<t.length;n++)if(t[n].name.match("bullet"))return;this.waitingForPass=!1,this.passed()}}}),cc._RF.pop()},{ModuleEventEnum:"ModuleEventEnum"}],GameModel:[function(e,t,n){"use strict";cc._RF.push(t,"ce652vjwuZGupCvFa4Eea6O","GameModel");var i=e("ModuleEventEnum");e("MathUtils");var o=e("HttpUtil");cc.Class({extends:cc.Component,properties:{},initConfig:function(){cc.loader.loadRes("config/SignConfig",this.setConfig.bind(this)),cc.loader.loadRes("config/CharacterConfig",cc.JsonAsset,this.characterLoaded.bind(this)),cc.systemEvent.on(i.WX_SHOW,this.onWxShow.bind(this)),cc.systemEvent.on(i.WX_HIDE,this.onWxHide.bind(this))},dealLoadData:function(e){var t=JSON.parse(e);this.gotGameRecord=!0,this.localCash=t||{},console.log("GameModel data:",e),facade.getComponent("LevelModel").httpResDeal(this.localCash),this.formDatas()},httpResDeal:function(e){},getLocalTime:function(){var e=new Date;return e.getTime()-6e4*e.getTimezoneOffset()},getLocalTimeHour:function(){return(new Date).getHours()},formDatas:function(e){this.firstLoginTime1=this.localCash.firstLoginTime1,this.cash=Number(this.localCash.cash),this.energy=Number(this.localCash.energy),this.energyLostTime=Number(this.localCash.energyLostTime),this.characterId=Number(this.localCash.characterId),this.unlockCharacters=this.localCash.unlockCharacters,this.characterVideoCounts=this.localCash.characterVideoCounts,this.lastRewardEnergyTime=Number(this.localCash.lastRewardEnergyTime),this.rewardEnergyCount=Number(this.localCash.rewardEnergyCount),this.lastFetchColectTime=Number(this.localCash.lastFetchColectTime),this.lastFetchSignInTime=Number(this.localCash.lastFetchSignInTime),this.fetchDays=Number(this.localCash.fetchDays),this.aliveFetchList=this.localCash.aliveFetchList,this.newbieFetchList=this.localCash.newbieFetchList,this.lastFetchFloatReward=this.localCash.lastFetchFloatReward,this.lastFetchClientTime=this.localCash.lastFetchClientTime,this.gotNextReward=Number(this.localCash.gotNextReward),this.gotNewerReward=Number(this.localCash.gotNewerReward),this.gotAdvanceReward=Number(this.localCash.gotAdvanceReward),this.oneShotLevelList=this.localCash.oneShotLevelList,this.oneShotLevel=Number(this.localCash.oneShotLevel),this.oneShotLevelCupNum=Number(this.localCash.oneShotLevelCupNum),this.levelShotUpdate=Number(this.localCash.levelShotUpdate),this.chanllenTimes=Number(this.localCash.chanllenTimes),this.cupNumData=Number(this.localCash.cupNumData),this.levelFreeRetry=Number(this.localCash.levelFreeRetry),this.today=this.localCash.today,e||(this.localCash.today?this.today!=(new Date).getMonth()+"_"+(new Date).getDate()&&(this.today=(new Date).getMonth()+"_"+(new Date).getDate(),this.aliveFetchList=[],this.newbieFetchList=[],this.saveData()):(this.today=(new Date).getMonth()+"_"+(new Date).getDate(),this.saveData())),this.levelFreeRetry||(this.levelFreeRetry=0),this.oneShotLevelCupNum||(this.oneShotLevelCupNum=0),this.chanllenTimes||(this.chanllenTimes=0),this.oneShotLevel||(this.oneShotLevel=0),this.cupNumData||(this.cupNumData=0),this.oneShotLevelList||(this.oneShotLevelList=[]),this.levelShotUpdate||(this.levelShotUpdate=0),this.cash||(this.cash=0),this.gotNextReward||(this.gotNextReward=0),this.gotNewerReward||(this.gotNewerReward=0),this.gotAdvanceReward||(this.gotAdvanceReward=0),this.characterId||(this.characterId=1,this.unlockCharacters=[1]),this.characterVideoCounts||(this.characterVideoCounts={}),this.energyLostTime||(this.energyLostTime=0,(!this.energy||this.energy<15)&&(this.energy=this.maxEnergy));var t=Math.floor(this.getLocalTime()/86400/1e3);if(this.lastRewardEnergyTime){var n=Math.floor(this.lastRewardEnergyTime/86400/1e3);new Date(86400*n*1e3),new Date(86400*t*1e3);n<t&&(this.rewardEnergyCount=0,this.lastRewardEnergyTime=this.getLocalTime(),this.levelShotUpdate=0,this.chanllenTimes=0,this.freeLuckyVideoTimes=0,this.cupNumData=0,this.oneShotLevelCupNum=0,this.oneShotLevel=0,this.levelFreeRetry=0)}else this.lastRewardEnergyTime=0;this.getLocalTimeHour()>=21&&0==this.levelShotUpdate&&(this.levelShotUpdate=1),this.levelRetryTouch=!1;var o=new Date;if(this.energy<this.maxEnergy&&this.energyLostTime){var a=o.getTime()-this.energyLostTime,s=Math.floor(a/(2*this.energyCD));s+this.energy>15&&(s=15-this.energy),this.energy+=s,this.energyLostTime+=s*this.energyCD*2,this.energy>=this.maxEnergy&&(this.energyLostTime=0),this.offlineEnergy(s)}this.lastFetchColectTime||(this.lastFetchColectTime=0),this.lastFetchSignInTime||(this.lastFetchSignInTime=0),this.fetchDays||(this.fetchDays=0),this.aliveFetchList||(this.aliveFetchList=[]),this.newbieFetchList||(this.newbieFetchList=[]),this.lastFetchFloatReward||(this.lastFetchFloatReward=0),this.lastFetchClientTime||(this.lastFetchClientTime=0),e||("Game"!=facade.CurrentScene?facade.needShowSign=!0:(facade.needShowSign=!1,this.saveData(),cc.systemEvent.emit(i.INIT_ROLEINFO_COMPLETED)))},setShotUpdateData:function(e){this.levelShotUpdate=e,this.saveData()},setAddChanllenNum:function(){this.chanllenTimes++,this.saveData()},setOneShotLeves:function(){if(facade.getComponent("LevelModel").oneShotConfigList){this.oneShotLevelList=[],this.oneShotLevel=1,this.oneShotLevelCupNum=0;for(var e=facade.getComponent("LevelModel").oneShotConfigList.length;this.oneShotLevelList.length<20;){for(var t=Math.floor(Math.random()*e+1),n=!1,i=0;i<this.oneShotLevelList.length;i++)if(this.oneShotLevelList[i]==t){n=!0;break}n||this.oneShotLevelList.push(t)}this.saveData()}},onLevelShotPassed:function(){this.showLevelOver=!1,this.oneShotLevel<20?this.oneShotLevel++:20==this.oneShotLevel&&(this.showLevelOver=!0);var e=facade.getComponent("LevelModel").nowLevelConfig.LuckyPoint;this.cupNumData+=e,this.oneShotLevelCupNum+=e;var t={game_id:window.facade.GameId,token:window.facade.getComponent("PlayerModel").token,score_type:2,score:this.cupNumData};window.net.getComponent("Net").httpRequest(window.net.SaveScore,t),this.node.runAction(cc.sequence(cc.delayTime(3),cc.callFunc(this.goToShotNextLevel,this))),this.saveData()},goToShotNextLevel:function(){this.showLevelOver?cc.systemEvent.emit(i.SHOT_NOW_OVER_SHOW):cc.systemEvent.emit(i.GO_SHOT_NEXT)},onLevelShotNext:function(){this.oneShotLevel<20?this.oneShotLevel++:20==this.oneShotLevel&&this.setOneShotLeves(),cc.systemEvent.emit(i.GO_SHOT_NEXT),this.saveData()},setOpenRankfFlag:function(e){this.openRankFlag=e},getFreeRetry:function(){var e=facade.getComponent("ShareADModel").GameConfig.Free_Rematch_Cnt.Value;return!!e&&this.levelFreeRetry<=e},setAddFreeRetryNum:function(){this.levelFreeRetry++,this.saveData()},offlineEnergy:function(e){console.log("offlineEnergy:",e),this._offLineEnergy=e,this.saveData()},characterLoaded:function(e,t){console.log("asset:",t),this.charaterConfig=t.json,cc.systemEvent.emit(i.CHARACTER_INFO)},setConfig:function(e,t){if(e)console.error(e);else{var n=t.json;for(var i in n)1==n[i].Type?this.newcomerConfig.push(n[i]):2==n[i].Type&&this.oldConfig.push(n[i])}},isCharacterLocked:function(e){for(var t=0;t<this.unlockCharacters.length;t++)if(this.unlockCharacters[t]==e)return!1;return!0},onLoad:function(){this.newcomerConfig=[],this.oldConfig=[],this.initConfig(),this.cash=0,this.energy=15,this.gotNextReward=0,this.gotNewerReward=0,this.gotAdvanceReward=0,this.energyLostTime=0,this.lastRewardEnergyTime=0,this.rewardEnergyCount=0,this.characterId=1,this.unlockCharacters=[1],this.maxEnergy=15,this.energyCD=6e5,this.newerRewardCancelCount=0,this.passLevelCount=0,this.characterVideoCounts={},this.localCash={},this.formDatas(!0),this.oneShotLevelList=[],this.oneShotLevel=1,this.oneShotLevelCupNum=0,this.levelShotUpdate=0,this.chanllenTimes=0,this.cupNumData=0,this.levelFreeRetry=0,cc.systemEvent.on(i.GOT_HTTP_RES,this.httpResDeal.bind(this)),cc.systemEvent.on(i.ROLE_SELECTED,this.onRoleSelected.bind(this)),cc.systemEvent.on(i.ROLE_SELECTED,this.onRoleSelected.bind(this)),cc.systemEvent.on(i.LEVEL_SHOT_PASSED,this.onLevelShotPassed,this),facade.isMiniGame?cc.systemEvent.on(i.WX_REGISTERED,this.onGotToken.bind(this)):this.readDataFromLocal(),this.updateCosh()},updateCosh:function(){var e=this.getuserinfo();this.cash=e.gold,this.saveData()},checkNewerShowCondtition:function(){return this.passLevelCount++,this.newerRewardCancelCount>=2&&this.passLevelCount<3?0:this.gotNewerReward?this.gotAdvanceReward?0:"Advance":"Newer"},onGotToken:function(){var e=this;if(facade.isMiniGame){var t={channel:"wx",gameId:"wxf88c93d96e079e42",accountId:window.facade.getComponent("PlayerModel").userId};this.postRequest("https://games.qdos.com/game/load","p="+JSON.stringify(t),{success:function(t){console.error(t),e.dealLoadData(t)}})}},delayInitData:function(){this.gotGameRecord||this.formDatas()},readDataFromLocal:function(){var e=cc.sys.localStorage.getItem("Shooter_GameData");e?(this.localCash=JSON.parse(e),this.formDatas()):(this.cash=0,this.energy=15,this.energyLostTime=0,this.characterId=1,this.unlockCharacters=[1],this.characterVideoCounts={})},clearData:function(){var e={};if(facade.isMiniGame){var t={channel:"wx",gameId:"wxf88c93d96e079e42",accountId:window.facade.getComponent("PlayerModel").userId,data:JSON.stringify(e)};this.postRequest("https://games.qdos.com/game/upload","p="+JSON.stringify(t))}else cc.sys.localStorage.setItem("Shooter_GameData",JSON.stringify(e))},onWxShow:function(){},onWxHide:function(){facade.FOR_DEVELOP||this.saveData(!0)},saveData:function(e){if("SkipPage"!=facade.CurrentScene){var t={};if(t.firstLoginTime1||(t.firstLoginTime1=(new Date).getTime()),t.cash=this.cash,t.energy=this.energy,t.energyLostTime=this.energyLostTime,t.characterId=this.characterId,t.unlockCharacters=this.unlockCharacters,t.lastRewardEnergyTime=this.lastRewardEnergyTime,t.rewardEnergyCount=this.rewardEnergyCount,t.characterVideoCounts=this.characterVideoCounts,t.lastFetchColectTime=this.lastFetchColectTime,t.lastFetchSignInTime=this.lastFetchSignInTime,t.fetchDays=this.fetchDays,t.aliveFetchList=this.aliveFetchList,t.newbieFetchList=this.newbieFetchList,t.lastFetchFloatReward=this.lastFetchFloatReward,t.lastFetchClientTime=this.lastFetchClientTime,t.gotNextReward=this.gotNextReward,t.gotAdvanceReward=this.gotAdvanceReward,t.gotNewerReward=this.gotNewerReward,t.oneShotLevelList=this.oneShotLevelList,t.oneShotLevel=this.oneShotLevel,t.levelShotUpdate=this.levelShotUpdate,t.chanllenTimes=this.chanllenTimes,t.cupNumData=this.cupNumData,t.oneShotLevelCupNum=this.oneShotLevelCupNum,t.levelFreeRetry=this.levelFreeRetry,t.today=this.today,facade.isMiniGame){var n=this;if(!window.facade.getComponent("LevelModel"))return void setTimeout(function(){n.saveData()},100);t.score=window.facade.getComponent("LevelModel").getTotalStar();var i=window.facade.getComponent("LevelModel").localCaCheOnlyThis;for(var o in i)if(i.hasOwnProperty(o)){var a=i[o];t[o]=a}}if(facade.isMiniGame&&(e||facade.FOR_DEVELOP)){var s={channel:"wx",gameId:"wxf88c93d96e079e42",accountId:window.facade.getComponent("PlayerModel").userId,data:JSON.stringify(t)};this.postRequest("https://games.qdos.com/game/upload","p="+JSON.stringify(s))}else cc.sys.localStorage.setItem("Shooter_GameData",JSON.stringify(t))}},isEnergyFull:function(){return this.energy>=this.maxEnergy},getNextEnergyTime:function(){return this.energyLostTime+this.energyCD},getFullTime:function(){var e=this.getNextEnergyTime(),t=this.energy+1;return e+(this.maxEnergy-t)*this.energyCD},loseEnergy:function(){var e,t=facade.getComponent("LevelModel").getLevelConfig(window.facade.getComponent("LevelModel").playingLevel);if(facade.getComponent("LevelModel").costEnergy=1,e=1==t.BonusType?0:1,this.energy-=e,this.energy<0&&(this.energy=0),this.energy<this.maxEnergy&&0==this.energyLostTime){var n=new Date;this.energyLostTime=n.getTime()}this.saveData()},gainEnergy:function(){var e=new Date;this.energy++,this.energyLostTime=e.getTime(),this.energy>=this.maxEnergy&&(this.energy=this.maxEnergy,this.energyLostTime=0),this.saveData()},gainEnergy11111:function(){this.energy+=5,this.saveData()},isRewardEnergyLimited:function(){return this.rewardEnergyCount>=6},rewardEnergy:function(e){new Date,this.lastRewardEnergyTime=this.getLocalTime(),this.rewardEnergyCount++,this.energy+=e,this.energy>=this.maxEnergy&&(this.energyLostTime=0),this.saveData()},addCash:function(e){this.cash+=e,this.saveData()},onRoleSelected:function(e){this.characterId=e,this.saveData()},getuserinfo:function(){return JSON.parse(cc.sys.localStorage.getItem("userInfo"))},buyACharacter:function(e){var t=this.charaterConfig[String(e)];Number(t.Cost)>this.cash?popUp.getComponent("FloatTip").showTip("\u94b1\u94b1\u597d\u50cf\u4e0d\u591f\u54e6\uff01"):(cc.systemEvent.emit(i.CHARACTER_GOT,e),this.cash-=Number(t.Cost),this.unlockCharacters.push(e),this.characterId=e,this.saveData(),this.userCosh("user/cost",Number(t.Cost)))},watchACharacter:function(e){this._watchingId=e;window.facade.getComponent("ShareADModel").showShareAD({inviteId:0,videoId:21106,assistId:0,interstitalId:31106},{succ:function(e){console.log("\u76ae\u80a4\u89c2\u770b\u6210\u529f:",e),this.addAWatchCount()}.bind(this),fail:function(e,t){popUp.getComponent("FloatTip").showTip(e)}.bind(this)})},addAWatchCount:function(){this.characterVideoCounts[this._watchingId+""]?this.characterVideoCounts[this._watchingId+""]++:this.characterVideoCounts[this._watchingId+""]=1;var e=this.charaterConfig[String(this._watchingId)];this.characterVideoCounts[this._watchingId+""]>=e.Cost&&this.unlockCharacters.push(this._watchingId),cc.systemEvent.emit(i.SKIN_WATCHED),this._watchingId=null,this.saveData()},getWatchCount:function(e){return this.characterVideoCounts[e+""]?this.characterVideoCounts[e+""]:0},getCollectReward:function(){var e=facade.getComponent("ShareADModel").GameConfig.CollectValue,t=this.getLocalTime();this.lastFetchColectTime=t,this.addCash(parseInt(e.Value));var n="\u6210\u529f\u9886\u53d6\u5956\u52b1: \u949e\u7968 x "+e.Value;popUp.getComponent("FloatTip").showTip(n),cc.systemEvent.emit(i.UPDATE_COLLECT_SHOW)},gainSkin:function(e){this.unlockCharacters.push(parseInt(e)),this.saveData()},getRewardConfig:function(){var e=this.fetchDays;return null==e&&(e=0),e<=7?this.newcomerConfig:this.oldConfig},applySignReward:function(e,t){console.log("SignIn reward: ",t);var n=this.getLocalTime();this.lastFetchSignInTime=n,this.fetchDays++;var i=e?2*t.AwardNum:t.AwardNum;switch(t.AwardType){case 1:this.addCash(i),popUp.getComponent("FloatTip").showTip("\u949e\u7968 +"+i);break;case 2:this.rewardEnergy(i),popUp.getComponent("FloatTip").showTip("\u4f53\u529b +"+i);break;case 3:break;case 4:this.gainSkin(t.AwardNum);var o=this.charaterConfig[""+t.AwardNum].langName;popUp.getComponent("FloatTip").showTip("\u83b7\u5f97\u76ae\u80a4 "+o)}popUp.getComponent("Pop").removeTop()},applyInviteNewbieReward:function(e,t){var n=facade.getComponent("ShareADModel").GameConfig.InviteB;this.newbieFetchList.length>=4||(this.newbieFetchList.push({id:e,user_id:t}),this.addCash(Number(n.Value)),this.saveData(),cc.systemEvent.emit(i.INVITE_UPDATE_DAILY,e))},applyInviteAliveReward:function(e,t){var n=facade.getComponent("ShareADModel").GameConfig.InviteT;this.aliveFetchList.length>=4||(this.aliveFetchList.push(t),this.rewardEnergy(parseInt(n.Value)),this.saveData(),cc.systemEvent.emit(i.INVITE_UPDATE_DAILY,e))},applyHoverWinReward:function(){var e=facade.getComponent("ShareADModel").GameConfig.Float_Reward.Value;this.lastFetchFloatReward=this.getLocalTime(),this.rewardEnergy(parseInt(e)),popUp.getComponent("FloatTip").showTip("\u606d\u559c\u83b7\u5f97\u4f53\u529b x"+e),cc.systemEvent.emit(i.UPDATE_HOVER_SHOW)},takeNextReward:function(){this.gotNextReward>0?popUp.getComponent("FloatTip").showTip("\u5df2\u7ecf\u9886\u53d6\u8fc7\u8be5\u5956\u52b1~"):(this.rewardEnergy(5),this.unlockCharacters.includes(4)||this.unlockCharacters.push(4),this.gotNextReward=1,this.saveData(),popUp.getComponent("FloatTip").showTip("\u606d\u559c\u83b7\u5f97\u6b21\u65e5\u5927\u793c\u5305\uff01"))},takeAdvanceReward:function(){this.gotAdvanceReward>0?popUp.getComponent("FloatTip").showTip("\u5df2\u7ecf\u9886\u53d6\u8fc7\u8be5\u5956\u52b1~"):(this.rewardEnergy(5),this.addCash(300),this.gotAdvanceReward=1,this.saveData(),this.userCosh("user/deposit",300),popUp.getComponent("FloatTip").showTip("\u606d\u559c\u83b7\u5f97\u8fdb\u9636\u5927\u793c\u5305\uff01"))},takeNewerReward:function(){this.gotNewerReward>0?popUp.getComponent("FloatTip").showTip("\u5df2\u7ecf\u9886\u53d6\u8fc7\u8be5\u5956\u52b1~"):(this.addCash(300),this.rewardEnergy(5),this.unlockCharacters.includes(2)||this.unlockCharacters.push(2),this.gotNewerReward=1,this.saveData(),popUp.getComponent("FloatTip").showTip("\u606d\u559c\u83b7\u5f97\u65b0\u624b\u5927\u793c\u5305\uff01"))},checkClientRewardShow:function(){return console.log("lastFetchClientTime: ",this.lastFetchClientTime),!(Math.floor(this.getLocalTime()/86400/1e3)<=Math.floor(this.lastFetchClientTime/86400/1e3))},applyClientReward:function(){this.lastFetchClientTime=this.getLocalTime();var e=facade.getComponent("ShareADModel").GameConfig.Customer_service_reward.Value;this.rewardEnergy(parseInt(e)),popUp.getComponent("FloatTip").showTip("\u516c\u4f17\u53f7\u6bcf\u65e5\u5956\u52b1\uff1a\u4f53\u529b x"+e),cc.systemEvent.emit(i.UPDATE_HOVER_SHOW)},checkHoverWinRewardShow:function(){return 0==this.lastFetchFloatReward||!(Math.floor(this.getLocalTime()/86400/1e3)<=Math.floor(this.lastFetchFloatReward/86400/1e3))},waitingForBroadcastReward:function(){"Game"==cc.director.getScene().name&&facade.fromBroadcast&&(this.checkClientRewardShow()?(facade.fromBroadcast=!1,this.applyClientReward()):facade.fromBroadcast=!1)},update:function(){this.energy<this.maxEnergy&&(new Date).getTime()>=this.energyLostTime+this.energyCD&&this.gainEnergy(),this.waitingForBroadcastReward()},postRequest:function(e,t,n){var i=new XMLHttpRequest;i.onreadystatechange=function(e){if(4==i.readyState&&i.status>=200&&i.status<300){var t=JSON.parse(i.responseText);0!=t.code?n&&n.failure&&n.failure(t.code):n&&n.success&&n.success(t.data)}}.bind(this),i.onerror=function(e){n&&n.failure&&n.failure(e)},i.open("POST",e,!1),i.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),i.send(t)},userCosh:function(e,t){var n=this.getuserinfo().id;o.request(e,{user_id:n,amount:t},"POST",function(e,t){self.isCanGet=!0,e?popUp.getComponent("FloatTip").showTip(e):200==t.status?cc.log("cost==",t):popUp.getComponent("FloatTip").showTip(t.message)})}}),cc._RF.pop()},{HttpUtil:"HttpUtil",MathUtils:"MathUtils",ModuleEventEnum:"ModuleEventEnum"}],GameoverMoreGame:[function(e,t,n){"use strict";cc._RF.push(t,"005d06N/xhE4LEBjmGBLzHl","GameoverMoreGame");var i=e("MoreGameManager");cc.Class({extends:cc.Component,properties:{itemNodeArr:[cc.Node]},initData:function(){var e=this;i.requestMoreGameList(function(t){e.boxList=t,e.showMoreGameList()})},onLoad:function(){this.initData()},onEnable:function(){},showMoreGameList:function(){for(var e=0;e<this.itemNodeArr.length;e++)this.itemNodeArr[e].getComponent("MoreGameItemOne").setupItemData(this.boxList[e])}}),cc._RF.pop()},{MoreGameManager:"MoreGameManager"}],Game:[function(e,t,n){"use strict";cc._RF.push(t,"76ff8CGK6pFOatu91UBctpm","Game");t.exports={};var i=t,o=e("ModuleEventEnum"),a={init:function(){cc.systemEvent.on(o.GO_GAME,this.onGoGame.bind(this)),cc.systemEvent.on(o.ENERGY_NEEDED,this.onEnergyNeeded.bind(this))},onGoGame:function(e,t){window.facade.CurrentScene="Game",cc.director.preloadScene(window.facade.CurrentScene,function(){cc.director.loadScene(window.facade.CurrentScene,function(){cc.log("getScene-name===",window.facade.CurrentScene),cc.director.getScene().name=window.facade.CurrentScene,facade.runAction(cc.sequence(cc.delayTime(.1),cc.callFunc(function(){cc.systemEvent.emit(o.GAMESENE_ENTERED)})))})})},onEnergyNeeded:function(){facade.SAVE_MODE?popUp.getComponent("FloatTip").showTip("\u554a\u5076\uff0c\u5df2\u7ecf\u6ca1\u6709\u4f53\u529b\u5566\uff01"):facade.getComponent("GameModel").isRewardEnergyLimited()?popUp.getComponent("FloatTip").showTip("\u554a\u5076\uff0c\u5df2\u7ecf\u6ca1\u6709\u4f53\u529b\u5566\uff01"):popUp.getComponent("Pop").addPopByName("EnergyNeedView",null,!0,!0)},tag:"game..."};i.exports=a,cc._RF.pop()},{ModuleEventEnum:"ModuleEventEnum"}],GetTreeStarView:[function(e,t,n){"use strict";var i;function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}cc._RF.push(t,"4b2d6VJaBNOjpJIXPLwCVGP","GetTreeStarView");var a=e("ModuleEventEnum");e("CommonFunc"),cc.Class((o(i={extends:cc.Component,properties:{btn:cc.Sprite,shareSkin:cc.SpriteFrame,videoSkin:cc.SpriteFrame,aimLabel:cc.Sprite,threeStarLabel:cc.SpriteFrame,jumpLevelLabel:cc.SpriteFrame,titleLabel:cc.Sprite,threeStarTitle:cc.SpriteFrame,jumpLevelTitle:cc.SpriteFrame},onLoad:function(){this.frameCount=0},initData:function(e){this.titleLabelFlag=e,this.addValue=20},start:function(){this.rewardType=window.facade.getComponent("ShareADModel").getShareADType(),2!=this.rewardType?this.btn.spriteFrame=this.videoSkin:this.btn.spriteFrame=this.shareSkin,2!=this.titleLabelFlag?(this.titleLabel.spriteFrame=this.threeStarTitle,this.aimLabel.spriteFrame=this.threeStarLabel):(this.titleLabel.spriteFrame=this.jumpLevelTitle,this.aimLabel.spriteFrame=this.jumpLevelLabel)},onEnable:function(){cc.director.getScene().getChildByName("Canvas").getChildByName("recommendBar").zIndex=1e5},onDisable:function(){cc.director.getScene().getChildByName("Canvas").getChildByName("recommendBar").zIndex=1},close:function(){window.popUp.getComponent("Pop").removeTop()}},"onDisable",function(){cc.systemEvent.emit(a.BACK_ENERGY_CLOSED)}),o(i,"comfirm",function(){window.facade.getComponent("ShareADModel").showShareAD({inviteId:1529,videoId:21104,assistId:0,interstitalId:31103},{succ:function(e){cc.systemEvent.emit(a.STAR_JUMP_CHANGE,this.titleLabelFlag),window.popUp.getComponent("Pop").removeTop()}.bind(this),fail:function(e,t){popUp.getComponent("FloatTip").showTip(e)}.bind(this)})}),o(i,"update",function(e){this.frameCount++}),i)),cc._RF.pop()},{CommonFunc:"CommonFunc",ModuleEventEnum:"ModuleEventEnum"}],Grenade:[function(e,t,n){"use strict";cc._RF.push(t,"9ccbdRUQntBe7O3D0vFo6kP","Grenade");var i=e("ModuleEventEnum");cc.Class({extends:cc.Component,properties:{crateBoomPre:cc.Prefab},onLoad:function(){this._first=!0,this._kills={},this.frameCount=0,this.reflectCount=0},start:function(){},onBeginContact:function(e,t,n){},onPreSolve:function(e,t,n){},onPostSolve:function(e,t,n){},findSuffer:function(){for(var e=cc.director.getScene().getChildByName("Canvas").getChildByName("levelPlay").getChildren(),t=this.node.position,n=0;n<e.length;n++)if(e[n].name.match("suffer")||e[n].name.match("vip")){var i=e[n].getChildByName("body_1").convertToWorldSpaceAR(cc.v2());if(e[n].parent.convertToNodeSpaceAR(i).sub(t).mag()<200){var o=e[n];this.killSuffer(o)}}},killSuffer:function(e){for(var t=e.position.sub(this.node.position).normalizeSelf(),n=0;n<e.getChildren().length;n++){var o=e.getChildren()[n],a=o.getComponent(cc.RigidBody);if("body"==o.group&&a){var s=cc.director.getScene().getChildByName("Canvas").getChildByName("levelPlay").convertToNodeSpaceAR(o.convertToWorldSpaceAR(cc.v2()));a.applyLinearImpulse(t.mulSelf(1.8),s);var c=cc.instantiate(e.getChildByName("blood"));c.active=!0,c.getComponent(cc.ParticleSystem).resetSystem(),c.parent=o}}cc.systemEvent.emit(i.KILLED,e.name)},findProp:function(){for(var e=cc.director.getScene().getChildByName("Canvas").getChildByName("levelPlay").getChildren(),t=this.node.position,n=0;n<e.length;n++)if("prop"==e[n].group||"crossprop"==e[n].group){var i=e[n].convertToWorldSpaceAR(cc.v2());e[n].parent.convertToNodeSpaceAR(i).sub(t).mag()<200&&this.applyToProp(e[n])}else"box"==e[n].group?(i=e[n].convertToWorldSpaceAR(cc.v2()),e[n].parent.convertToNodeSpaceAR(i).sub(t).mag()<200&&this.applyToBox(e[n])):"boom"==e[n].group&&(i=e[n].convertToWorldSpaceAR(cc.v2()),e[n].parent.convertToNodeSpaceAR(i).sub(t).mag()<200&&this.applyToBoom(e[n]))},applyToProp:function(e){var t=e.position.sub(this.node.position).normalizeSelf();e.getComponent(cc.RigidBody).applyForceToCenter(t.mulSelf(1e4))},applyToBox:function(e){var t=cc.instantiate(this.crateBoomPre);t.position=cc.director.getScene().getChildByName("Canvas").getChildByName("levelPlay").convertToNodeSpaceAR(e.convertToWorldSpaceAR(cc.v2())),t.getComponent(cc.ParticleSystem).autoRemoveOnFinish=!0,t.getComponent(cc.ParticleSystem).resetSystem(),cc.director.getScene().getChildByName("Canvas").getChildByName("levelPlay").addChild(t),e.removeFromParent()},applyToBoom:function(e){e.getComponent("Boom").explosive()},explosive:function(){this.findSuffer(),this.findProp();var e=cc.instantiate(this.crateBoomPre);e.position=cc.director.getScene().getChildByName("Canvas").getChildByName("levelPlay").convertToNodeSpaceAR(this.node.convertToWorldSpaceAR(cc.v2())),e.getComponent(cc.ParticleSystem).autoRemoveOnFinish=!0,e.getComponent(cc.ParticleSystem).resetSystem(),cc.director.getScene().getChildByName("Canvas").getChildByName("levelPlay").addChild(e),window.audio.getComponent("SoundManager").playEffect("bomb"),this.node.removeFromParent()},update:function(e){this.frameCount++,180==this.frameCount&&(this.explosive(),window.facade.getComponent("LevelModel").useABullet())}}),cc._RF.pop()},{ModuleEventEnum:"ModuleEventEnum"}],Guideclassic:[function(e,t,n){"use strict";cc._RF.push(t,"69a9aMxCshKnIbCB3XtOFht","Guideclassic");var i=e("ModuleEventEnum");cc.Class({extends:cc.Component,properties:{},onLoad:function(){},start:function(){},doClose:function(){console.log("doClose...guide"),cc.systemEvent.emit(i.GUIDE_CLOSED)},update:function(e){}}),cc._RF.pop()},{ModuleEventEnum:"ModuleEventEnum"}],GunMasterRank:[function(e,t,n){"use strict";cc._RF.push(t,"acb984ROcdDg58lmGgnj/EW","GunMasterRank");var i=e("CommonFunc"),o=e("ModuleEventEnum");cc.Class({extends:cc.Component,properties:{scroll:cc.Node,content:cc.Node,recommendPre:cc.Prefab,changeNameBtn:cc.Sprite,selfRankData:cc.Node,chanllenLabel:cc.Label,getBounsBtn:cc.Node,chanllenBtn:cc.Node,timeNode:cc.Node,timeLabel:cc.Label},onLoad:function(){this.frameCount=0,cc.systemEvent.on(o.RANK_LIST,this.gotRank,this),cc.systemEvent.on(o.PLAYER_RANK_DATA,this.setPlayerSelfData,this),cc.systemEvent.on(o.PLAYER_NAME_CHANGE,this.changeNameBack,this)},onEnable:function(){cc.director.getScene().getChildByName("Canvas").getChildByName("recommendBar").zIndex=1e5},onDisable:function(){cc.director.getScene().getChildByName("Canvas").getChildByName("recommendBar").zIndex=1},initData:function(e){this.setChanllenLabel(),this.frameCount=0,this.lesstimes=0,this.timeNode.active=!1,window.facade.getComponent("GameModel").setOpenRankfFlag(1),0==window.facade.getComponent("GameModel").levelShotUpdate&&(window.facade.getComponent("GameModel").getLocalTimeHour()>=21?window.facade.getComponent("GameModel").setShotUpdateData(1):this.getTimeLess()),0!=window.facade.getComponent("GameModel").oneShotLevel&&1!=window.facade.getComponent("GameModel").oneShotLevel||window.facade.getComponent("GameModel").setOneShotLeves()},start:function(){cc.director.getScene().getChildByName("Canvas").getChildByName("recommendBar").zIndex=1,window.facade.getComponent("BannerModel").hideBanner(),window.facade.getComponent("RankModel").requestSelfRank(2),window.facade.getComponent("RankModel").requestRankList(2)},doClose:function(){cc.systemEvent.off(o.RANK_LIST,this.gotRank,this)},gotRank:function(e){for(var t=0;t<e.length;t++)e[t].rankNo=t+1;this.scroll.getComponent("ListViewCtrl").setList(e,!1,2)},getTimeLess:function(){var e=new Date,t=60*e.getHours()*60+60*e.getMinutes()+e.getSeconds();this.lesstimes=75600-t;var n=String(i.changeNumToTime(this.lesstimes));this.timeNode.active=!0,this.timeLabel.string=n},setPlayerSelfData:function(e){if(this.selfRankData.getComponent("RankItem").setSelfItem(e),0==window.facade.getComponent("GameModel").levelShotUpdate)window.facade.getComponent("GameModel").chanllenTimes>=facade.getComponent("ShareADModel").GameConfig.OneBulletCnt.Value?(this.chanllenBtn.active=!1,this.getBounsBtn.active=!0):(this.chanllenBtn.active=!0,this.getBounsBtn.active=!1);else if(1==window.facade.getComponent("GameModel").levelShotUpdate){this.chanllenBtn.active=!1,this.getBounsBtn.active=!0;var t=e.rank_order,n=facade.getComponent("ShareADModel").GameConfig.RankReward.Value.split(",");this.rankBouns=0;for(var i=0;i<n.length;i++)if(t<=n[i].split(":")[0]){this.rankBouns=n[i].split(":")[1];break}0==t&&(this.rankBouns=0)}else 2==window.facade.getComponent("GameModel").levelShotUpdate&&(this.chanllenBtn.active=!1,this.getBounsBtn.active=!0)},jumpWorldRank:function(){window.popUp.getComponent("Pop").removeTop(),window.popUp.getComponent("Pop").addPopByName("Rank",this,!0,!0,!1)},changeNameBack:function(e){window.facade.getComponent("RankModel").selfdata.nick_name=e,this.selfRankData.getComponent("RankItem").nameL.string=e},close:function(){facade.getComponent("BannerModel").showBanner(),window.popUp.getComponent("Pop").removeTop()},changeNameFuc:function(){window.popUp.getComponent("Pop").addPopByName("ChangeNameView",this,!0,!1,!1)},onGoShot:function(){var e=window.facade.getComponent("GameModel").chanllenTimes;e>=facade.getComponent("ShareADModel").GameConfig.OneBulletCnt.Value?popUp.getComponent("FloatTip").showTip("\u4eca\u65e5\u6311\u6218\u6b21\u6570\u5df2\u7528\u5b8c\uff0c\u8bf7\u660e\u65e5\u518d\u6765\uff01"):(0==e&&window.facade.getComponent("GameModel").setAddChanllenNum(),window.facade.getComponent("LevelModel").initShotData(),window.popUp.getComponent("Pop").removeTop())},setChanllenLabel:function(){var e=window.facade.getComponent("GameModel").chanllenTimes,t=facade.getComponent("ShareADModel").GameConfig.OneBulletCnt.Value;this.chanllenLabel.string=t-e+"/"+t},getBounsResult:function(){if(0==window.facade.getComponent("GameModel").levelShotUpdate){var e="\u6bcf\u65e521\u70b9\u7ed3\u7b97\uff0c\u53ef\u9886\u53d6\u5956\u52b1\uff01";popUp.getComponent("FloatTip").showTip(e)}else 1==window.facade.getComponent("GameModel").levelShotUpdate?(window.facade.getComponent("GameModel").addCash(Number(this.rankBouns)),window.facade.getComponent("GameModel").setShotUpdateData(2),e="\u6210\u529f\u9886\u53d6\u5956\u52b1: \u949e\u7968 x "+this.rankBouns,popUp.getComponent("FloatTip").showTip(e)):2==window.facade.getComponent("GameModel").levelShotUpdate&&(e="\u4eca\u65e5\u5df2\u9886\u53d6\u5956\u52b1\uff0c\u8bf7\u660e\u65e5\u518d\u6765\uff01",popUp.getComponent("FloatTip").showTip(e))},setupList:function(e){},update:function(e){if(this.lesstimes>0&&(this.frameCount+=e,this.frameCount>=1))if(this.frameCount=0,this.lesstimes--,this.lesstimes>0){var t=String(i.changeNumToTime(this.lesstimes));this.timeNode.active=!0,this.timeLabel.string=t}else window.facade.getComponent("GameModel").setShotUpdateData(1),window.popUp.getComponent("Pop").removeTop(),window.popUp.getComponent("Pop").addPopByName("GunMasterRank",this,!0,!1,!1)}}),cc._RF.pop()},{CommonFunc:"CommonFunc",ModuleEventEnum:"ModuleEventEnum"}],Gunner:[function(e,t,n){"use strict";cc._RF.push(t,"bdedemEGelFypnWu5ALUxqt","Gunner"),e("MathUtils"),cc.Class({extends:cc.Component,properties:{handGun:cc.Node,muzzel:cc.Node,line:cc.Node,bulletPre:cc.Prefab,smoke:cc.ParticleSystem,isInUI:!1,isSuffer:!1},onLoad:function(){this.isInUI||this.isSuffer||(this.aim=new cc.Node,this.aim.addComponent(cc.Sprite),this.aim.getComponent(cc.Sprite).spriteFrame=cc.loader.getRes("roles",cc.SpriteAtlas).getSpriteFrame("aim"),this.handGun.addChild(this.aim,999),this.aim.active=!1,this.aim.scale=.5,this.aim.y=10)},start:function(){this.node.parent.on(cc.Node.EventType.TOUCH_START,this.onTouchStart,this),this.node.parent.on(cc.Node.EventType.TOUCH_MOVE,this.onTouchMove,this),this.node.parent.on(cc.Node.EventType.TOUCH_END,this.onTouchEnd,this),this.node.parent.on(cc.Node.EventType.TOUCH_CANCEL,this.onTouchCancel,this)},onEnable:function(){this.node.parent.on(cc.Node.EventType.TOUCH_START,this.onTouchStart,this),this.node.parent.on(cc.Node.EventType.TOUCH_MOVE,this.onTouchMove,this),this.node.parent.on(cc.Node.EventType.TOUCH_END,this.onTouchEnd,this),this.node.parent.on(cc.Node.EventType.TOUCH_CANCEL,this.onTouchCancel,this)},onDisable:function(){this.node.parent.off(cc.Node.EventType.TOUCH_START,this.onTouchStart,this),this.node.parent.off(cc.Node.EventType.TOUCH_MOVE,this.onTouchMove,this),this.node.parent.off(cc.Node.EventType.TOUCH_END,this.onTouchEnd,this),this.node.parent.off(cc.Node.EventType.TOUCH_CANCEL,this.onTouchCancel,this)},onDestroy:function(){this.node.parent.off(cc.Node.EventType.TOUCH_START,this.onTouchStart,this),this.node.parent.off(cc.Node.EventType.TOUCH_MOVE,this.onTouchMove,this),this.node.parent.off(cc.Node.EventType.TOUCH_END,this.onTouchEnd,this),this.node.parent.off(cc.Node.EventType.TOUCH_CANCEL,this.onTouchCancel,this)},onTouchStart:function(e){var t=e.getLocation();this._inTouch=!0,this.isInUI||(this.line.active=!0,this.line.runAction(cc.repeatForever(cc.sequence(cc.fadeIn(.5),cc.fadeOut(.5))))),this.gunPos=this.handGun.convertToWorldSpaceAR(cc.v2()),this.gunDir=t.sub(this.gunPos);var n=this.gunDir.signAngle(cc.v2(1,0));this.handGun.angle=-n/Math.PI*180},onTouchMove:function(e){var t=e.getLocation();if(this._inTouch){this.gunPos=this.handGun.convertToWorldSpaceAR(cc.v2()),this.gunDir=t.sub(this.gunPos);var n=this.gunDir.signAngle(cc.v2(1,0));this.handGun.angle=-n/Math.PI*180,this.aim&&(this.aim.active=!0,this.aim.x=this.gunDir.mag())}},onTouchEnd:function(e){this.isInUI?this.createAbullet():(this.aim&&(this.aim.active=!1),window.facade.getComponent("Facade").levelPassed||(facade.getComponent("LevelModel").shotedBullets>=facade.getComponent("LevelModel").bulletFilled?window.audio.getComponent("SoundManager").playEffect("empty"):(this.createAbullet(),window.facade.getComponent("LevelModel").shotABullet())))},createAbullet:function(){var e=cc.instantiate(this.bulletPre);e.position=this.node.parent.convertToNodeSpaceAR(this.muzzel.convertToWorldSpaceAR(cc.v2()));var t=this.gunDir.normalizeSelf();e.getComponent(cc.RigidBody).linearVelocity=t.mulSelf(2e3),e.angle=this.handGun.angle,e.master=this.node.name,this.node.parent.addChild(e),window.audio.getComponent("SoundManager").playEffect("shoot"),this._inTouch=!1,this.smoke.resetSystem(),this.line.stopAllActions(),this.line.active=!1},onTouchCancel:function(e){e.getLocation(),this._inTouch=!1,this.line.stopAllActions(),this.line.active=!1,this.handGun.angle=-90},update:function(e){}}),cc._RF.pop()},{MathUtils:"MathUtils"}],HoverWinUI:[function(e,t,n){"use strict";cc._RF.push(t,"8c35f2pz3ZPULEUUGsAaf5y","HoverWinUI"),cc.Class({extends:cc.Component,properties:{backBtn:cc.Node,title:cc.Node,titleLine:cc.Node,showSp1:cc.Node,showSp2:cc.Node},onLoad:function(){this.closeActTime=.2},start:function(){if(window.wx){var t=e("ModuleEventEnum");cc.systemEvent.once(t.UPDATE_HOVER_SHOW,this.onClickBack,this),facade.getComponent("PlayerModel").wxAdaptor.reigsterWXFunc(function(){facade.getComponent("PlayerModel").wxAdaptor.checkHoverWinShow()&&(console.log("aaaaa   check  \u9886\u5956\u5566\u5566\u5566\u5566\u5566\u5566"),facade.getComponent("GameModel").applyHoverWinReward())},!0)}},viewDidAppear:function(){this.backBtn.active=!0,this.title.active=!0,this.titleLine.active=!0,this.showSp1.active=!0,this.showSp2.active=!0;var e=cc.moveBy(.3,cc.v2(0,-200)).easing(cc.easeBackOut());this.backBtn.runAction(e);var t=cc.moveBy(.3,cc.v2(-300,0)).easing(cc.easeBackOut());this.title.runAction(t);var n=cc.moveBy(.3,cc.v2(500,0)).easing(cc.easeBackOut());this.titleLine.runAction(n);var i=cc.scaleTo(.3,.9).easing(cc.easeBackOut());this.count=1,this.actId=setInterval(function(){3!=this.count?(this["showSp"+this.count].runAction(i.clone()),this.count++):clearInterval(this.actId)}.bind(this),300)},doClose:function(){var e=cc.scaleTo(.2,1.1);this.title.runAction(e.clone()),this.titleLine.runAction(e.clone()),this.backBtn.runAction(e.clone()),this.showSp1.runAction(e.clone()),this.showSp2.runAction(e.clone())},onClickBack:function(){popUp.getComponent("Pop").removeByName("HoverWinUI")}}),cc._RF.pop()},{ModuleEventEnum:"ModuleEventEnum"}],HttpConnector:[function(e,t,n){"use strict";cc._RF.push(t,"1acd1wFCKFJm77lXtWF8MQP","HttpConnector");var i=e("ModuleEventEnum");cc.Class({extends:cc.Component,properties:{},onLoad:function(){this.node.WxRegister=this.node.checkName+"/checkCode",this.node.WxServerDelivery="weixin/shopBuy",this.node.ServerInfo="gameServer/userData",this.node.ServerInfoTest="test/cargodServerInfo",this.node.BoardCastImage="test/ipartGameNotice",this.node.RefreshUserInfo="weixin/refreshUserInfo",this.node.CheckFuncOpen="game/funcList",this.node.GetRecord="saveRecord/getUserGameRecord",this.node.SaveRecord="saveRecord/saveRecord",this.node.Setting="game/getSettingInfo",this.node.AcceptInvite="game/inviteAccept",this.node.InviteeList="game/inviteeList",this.node.CollectorDa="log/collectorDa",this.node.SaveScore="rank/saveScore",this.node.RankList="rank/getRankList",this.node.SelfRankData="rank/getSelfRankOrder",this.node.QQLogin="qzone/login",this.node.QQBuy="qzone/shopBuy",this.node.QQUserInfo="/v3/user/get_info",this.node.QQGetUionid="/v3/user/get_unionid",this.node.QQGetFriends="/v3/relation/get_app_friends",this.node.QQGetMultiInfo="/v3/user/get_multi_info",this.node.QQGetUserInfo="/v3/user/get_playzone_userinfo",this.node.RecommendGame="game/recommendData",this.node.NavigateOut="game/navigateOut",this.node.MoreGame="game/boxData",this.node.CityList="game/funcList"},start:function(){},dealResponseAb:function(e){},dealResponseJson:function(e){console.log("dealResponseJson:",e),cc.systemEvent.emit(i.GOT_HTTP_RES,e)},refineReport:function(e){},appLinkReport:function(e){if(facade.isMiniGame){this.reqData=null,this.reqData=window.facade.getComponent("PlayerModel").wxAdaptor.getAppLinkParams(),this.reqData.objGmId=e;var t=Date.parse(new Date);this.reqData.timeStr=t/1e3,console.log("====behaveReport:",this.reqData);var n={gmId:this.reqData.gmId,objGmId:this.reqData.objGmId,openid:this.reqData.openid,chan:this.reqData.chan,subChan:this.reqData.subChan,timeStr:this.reqData.timeStr};this.reqData.sign=this.createSign(this.objKeySort(n));var i="",o=0;for(var a in this.reqData)o>0&&(i+="&"),o++,i+=a+"="+this.reqData[a];var s=window.facade.appLinkReportAdress;this.requestUrl(s,i,!0)}},behaveReport:function(e){},objKeySort:function(e){for(var t=Object.keys(e).sort().reverse(),n={},i=0;i<t.length;i++)n[t[i]]=e[t[i]];return n},createSign:function(e){for(var t=Object.keys(e),n="",i=0;i<t.length;i++)i&&(n+="_"),n+=e[t[i]];return cc.md5Encode(n).toLowerCase()},request:function(e,t){var n="",i=0;for(var o in t)i>0&&(n+="&"),i++,n+=o+"="+t[o];this.requestUrl(e,n,!0)},urlencode:function(e){var t=encodeURIComponent(e);return t.replace(/[^0-9a-zA-Z\-_\.%]/g,function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})},requestQQApi:function(e,t){var n=window.facade.openapiUrl+e,i=[];for(var o in t)i.push(o+"="+t[o]);i.sort(function(e,t){return e>t?1:e<t?-1:0});var a=i.join("&"),s=["GET",this.urlencode(e),this.urlencode(i.join("&"))].join("&"),c=CryptoJS.HmacSHA1(s,window.facade.qqAppKey+"&").toString(CryptoJS.enc.Base64);a+="&sig="+this.urlencode(c),this.requestUrl(n,a,!1)},requestUrl:function(e,t,n,i,o){if(null!=e&&""!=e){var a;a=t&&!n?e+"?"+t:e;var s=new XMLHttpRequest;console.log("requestUrl",e),n?(s.open("POST",e,!0),s.setRequestHeader("Content-Type","application/x-www-form-urlencoded")):s.open("GET",a,!0),s.onerror=function(){null!=i&&1==s.readyState&&s.status},s.onreadystatechange=function(){4==s.readyState&&(200==s.status?"arraybuffer"==o?(s.responseType=o,this.dealResponseAb(s.response)):this.dealResponseJson(JSON.parse(s.responseText)):i&&i(s.status))}.bind(this),facade.isMiniGame&&(s.timeout=5e3),null==t||""==t?s.send():s.send(t)}},getParamString:function(e){var t="";for(var n in e)t+="{0}={1}&".format(n,e[n]);return console.log("params---------\x3e",t),t.substr(0,t.length-1)}}),cc._RF.pop()},{ModuleEventEnum:"ModuleEventEnum"}],HttpUtil:[function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}cc._RF.push(t,"114f6ZAWoFJMqKvzx8uNc0p","HttpUtil");var o=e("CommonConfig"),a=function e(){i(this,e)};a.request=function(e,t,n,i,a){var s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,c=this;e="https://"+o.httpconfig.host+"/api/"+e;var r="",l=!0;for(var d in t){l||(r+="&"),l=!1,r+=d,r+="=",r+=t[d]}a||(a=3e4);try{var h=!1;setTimeout(function(){0==h&&i("\u8d85\u65f6\u4e86",null)},a),c.xhr=new XMLHttpRequest,c.xhr.onreadystatechange=function(){4==c.xhr.readyState&&(h=!0,i(null,JSON.parse(c.xhr.responseText)))};var u=""==r?e:e+"?"+r;u=encodeURI(u),c.xhr.open(n,u,!0);var p=cc.director.getScene().getChildByName("dataNode").getData();null!=p&&void 0!=p&&null!=p.result.token&&c.xhr.setRequestHeader("Authorization","Bearer "+p.result.token),c.xhr.setRequestHeader("accept","application/json"),c.xhr.setRequestHeader("Content-type","application/json");c.xhr.send(s)}catch(e){i(e,null)}},a.TimeOut=200,a.GET=function(e,t,n){var i="";Object.keys(t).forEach(function(e){i+=e+"="+encodeURIComponent(t[e])+"&"}),""!==i&&(e=e+"?"+(i=i.substr(0,i.lastIndexOf("&"))));var o=cc.loader.getXMLHttpRequest();o.open("GET",e,!0),o.setRequestHeader("Content-Type","text/plain;charset=UTF-8"),o.onreadystatechange=function(){if(4===o.readyState){var e=o.responseText;if(o.status>=200&&o.status<300){o.statusText;n(!0,e)}else n(!1,e)}},o.timeout=this.TimeOut,o.send()},a.POST=function(e,t,n){var i=cc.loader.getXMLHttpRequest(),o="";Object.keys(t).forEach(function(e){o+=e+"="+encodeURIComponent(t[e])+"&"}),""!==o&&(o=o.substr(0,o.lastIndexOf("&"))),i.open("POST",e,!0),i.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),i.onreadystatechange=function(){if(4===i.readyState){var e=i.responseText;if(i.status>=200&&i.status<300){i.statusText;n(!0,e)}else n(!1,e)}},i.send(o)},t.exports=a,cc._RF.pop()},{CommonConfig:"CommonConfig"}],InterstitialADModel:[function(e,t,n){"use strict";cc._RF.push(t,"b031dS5untDKKiBvcc5QhZG","InterstitialADModel");var i=e("ModuleEventEnum");cc.Class({extends:cc.Component,properties:{},onLoad:function(){this.isFake=!1,this.canShowInterstital=!0,this.canShow=!0,facade.isMiniGame&&(cc.systemEvent.on(i.WX_REGISTERED,this.onGotToken.bind(this)),cc.systemEvent.on(i.FUNCOPEN_UPDATE,this.onGotToken.bind(this)))},onGotToken:function(){var e=facade.getComponent("ShareADModel").GameConfig.Fake_Screen;this.showIdCyc=e.Value.split("|"),this.cycId=-1,this.initInterstitialAd()},initInterstitialAd:function(){this.canShow=facade.getComponent("PlayerModel").wxAdaptor.checkInterstitialAd(),this.canShow?facade.getComponent("PlayerModel").isIntersADOpen()?(this.interAd=facade.getComponent("PlayerModel").wxAdaptor.createInterstitialAd({adUnitId:"adunit-dda940b072af5cf3"}),this.interAd?(console.log("----- \u521b\u5efa\u63d2\u5c4f\u5e7f\u544a success---"),this.interAd.onLoad(function(e){console.log("\u63d2\u5c4f\u5e7f\u544a\u52a0\u8f7d\u4e2d...")}.bind(this)),this.interAd.onError(function(e){this.canShow=!1,console.log(" \u63d2\u5c4f\u5e7f\u544a\u51fa\u9519\uff1a ",e.errCode)}),this.interAd.onClose(this.callBack.bind(this))):(this.canShow=!1,console.log("\u521b\u5efa\u63d2\u5c4f\u5e7f\u544a\u5931\u8d25"))):this.canShow=!1:console.log("\u57fa\u7840\u5e93\u5c0f\u4e8e2.6.0\uff0c \u65e0\u6cd5\u521b\u5efa\u63d2\u5c4f\u5e7f\u544a...")},showInterstitialAd:function(e,t){this.cycId++,this.cycId>=this.showIdCyc.length&&(this.cycId=0);var n=this;if(this.type=e,!this.canShow)return this.canShowInterstital=!1,void(0==e.videoId&&0==e.inviteId?this.showFakeInterAD():facade.getComponent("ShareADModel").showShareAD(n.type,t));if(this.canShowInterstital=!0,this.showId=e.interstitalId,this.callFunc=t,"0"!=this.showIdCyc[this.cycId]){var i=this.interAd.show();i.then(function(e){console.log("report \u63d2\u5c4f\u57cb\u70b9\uff1a",n.showId),n.sendBehaveReport(1)}),i.catch(function(e){e.errCode&&(console.log("\u63d2\u5c4f\u5e7f\u544a \u663e\u793a\u5931\u8d25 ,errCode: ",e.errCode),n.canShowInterstital=!1,n.sendBehaveReport(2),0==n.type.videoId&&0==n.type.inviteId&&n.showFakeInterAD())})}else this.showFakeInterAD()},showADAfterShare:function(){this.canShow&&(this.interAd.show(),this.showId=facade.INTERSTIAL_AFTER_SHARE,this.sendBehaveReport(1))},sendBehaveReport:function(e){},callBack:function(){console.log("callback is : ",this.callFunc),this.callFunc&&this.callFunc.succ(),this.sendBehaveReport(3)},showAfterProp:function(){this.interAd.show(),this.showId=facade.INTERSTIAL_AFTER_PROP,this.sendBehaveReport(1)},showFakeInterAD:function(){facade.SAVE_MODE||popUp.getComponent("Pop").addPopByName("FakeInterUI",this.showIdCyc[this.cycId],!0)}}),cc._RF.pop()},{ModuleEventEnum:"ModuleEventEnum"}],InviteDailyItem1:[function(e,t,n){"use strict";cc._RF.push(t,"10e13rjhdZGzqwtUhH39QgD","InviteDailyItem1"),cc.Class({extends:cc.Component,properties:{title:cc.Label,now:cc.Node,isget:cc.Node,rewardCount:cc.Label,mask:cc.Node},onLoad:function(){var t=e("ModuleEventEnum");cc.systemEvent.on(t.INVITE_UPDATE_DAILY,this.updateShow,this)},updateShow:function(e){if(this.itemId==e)return this.mask.active=!1,this.showImg=this.node.getChildByName("cash"),this.showImg.active=!0,this.isget.active=!0,void(this.title.node.color=cc.Color.WHITE);facade.getComponent("GameModel").newbieFetchList.length==this.itemId&&(this.now.active=!0,this.title.color=cc.Color(254,203,24,255))},setItemData:function(e,t){this.itemData=t,this.itemId=e;var n=facade.getComponent("ShareADModel").GameConfig.InviteB;if(this.title.string="\u7b2c"+(e+1)+"\u4e2a\u597d\u53cb",this.rewardCount.string="x"+n.Value,this.showImg=this.node.getChildByName("cash"),this.showImg.active=!0,null==t)this.now.active=!1,this.mask.active=!0,this.isget.active=!1;else{var i=facade.getComponent("GameModel").newbieFetchList;for(var o in this.now.active=i.length==this.itemId,this.mask.active=!1,this.isget.active=!0,i)if(i[o]==this.itemData.user_id){this.isget.active=!0,this.isInList=!0;break}}},onClickRevice:function(){!this.isInList&&this.itemData&&facade.getComponent("GameModel").applyInviteNewbieReward(this.itemId,this.itemData.user_id)}}),cc._RF.pop()},{ModuleEventEnum:"ModuleEventEnum"}],InviteDailyItem:[function(e,t,n){"use strict";cc._RF.push(t,"9b817OFkFFMDpkvL3RheKns","InviteDailyItem"),cc.Class({extends:cc.Component,properties:{title:cc.Label,now:cc.Node,isget:cc.Node,rewardCount:cc.Label,mask:cc.Node},onLoad:function(){var t=e("ModuleEventEnum");cc.systemEvent.on(t.INVITE_UPDATE_DAILY,this.updateShow,this)},updateShow:function(e){if(this.itemId==e)return this.mask.active=!1,this.showImg=this.node.getChildByName("strength"),this.showImg.active=!0,this.isget.active=!0,void(this.title.node.color=cc.Color.WHITE);facade.getComponent("GameModel").aliveFetchList.length==this.itemId&&(this.now.active=!0,this.title.color=cc.Color(254,203,24,255))},setItemData:function(e,t){this.itemData=t,this.itemId=e;var n=facade.getComponent("ShareADModel").GameConfig.InviteT;if(this.title.string="\u7b2c"+(e+1)+"\u4e2a\u597d\u53cb",this.rewardCount.string="x"+n.Value,this.showImg=this.node.getChildByName("strength"),this.showImg.active=!0,null==t)this.now.active=!1,this.mask.active=!0,this.isget.active=!1;else{var i=facade.getComponent("GameModel").aliveFetchList;for(var o in this.now.active=i.length==this.itemId,this.mask.active=!1,this.isget.active=!0,i)if(i[o]==this.itemData.user_id){this.isget.active=!0,this.isInList=!0;break}}},onClickRevice:function(){!this.isInList&&this.itemData&&facade.getComponent("GameModel").applyInviteAliveReward(this.itemId,this.itemData.user_id)}}),cc._RF.pop()},{ModuleEventEnum:"ModuleEventEnum"}],InviteDailyUI:[function(e,t,n){"use strict";cc._RF.push(t,"5c0ealK3gtN4JzU2R7eiCeo","InviteDailyUI");var i=e("ModuleEventEnum");cc.Class({extends:cc.Component,properties:{item:cc.Prefab,content:cc.Node,recommendPre:cc.Prefab},onLoad:function(){this.initContent()},onEnable:function(){cc.director.getScene().getChildByName("Canvas").getChildByName("recommendBar").zIndex=1e4},onDisable:function(){cc.director.getScene().getChildByName("Canvas").getChildByName("recommendBar").zIndex=1},initRecommond:function(){},initContent:function(){for(var e=facade.getComponent("GameModel").aliveFetchList,t=0;t<4;t++){var n=cc.instantiate(this.item);null!=e[t]?n.getComponent("InviteDailyItem").setItemData(t,e[t]):n.getComponent("InviteDailyItem").setItemData(t,null),this.content.addChild(n)}},onClickInvite:function(){window.facade.getComponent("ShareADModel").showShareAD({inviteId:1533,videoId:0,assistId:0},{succ:function(e){console.log("\u62c9\u6d3b \u5206\u4eab/\u89c6\u9891:",e),popUp.getComponent("FloatTip").showTip("\u5206\u4eab\u6210\u529f");var t=facade.getComponent("GameModel").aliveFetchList;facade.getComponent("GameModel").applyInviteAliveReward(t.length,"123")}.bind(this),fail:function(e,t){popUp.getComponent("FloatTip").showTip(e)}.bind(this)})},onClickBack:function(){popUp.getComponent("Pop").removeTop()},doClose:function(){cc.systemEvent.off(i.GAME_OPEN_DAILY_INVITE,this.initContent,this)}}),cc._RF.pop()},{ModuleEventEnum:"ModuleEventEnum"}],InviteNewItem:[function(e,t,n){"use strict";cc._RF.push(t,"6cc61JBEQRKR5Hh2QcQoXvj","InviteNewItem"),cc.Class({extends:cc.Component,properties:{awardCount:cc.Label,addTip:cc.Node,notInvite:cc.Node,inviteLab:cc.Node,canGet:cc.Node,reveiceBtn:cc.Node},start:function(){this.addTip.active=!1,this.awardCount.string="x"+facade.getComponent("ShareADModel").GameConfig.InviteB.Value},setItemData:function(e,t,n){this.id=e,this.itemID=t,this.itemData=n,0==n.user_id?(this.notInvite.active=!0,this.addTip.active=!0,this.inviteLab.actiev=!0,this.canGet.active=!1,this.reveiceBtn.active=!1):(this.canGet.active=!0,this.reveiceBtn.active=!0,this.notInvite.active=!1,this.addTip.active=!1,this.inviteLab.actiev=!1)},onClickRevice:function(){facade.getComponent("GameModel").applyInviteNewbieReward(this.itemID,this.itemData.user_id),popUp.getComponent("Pop").removeTop()},onClickInvite:function(){window.facade.getComponent("ShareADModel").showShareAD({inviteId:1534,videoId:0,assistId:0},{succ:function(e){console.log("\u62c9\u65b0 \u5206\u4eab/\u89c6\u9891:",e),popUp.getComponent("FloatTip").showTip("\u5206\u4eab\u6210\u529f")}.bind(this),fail:function(e,t){popUp.getComponent("FloatTip").showTip(e)}.bind(this)})}}),cc._RF.pop()},{}],InviteNewUI:[function(e,t,n){"use strict";cc._RF.push(t,"21143532qxHr70CwCYP3ozg","InviteNewUI");var i=e("ModuleEventEnum");cc.Class({extends:cc.Component,properties:{item:cc.Prefab,content:cc.Node,recommendPre:cc.Prefab},onLoad:function(){this.initContent()},onEnable:function(){cc.director.getScene().getChildByName("Canvas").getChildByName("recommendBar").zIndex=1e4},onDisable:function(){cc.director.getScene().getChildByName("Canvas").getChildByName("recommendBar").zIndex=1},initRecommond:function(){},initContent:function(){for(var e=facade.getComponent("GameModel").newbieFetchList,t=0;t<4;t++){var n=cc.instantiate(this.item);null!=e[t]?n.getComponent("InviteDailyItem1").setItemData(t,e[t]):n.getComponent("InviteDailyItem1").setItemData(t,null),this.content.addChild(n)}},onClickInvite:function(){window.facade.getComponent("ShareADModel").showShareAD({inviteId:1533,videoId:0,assistId:0},{succ:function(e){console.log("\u62c9\u6d3b \u5206\u4eab/\u89c6\u9891:",e),popUp.getComponent("FloatTip").showTip("\u5206\u4eab\u6210\u529f");var t=facade.getComponent("GameModel").newbieFetchList;facade.getComponent("GameModel").applyInviteNewbieReward(t.length,"123")}.bind(this),fail:function(e,t){popUp.getComponent("FloatTip").showTip(e)}.bind(this)})},onClickBack:function(){popUp.getComponent("Pop").removeTop()},doClose:function(){cc.systemEvent.off(i.GAME_OPEN_DAILY_INVITE,this.initContent,this)}}),cc._RF.pop()},{ModuleEventEnum:"ModuleEventEnum"}],LanguageData:[function(e,t,n){"use strict";cc._RF.push(t,"61de062n4dJ7ZM9/Xdumozn","LanguageData");t.exports={};var i=t,o=e("polyglot.min"),a=null;function s(e){return window.i18n.languages[e]}function c(e){e&&(a?a.replace(e):a=new o({phrases:e,allowMissing:!0}))}window.i18n||(window.i18n={languages:{},curLang:""}),i.exports={init:function(e){if(e!==window.i18n.curLang){var t=s(e)||{};window.i18n.curLang=e,c(t),this.inst=a}},t:function(e,t){if(a)return a.t(e,t)},inst:a,updateSceneRenderers:function(){for(var e=cc.director.getScene().children,t=[],n=0;n<e.length;++n){var i=e[n].getComponentsInChildren("LocalizedLabel");Array.prototype.push.apply(t,i)}for(var o=0;o<t.length;++o){var a=t[o];a.node.active&&a.updateLabel()}for(var s=[],c=0;c<e.length;++c){var r=e[c].getComponentsInChildren("LocalizedSprite");Array.prototype.push.apply(s,r)}for(var l=0;l<s.length;++l){var d=s[l];d.node.active&&d.updateSprite(window.i18n.curLang)}}},cc._RF.pop()},{"polyglot.min":"polyglot.min"}],LevelData:[function(e,t,n){"use strict";cc._RF.push(t,"484fbOkU9hCD7Py4O3P1jn/","LevelData"),cc.Class({extends:cc.Component,properties:{totalBullet:5,starBullet:[cc.Integer]},onLoad:function(){},start:function(){},update:function(e){}}),cc._RF.pop()},{}],LevelItem:[function(e,t,n){"use strict";cc._RF.push(t,"9b8d4ftUfdHjrFzNCl1Hbbh","LevelItem");var i=e("ModuleEventEnum");cc.Class({extends:cc.Component,properties:{lock:cc.SpriteFrame,unlock:cc.SpriteFrame,bg:cc.Sprite,light:cc.Node,stars:cc.Node,label:cc.Node,lockByStar:cc.Node,levelCondition:cc.Sprite},onLoad:function(){},start:function(){this._config=this.node.config;for(var e=1;e<=3;e++)this.stars.getChildByName("star"+e).active=!1;var t=window.facade.getComponent("LevelModel").getLevelStar(facade.selectedLevelType+"_"+this._config.Level),n=facade.getComponent("LevelModel").getTotalStar();for(e=1;e<=t;e++)this.stars.getChildByName("star"+e).active=!0;this.light.active=!1,this.levelCondition.node.active=!1;var i=this._config.BonusType;if(i>0){var o=cc.loader.getRes("uis",cc.SpriteAtlas);this.levelCondition.spriteFrame=o.getSpriteFrame("level_label"+i)}this._config.Level==this.node.currentLevel?(this.light.active=!0,this.bg.spriteFrame=this.unlock,this.stars.active=!1,this._config.Star>n&&(this.label.active=!1,this.lockByStar.active=!0),i>0&&(this.levelCondition.node.active=!0)):this._config.Level<this.node.currentLevel?(this._config.BonusType=0,this.bg.spriteFrame=this.unlock,this.label.y=20,this.stars.active=!0):(this.locked=!0,this.stars.active=!1,this.bg.spriteFrame=this.lock,i>0&&(this.levelCondition.node.active=!0)),this.label.getComponent("TextureLabel").setText(String(this._config.Level))},goLevel:function(){if(!this.locked){if(window.facade.getComponent("LevelModel").getLevelVideo(facade.selectedLevelType+"_"+this._config.Level)>0)3==this._config.BonusType&&window.facade.getComponent("LevelModel").getLevelStar(facade.selectedLevelType+"_"+this._config.Level)<3&&(this._config.Reward=2*this._config.Reward);else if(this._config.Level==this.node.currentLevel&&this._config.BonusType>0)return void this.watchVideo();var e=facade.getComponent("LevelModel").costEnergy;if(facade.getComponent("GameModel").energy<e)cc.systemEvent.emit(i.ENERGY_NEEDED);else{var t=facade.getComponent("LevelModel").getTotalStar();this._config.Star>t?popUp.getComponent("FloatTip").showTip("\u6536\u96c6"+this._config.Star+"\u9897\u661f\u661f\u89e3\u9501"):cc.systemEvent.emit(i.GO_LEVEL,this._config.Level)}}},watchVideo:function(){window.facade.getComponent("ShareADModel").showShareAD({inviteId:0,videoId:21111,assistId:0,interstitalId:31106},{succ:function(e){console.log("\u5173\u5361\u89c6\u9891:",e),this.jumpToLevlUi()}.bind(this),fail:function(e,t){popUp.getComponent("FloatTip").showTip(e)}.bind(this)})},jumpToLevlUi:function(){if(window.facade.getComponent("LevelModel").setOverVideo(this.node.currentLevel),facade.getComponent("LevelModel").costEnergy=1,1==this._config.BonusType){facade.getComponent("LevelModel").costEnergy=0;var e=facade.getComponent("LevelModel").costEnergy;if(facade.getComponent("GameModel").energy<e)return void cc.systemEvent.emit(i.ENERGY_NEEDED)}2==this._config.BonusType&&(this._config.LuckyPoint=2*this._config.LuckyPoint),3==this._config.BonusType&&(this._config.Reward=2*this._config.Reward);var t=facade.getComponent("LevelModel").getTotalStar();this._config.Star>t?popUp.getComponent("FloatTip").showTip("\u6536\u96c6"+this._config.Star+"\u9897\u661f\u661f\u89e3\u9501"):cc.systemEvent.emit(i.GO_LEVEL,this._config.Level)},update:function(e){}}),cc._RF.pop()},{ModuleEventEnum:"ModuleEventEnum"}],LevelLoader:[function(e,t,n){"use strict";cc._RF.push(t,"f32202lWMxAJZ+3qEvZhZFv","LevelLoader");var i=e("ModuleEventEnum"),o=e("AnalyticsUtilities").AnalyticsUtilities;cc.Class({extends:cc.Component,properties:{},onLoad:function(){cc.loader.loadRes("roles",cc.SpriteAtlas),cc.systemEvent.on(i.GO_LEVEL,this.onGoLevel,this),cc.systemEvent.on(i.RELOAD_LEVEL,this.onReloadLevel,this),cc.systemEvent.on(i.GO_NEXT,this.onGoNext,this),cc.systemEvent.on(i.GO_SHOT_NEXT,this.onGoShotNext,this),cc.systemEvent.on(i.LEVEL_ONE_SHOT_GO,this.shotLoadLevel,this)},start:function(){},onGoLevel:function(e){console.log("onGoLevel:",e);var t=facade.selectedLevelType;"classic"==t&&(t="level"),this.loadLevel(t+"_"+e)},shotLoadLevel:function(e){if(!this.inLoading&&!this.node.getChildByName("levelPlay")){if(window.audio.getComponent("SoundManager").pauseBGM("Bgm"),window.facade.getComponent("Facade").levelPassed=!1,this.levelType=e.split("_")[0],this._levelPre=cc.loader.getRes("levels/"+e.toLowerCase(),cc.Prefab),this._levelPre)return this.level=cc.instantiate(this._levelPre),this.level.position=cc.v2(),this.level.name="levelPlay",this.node.addChild(this.level,100),this.changeShotSkins(),this.changeShotBg(),this.generateLevelData(),void cc.systemEvent.emit(i.LEVEL_ONE_SHOT_ADD,this.levelData);this.inLoading=!0,cc.loader.loadRes("levels/"+e.toLowerCase(),cc.Prefab,this.onShotLoaded.bind(this))}},onShotLoaded:function(e,t){this.inLoading=!1,console.log("onLoaded...",t),this._levelPre=t,this.level=cc.instantiate(this._levelPre),this.level.position=cc.v2(),this.level.name="levelPlay",this.node.addChild(this.level,100),this.changeShotSkins(),this.changeShotBg(),this.generateLevelData(),cc.systemEvent.emit(i.LEVEL_ONE_SHOT_ADD,this.levelData)},loadLevel:function(e){var t=e.split("_")[0];if("level"==t&&(t="classic"),facade.selectedLevelType=t,!this.inLoading&&!this.node.getChildByName("levelPlay")){if(window.audio.getComponent("SoundManager").pauseBGM("Bgm"),window.facade.getComponent("Facade").levelPassed=!1,this.levelType=e.split("_")[0],this._levelPre=cc.loader.getRes("levels/"+e.toLowerCase(),cc.Prefab),this._levelPre)return this.level=cc.instantiate(this._levelPre),this.level.position=cc.v2(),this.level.name="levelPlay",this.node.addChild(this.level,2),this.changeSkins(),this.changeBg(),this.generateLevelData(),void cc.systemEvent.emit(i.LEVEL_ADDED,this.levelData);this.inLoading=!0,cc.loader.loadRes("levels/"+e.toLowerCase(),cc.Prefab,this.onLoaded.bind(this)),o.logEvent("\u8fdb\u5165\u6e38\u620f\u754c\u9762")}},onLoaded:function(e,t){this.inLoading=!1,console.log("onLoaded...",t),this._levelPre=t,this.level=cc.instantiate(this._levelPre),this.level.position=cc.v2(),this.level.name="levelPlay",this.node.addChild(this.level,2),this.changeSkins(),this.changeBg(),this.generateLevelData(),cc.systemEvent.emit(i.LEVEL_ADDED,this.levelData)},generateLevelData:function(){this.levelData={},this.levelData.levelType=this.levelType,this.levelData.isDebug=this.isDebug,this.levelData.node=this.level},changeSkins:function(){if(window.facade.getComponent("LevelModel").playingLevelConfig)for(var e=this.level.getChildren(),t=cc.loader.getRes("roles",cc.SpriteAtlas),n=0;n<e.length;n++)if(null!=e[n].name.match("suffer"))for(var i=window.facade.getComponent("LevelModel").playingLevelConfig.Enemy,o=e[n].getChildren(),a=0;a<o.length;a++)if("blood"!=o[a].name)o[a].getComponent(cc.Sprite).sizeMode=cc.Sprite.SizeMode.TRIMMED,o[a].getComponent(cc.Sprite).spriteFrame=t.getSpriteFrame(i+"_"+o[a].name);else{var s=cc.Color.BLACK;o[a].getComponent(cc.ParticleSystem).startColor=s.fromHEX("#94F8F0"),o[a].getComponent(cc.ParticleSystem).endColor=s.fromHEX("#94F8F0")}else if("role"==e[n].name){if("injury"==this.levelType){var c=e[n].getChildByName("blood");s=cc.Color.BLACK,c.getComponent(cc.ParticleSystem).startColor=s.fromHEX("#94F8F0"),c.getComponent(cc.ParticleSystem).endColor=s.fromHEX("#94F8F0"),this.changeRoleSkin2(e[n])}else this.changeRoleSkin1(e[n]);e[n].zIndex=9999}else null!=e[n].name.match("vip")&&(c=e[n].getChildByName("blood"),s=cc.Color.BLACK,c.getComponent(cc.ParticleSystem).startColor=s.fromHEX("#94F8F0"),c.getComponent(cc.ParticleSystem).endColor=s.fromHEX("#94F8F0"))},changeShotSkins:function(){if(window.facade.getComponent("LevelModel").nowLevelConfig)for(var e=this.level.getChildren(),t=cc.loader.getRes("roles",cc.SpriteAtlas),n=0;n<e.length;n++)if(null!=e[n].name.match("suffer"))for(var i=window.facade.getComponent("LevelModel").nowLevelConfig.Enemy,o=e[n].getChildren(),a=0;a<o.length;a++)if("blood"!=o[a].name)o[a].getComponent(cc.Sprite).sizeMode=cc.Sprite.SizeMode.TRIMMED,o[a].getComponent(cc.Sprite).spriteFrame=t.getSpriteFrame(i+"_"+o[a].name);else{var s=cc.Color.BLACK;o[a].getComponent(cc.ParticleSystem).startColor=s.fromHEX("#94F8F0"),o[a].getComponent(cc.ParticleSystem).endColor=s.fromHEX("#94F8F0")}else if("role"==e[n].name){if("injury"==this.levelType){var c=e[n].getChildByName("blood");s=cc.Color.BLACK,c.getComponent(cc.ParticleSystem).startColor=s.fromHEX("#94F8F0"),c.getComponent(cc.ParticleSystem).endColor=s.fromHEX("#94F8F0"),this.changeRoleSkin2(e[n])}else this.changeRoleSkin1(e[n]);e[n].zIndex=9999}else null!=e[n].name.match("vip")&&(c=e[n].getChildByName("blood"),s=cc.Color.BLACK,c.getComponent(cc.ParticleSystem).startColor=s.fromHEX("#94F8F0"),c.getComponent(cc.ParticleSystem).endColor=s.fromHEX("#94F8F0"))},changeRoleSkin1:function(e){var t=window.facade.getComponent("GameModel").characterId,n=cc.loader.getRes("roles",cc.SpriteAtlas);e.getComponent(cc.Sprite).sizeMode=cc.Sprite.SizeMode.TRIMMED,e.getChildByName("handGun").getComponent(cc.Sprite).sizeMode=cc.Sprite.SizeMode.TRIMMED,e.getComponent(cc.Sprite).spriteFrame=n.getSpriteFrame("MrBullet_Role_Body_0"+t),e.getChildByName("handGun").getComponent(cc.Sprite).spriteFrame=n.getSpriteFrame("MrBullet_Role_AimArm_0"+t),e.getChildByName("handGun").x=-26,e.getChildByName("handGun").y=19},changeRoleSkin2:function(e){for(var t=window.facade.getComponent("GameModel").characterId,n=cc.loader.getRes("roles",cc.SpriteAtlas),i=e.getChildren(),o=0;o<i.length;o++){var a=i[o];a.getComponent(cc.Sprite)?a.getComponent(cc.Sprite).spriteFrame=n.getSpriteFrame("Role_0"+t+"_"+a.name):a.getChildByName("skin")&&(a.getChildByName("skin").getComponent(cc.Sprite).sizeMode=cc.Sprite.SizeMode.TRIMMED,a.getChildByName("skin").getComponent(cc.Sprite).spriteFrame=n.getSpriteFrame("Role_0"+t+"_"+a.name)),a.getChildByName("handGun")&&(a.getChildByName("handGun").getComponent(cc.Sprite).spriteFrame=n.getSpriteFrame("MrBullet_Role_AimArm_0"+t))}},changeBg:function(){window.facade.getComponent("LevelModel").playingLevelConfig&&(this.bgSkinUrl="scene/"+window.facade.getComponent("LevelModel").playingLevelConfig.BgImage+".jpg",this.bg=this.level.getChildByName("bg"),cc.loader.getRes(this.bgSkinUrl,cc.SpriteFrame)?(this.bg.getComponent(cc.Sprite).spriteFrame=cc.loader.getRes(this.bgSkinUrl,cc.SpriteFrame),cc.director.getScene().getChildByName("Canvas").getChildByName("bg").getComponent(cc.Sprite).spriteFrame=cc.loader.getRes(this.bgSkinUrl,cc.SpriteFrame)):cc.loader.loadRes(this.bgSkinUrl,cc.SpriteFrame,this.onSkinLoaded.bind(this)))},onSkinLoaded:function(e,t){this.bg.spriteFrame=cc.loader.getRes(this.bgSkinUrl,cc.SpriteFrame),cc.director.getScene().getChildByName("Canvas").getChildByName("bg").getComponent(cc.Sprite).spriteFrame=cc.loader.getRes(this.bgSkinUrl,cc.SpriteFrame)},changeShotBg:function(){window.facade.getComponent("LevelModel").nowLevelConfig&&(this.bgSkinUrl="scene/"+window.facade.getComponent("LevelModel").nowLevelConfig.BgImage+".jpg",this.bg=this.level.getChildByName("bg"),cc.loader.getRes(this.bgSkinUrl,cc.SpriteFrame)?(this.bg.getComponent(cc.Sprite).spriteFrame=cc.loader.getRes(this.bgSkinUrl,cc.SpriteFrame),cc.director.getScene().getChildByName("Canvas").getChildByName("bg").getComponent(cc.Sprite).spriteFrame=cc.loader.getRes(this.bgSkinUrl,cc.SpriteFrame)):cc.loader.loadRes(this.bgSkinUrl,cc.SpriteFrame,this.onSkinLoaded.bind(this)))},onLevelPassed:function(e){console.log("onLevelPassed...",e),window.facade.getComponent("Facade").levelPassed=!0,setTimeout(this.changeLevel.bind(this),5e3)},onGoNext:function(){window.facade.getComponent("LevelModel").playingLevel++,window.facade.getComponent("Facade").levelPassed=!0,this.level.removeFromParent(),cc.systemEvent.emit(i.GO_LEVEL,window.facade.getComponent("LevelModel").playingLevel)},onGoShotNext:function(){this.level.removeFromParent(),window.facade.getComponent("LevelModel").initShotData()},onReloadLevel:function(){this.level.removeFromParent(),cc.systemEvent.emit(i.GO_LEVEL,window.facade.getComponent("LevelModel").playingLevel)},changeLevel:function(){this.levelId++,this.levelId>10||(this.level.removeFromParent(),this.loadLevel("level_"+this.levelId))}}),cc._RF.pop()},{AnalyticsUtilities:"AnalyticsUtilities",ModuleEventEnum:"ModuleEventEnum"}],LevelModel:[function(e,t,n){"use strict";cc._RF.push(t,"20c51pvCCRL3LRTgR9OiLfO","LevelModel");var i=e("ModuleEventEnum");e("MathUtils"),cc.Class({extends:cc.Component,properties:{},initConfig:function(){this.CLASSIC_ID=1e3,this.VIP_ID=2e3,this.INJURY_ID=3e3,this.GRENADE_ID=4e3,cc.loader.loadRes("config/LevelConfig",cc.JsonAsset,this.loaded.bind(this)),cc.loader.loadRes("config/OneBulletConfig",cc.JsonAsset,this.shotloaded.bind(this)),cc.systemEvent.on(i.WX_SHOW,this.onWxShow.bind(this)),cc.systemEvent.on(i.WX_HIDE,this.onWxHide.bind(this))},shotloaded:function(e,t){for(var n in console.log("asset:",t),this.oneShotConfig=t.json,this.oneShotConfigList=[],this.oneShotConfig)this.oneShotConfigList.push(this.oneShotConfig[n])},loaded:function(e,t){for(var n in console.log("asset:",t),this.levelConfig=t.json,this.levelType=1,this.levelConfigList=[],this.chaterConfigs={},this.levelConfig)this.levelConfigList.push(this.levelConfig[n]),null==this.chaterConfigs[this.levelConfig[n].Type+"_"+this.levelConfig[n].Chapter]&&(this.chaterConfigs[this.levelConfig[n].Type+"_"+this.levelConfig[n].Chapter]=[]),this.chaterConfigs[this.levelConfig[n].Type+"_"+this.levelConfig[n].Chapter].push(this.levelConfig[n]);this.initData()},setLevelTypeStr:function(e){"vip"==e?(this.levelType=2,this.costEnergy=2):"injury"==e?(this.levelType=3,this.costEnergy=3):"gnd"==e?(this.levelType=4,this.costEnergy=1):(this.levelType=1,this.costEnergy=1),this.costEnergy=1},getChapters:function(){var e={};for(var t in this.chaterConfigs){var n=t.split("_")[0],i=t.split("_")[1];Number(n)==this.levelType&&(e[i]=this.chaterConfigs[t])}return e},onLoad:function(){cc.systemEvent.on(i.GO_LEVEL,this.onGoLevel,this),cc.systemEvent.on(i.LEVEL_PASSED,this.onLevelPassed,this),this.costEnergy=1,this.oneShotLevel=!1,this.initConfig(),cc.systemEvent.on(i.GOT_HTTP_RES,this.httpResDeal.bind(this))},onGotToken:function(){},httpResDeal:function(e){this.localCaChe=e||{},console.log("LevelModel data:",e),this.formDatas()},formDatas:function(){for(var e in this.localCaCheOnlyThis={},this.classicLevel=Number(this.localCaChe.classicLevel),this.vipLevel=Number(this.localCaChe.vipLevel),this.injuryLevel=Number(this.localCaChe.injuryLevel),this.gndLevel=Number(this.localCaChe.gndLevel),this.vipLevel||(this.vipLevel=1),this.injuryLevel||(this.injuryLevel=1),this.gndLevel||(this.gndLevel=1),this.classicLevel||(this.classicLevel=1),this.levelStars=this.localCaChe.levelStars,this.levelStars||(this.levelStars={}),this.levelStars)("number"==typeof e||Number(e)>0)&&delete this.levelStars[e];for(var e in console.log("levelStars:",this.levelStars),this.levelVideo=this.localCaChe.levelVideo,this.levelVideo||(this.levelVideo={}),this.levelVideo)("video"==typeof e||Number(e)>0)&&delete this.levelVideo[e];this.localCaCheOnlyThis.vipLevel=this.vipLevel,this.localCaCheOnlyThis.injuryLevel=this.injuryLevel,this.localCaCheOnlyThis.gndLevel=this.gndLevel,this.localCaCheOnlyThis.classicLevel=this.classicLevel,this.localCaCheOnlyThis.levelStars=this.levelStars,this.localCaCheOnlyThis.levelVideo=this.levelVideo},update:function(){this.localCaCheOnlyThis=this.localCaCheOnlyThis||{},this.localCaCheOnlyThis.vipLevel=this.vipLevel,this.localCaCheOnlyThis.injuryLevel=this.injuryLevel,this.localCaCheOnlyThis.gndLevel=this.gndLevel,this.localCaCheOnlyThis.classicLevel=this.classicLevel,this.localCaCheOnlyThis.levelStars=this.levelStars,this.localCaCheOnlyThis.levelVideo=this.levelVideo},readLocalDatas:function(){var e=cc.sys.localStorage.getItem("Shooter_LevelData");e?(this.localCaChe=JSON.parse(e),this.formDatas()):(this.localCaChe={},this.localCaChe[facade.selectedLevelType+"Level"]=this[facade.selectedLevelType+"Level"],this.levelStars={},this.levelVideo={})},getUnlockedLevelByType:function(e){return this[e+"Level"]?this[e+"Level"]:1},initData:function(){this.classicLevel||(this.classicLevel=1,this.vipLevel=1,this.injuryLevel=1,this.gndLevel=1),this.lastBullets=1e3,facade.isMiniGame?window.facade.getComponent("PlayerModel").token?this.onGotToken():(this.localCaChe={},this.localCaChe.classicLevel=this.classicLevel,this.localCaChe.vipLevel=this.vipLevel,this.localCaChe.injuryLevel=this.injuryLevel,this.localCaChe.gndLevel=this.gndLevel,this.levelStars={},this.levelVideo={},cc.systemEvent.on(i.WX_REGISTERED,this.onGotToken.bind(this))):this.readLocalDatas()},initShotData:function(){this.oneShotLevel=!0,this.shotNowLevel=window.facade.getComponent("GameModel").oneShotLevel;var e=window.facade.getComponent("GameModel").oneShotLevelList;0==e.length?this.nowLevelConfig=this.oneShotConfigList[0]:this.nowLevelConfig=this.oneShotConfigList[Number(e[Number(this.shotNowLevel-1)]-1)];var t=this.nowLevelConfig.Type,n=this.nowLevelConfig.Level,o="level_1";1==t?o="level_"+n:2==t&&(o="vip_"+n),this.lastBullets=1,this.bulletFilled=1,this.shotedBullets=0,cc.systemEvent.emit(i.LEVEL_ONE_SHOT_GO,o)},onGoLevel:function(e){this.playingLevel=e,this.shotedBullets=0;var t=1e3;"classic"==facade.selectedLevelType?t=this.CLASSIC_ID:"vip"==facade.selectedLevelType?t=this.VIP_ID:"injury"==facade.selectedLevelType?t=this.INJURY_ID:"gnd"==facade.selectedLevelType&&(t=this.GRENADE_ID),this.playingLevelConfig=this.levelConfig[String(t+e)];var n=this.playingLevelConfig.Bullet.split(":");this.lastBullets=Number(n[0]),this.bulletFilled=Number(n[0]),this.starNeeds=[Number(n[1]),Number(n[2]),Number(n[3])]},getLevelConfig:function(e){var t=1e3;return"classic"==facade.selectedLevelType?t=this.CLASSIC_ID:"vip"==facade.selectedLevelType?t=this.VIP_ID:"injury"==facade.selectedLevelType?t=this.INJURY_ID:"gnd"==facade.selectedLevelType&&(t=this.GRENADE_ID),this.levelConfig[String(t+e)]},getLevelNumByType:function(e){var t=1;switch(e){case"vip":t=2;break;case"injury":t=3;break;case"gnd":t=4;break;default:t=1}for(var n=0,i=0;i<this.levelConfigList.length;i++)this.levelConfigList[i].Type==t&&n++;return n},resetLevel:function(){this.onGoLevel(this.playingLevel)},isLastLevel:function(){return this.playingLevel>=this.getLevelNumByType(this.levelType)},isNewLevel:function(){return this.playingLevel>=this[facade.selectedLevelType+"Level"]},onLevelPassed:function(){if(this.starNeeds){this.hasWon=this.isCurrentLevelWon(),this.playingLevel>=this[facade.selectedLevelType+"Level"]&&this[facade.selectedLevelType+"Level"]++,this.star=0;for(var e=0;e<this.starNeeds.length;e++)if(this.starNeeds[e]>=this.shotedBullets){this.star=3-e;break}this.levelStars||(this.levelStars={}),this.levelStars[facade.selectedLevelType+"_"+this.playingLevel]?this.levelStars[facade.selectedLevelType+"_"+this.playingLevel]<this.star&&(this.levelStars[facade.selectedLevelType+"_"+this.playingLevel]=this.star):this.levelStars[facade.selectedLevelType+"_"+this.playingLevel]=this.star,this.saveData()}},setOverVideo:function(e){this.levelVideo||(this.levelVideo={}),this.levelVideo[facade.selectedLevelType+"_"+e]||(this.levelVideo[facade.selectedLevelType+"_"+e]=e),this.saveData()},force3Star:function(){this.star=3,this.levelStars[facade.selectedLevelType+"_"+this.playingLevel]=3,this.saveData()},onSkip:function(){this.playingLevel<this[facade.selectedLevelType+"Level"]||(this[facade.selectedLevelType+"Level"]++,this.star=0,this.saveData(),cc.systemEvent.emit(i.GO_NEXT))},saveData:function(e){"SkipPage"!=facade.CurrentScene&&(this.localCaChe[facade.selectedLevelType+"Level"]=this[facade.selectedLevelType+"Level"],this.localCaChe.levelStars=this.levelStars,this.localCaChe.levelVideo=this.levelVideo,facade.isMiniGame&&(e||facade.FOR_DEVELOP)?window.facade.getComponent("GameModel").saveData():cc.sys.localStorage.setItem("Shooter_LevelData",JSON.stringify(this.localCaChe)))},onWxShow:function(){},onWxHide:function(){facade.FOR_DEVELOP||this.saveData(!0)},isCurrentLevelWon:function(){return!!(this.levelStars[facade.selectedLevelType+"_"+this.playingLevel]&&this.levelStars[facade.selectedLevelType+"_"+this.playingLevel]>=3)},getLevelStar:function(e){return this.levelStars?this.levelStars[e]:0},getLevelVideo:function(e){return this.levelVideo?this.levelVideo[e]:0},getTotalStar:function(){if(!this.levelStars)return 0;var e=0;for(var t in this.levelStars)e+=this.levelStars[t];return e},getStarByLevelType:function(e){if(!this.levelStars)return 0;var t=0;for(var n in this.levelStars)"string"==typeof n&&null!=n.match(e)&&(t+=this.levelStars[n]);return t},shotABullet:function(){this.shotedBullets++,cc.systemEvent.emit(i.BULLET_SHOTED)},useABullet:function(){this.lastBullets--,this.oneShotLevel?this.node.runAction(cc.sequence(cc.delayTime(2),cc.callFunc(this.goToFialure,this))):(this.oneShotLevel=!1,cc.systemEvent.emit(i.BULLET_USED))},goToFialure:function(){cc.systemEvent.emit(i.LEVEL_SHOT_BULLET_USE)}}),cc._RF.pop()},{MathUtils:"MathUtils",ModuleEventEnum:"ModuleEventEnum"}],LevelPanel:[function(e,t,n){"use strict";cc._RF.push(t,"66d725KWAVCgKkmDsoq6jAK","LevelPanel");var i=e("AnalyticsUtilities").AnalyticsUtilities;cc.Class({extends:cc.Component,properties:{chapterPre:cc.Prefab,scrollContent:cc.Node,prograssLabel:cc.Node,listView:cc.ScrollView},onLoad:function(){},start:function(){},init:function(){i.logEvent("\u8fdb\u5165\u9009\u5173\u754c\u9762");var e=Number(window.facade.getComponent("LevelModel").getUnlockedLevelByType(facade.selectedLevelType))-1;e<0&&(e=0);var t=e+"/"+window.facade.getComponent("LevelModel").getLevelNumByType(facade.selectedLevelType);this.prograssLabel.getComponent("TextureLabel").setText(t),this.chapters=window.facade.getComponent("LevelModel").getChapters(),this.scrollContent.removeAllChildren();var n=0;for(var o in this.chapters){n++;var a=cc.instantiate(this.chapterPre);a.data=this.chapters[o],this.scrollContent.addChild(a),this.scrollContent.height=n*a.height,this.scrollContent.height}this.inited=!0,setTimeout(this.delayScroll.bind(this),100)},delayScroll:function(){this.currentLevel=window.facade.getComponent("LevelModel").getUnlockedLevelByType(facade.selectedLevelType);var e=Math.floor((this.currentLevel-1)/15),t=this.scrollContent.getChildren();t.length<=2||this.listView.scrollToPercentVertical((t.length-e)/t.length)},onClose:function(){cc.director.getScene().getChildByName("Canvas").getComponent("MainUI").hideSelectPanel()},onDisable:function(){this.inited=!1},update:function(e){this.node.active&&!this.inited&&this.init()}}),cc._RF.pop()},{AnalyticsUtilities:"AnalyticsUtilities"}],LevelUI:[function(e,t,n){"use strict";cc._RF.push(t,"ec81c1kuJJHsoRab1n7hnEA","LevelUI");var i=e("ModuleEventEnum"),o=e("AnalyticsUtilities").AnalyticsUtilities;cc.Class({extends:cc.Component,properties:{bulletsBox:cc.Node,result:cc.Node,skipBtn:cc.Node,retryBtn:cc.Node,skipPanel:cc.Node,cashLabel:cc.Node,backBtn:cc.Node,replayUI:cc.Node},onLoad:function(){cc.systemEvent.on(i.BULLET_SHOTED,this.bulletShoted,this),cc.systemEvent.on(i.BULLET_USED,this.bulletUsed,this),cc.systemEvent.on(i.LEVEL_PASSED,this.onLevelPassed,this),cc.systemEvent.on(i.FAILURE_BUY_KILL,this.onFailureKill,this),cc.systemEvent.on(i.GUIDE_CLOSED,this.onGuideClosed,this),cc.systemEvent.on(i.STAR_JUMP_CHANGE,this.getThreeStarOrJumpResult,this)},onEnable:function(){cc.director.getScene().getChildByName("Canvas").getChildByName("recommendBar").zIndex=1e4},init:function(){this.passed=!1,this.failed=!1,this.replayUI.active=!1,console.log("levelUI init..."),window.facade.getComponent("LevelModel").isNewLevel()&&!facade.SAVE_MODE?this.skipBtn.active=!0:(this.skipBtn.active=!1,window.facade.getComponent("LevelModel").getLevelStar(facade.selectedLevelType+"_"+window.facade.getComponent("LevelModel").playingLevel)<3&&popUp.getComponent("Pop").addPopByName("GetTreeStarView",1,!0,!0,!1)),window.facade.getComponent("BannerModel").hideBanner(),window.facade.getComponent("GameModel").levelRetryTouch?window.facade.getComponent("GameModel").levelRetryTouch=!1:window.facade.getComponent("GameModel").loseEnergy(),this.retryBtn.active=!0,this.bulletsBox.active=!0,this.result.active=!1,this.skipPanel.active=!1,this.backBtn.active=!0,this.config=window.facade.getComponent("LevelModel").playingLevelConfig,this.bulletsBox.removeAllChildren(),this.lastBullets=window.facade.getComponent("LevelModel").lastBullets,this.bestScoreLimit=window.facade.getComponent("LevelModel").starNeeds[0];for(var e=0;e<this.lastBullets;e++){var t=new cc.Node;this.bulletsBox.addChild(t),this.lastBullets-e<=this.bestScoreLimit?t.addComponent(cc.Sprite).spriteFrame=cc.loader.getRes("uis",cc.SpriteAtlas).getSpriteFrame("bullet_light"):t.addComponent(cc.Sprite).spriteFrame=cc.loader.getRes("uis",cc.SpriteAtlas).getSpriteFrame("bullet_dark")}window.audio.getComponent("SoundManager").playEffect("begin_"+(1+Math.floor(3*Math.random())),!1,50),this.checkGuide()},onGuideClosed:function(){if("classic"==facade.selectedLevelType){this.finger=cc.director.getScene().getChildByName("Canvas").getChildByName("levelPlay").getChildByName("finger"),this.finger.active=!0;var e=cc.rotateTo(.8,-30),t=cc.rotateTo(.8,0);e.easing(cc.easeSineOut()),t.easing(cc.easeSineIn()),this.finger.runAction(cc.sequence(cc.repeat(cc.sequence(e,t),3),cc.fadeOut(.5)))}},checkGuide:function(){window.facade.getComponent("LevelModel").playingLevel>1||window.facade.getComponent("LevelModel").isNewLevel()&&popUp.getComponent("Pop").addPopByName("Guide"+facade.selectedLevelType,null,!0,!0)},bulletShoted:function(){var e=this.bulletsBox.getChildren();e.length<=0?window.audio.getComponent("SoundManager").playEffect("empty"):e[e.length-1].removeFromParent()},bulletUsed:function(){if(this.bulletsBox.getChildren().length<=0){if(this.passed)return;this.failure()}},isBulletFlying:function(){for(var e=cc.director.getScene().getChildByName("Canvas").getChildByName("levelPlay").getChildren(),t=0;t<e.length;t++)if(e[t].name.match("bullet"))return!0;return!1},backMain:function(){this.isBulletFlying()&&!this.result.active||(cc.systemEvent.emit(i.BACK_MAIN),o.logEvent("\u5de6\u4e0a\u89d2\u8fd4\u56de\u8fd9\u754c\u9762\u6309\u94ae"))},retryLabelHandler:function(){this.replayUI.active=!0},retry:function(){window.facade.getComponent("LevelModel").resetLevel(),this.result.active=!1,cc.systemEvent.emit(i.RELOAD_LEVEL)},retryCostEnergy:function(){var e=facade.getComponent("LevelModel").costEnergy;facade.getComponent("GameModel").energy<e?cc.systemEvent.emit(i.ENERGY_NEEDED):(facade.getComponent("GameModel").loseEnergy(),window.facade.getComponent("LevelModel").resetLevel(),this.result.active=!1,cc.systemEvent.emit(i.RELOAD_LEVEL))},onFailureKill:function(){this.node.stopAllActions(),this.failure(!0)},failure:function(e){cc.director.getScene().getChildByName("Canvas").getComponent("GameLogic").hasPassed&&!e||this.failed||(window.audio.getComponent("SoundManager").playEffect("lose"),cc.systemEvent.emit(i.FAILURE),window.facade.getComponent("LevelModel").resultLevel=window.facade.getComponent("LevelModel").playingLevel,this.failed=!0,e?this.node.runAction(cc.sequence(cc.delayTime(3),cc.callFunc(this.showResult2,this))):this.showResult(!1))},onLevelPassed:function(e){this.node.stopAllActions(),this.passed=!0,this.skipBtn.active=!1,this.retryBtn.active=!1,this.bulletsBox.active=!1,this.backBtn.active=!1,window.facade.getComponent("LevelModel").resultLevel=window.facade.getComponent("LevelModel").playingLevel,e?this.showResult():this.node.runAction(cc.sequence(cc.delayTime(3),cc.callFunc(this.showResult,this)))},showResult2:function(){this.showResult(!1)},showResult:function(e){this.backBtn.active=!0,cc.director.getScene().getChildByName("Canvas").getChildByName("recommendBar").zIndex=1,window.facade.getComponent("LevelModel").resultLevel==window.facade.getComponent("LevelModel").playingLevel&&(0!=e&&(e=!0),this.result.active=!0,this.result.getComponent("ResultPanel").init(e))},getThreeStarOrJumpResult:function(e){2!=e&&(this.backBtn.active=!0,cc.director.getScene().getChildByName("Canvas").getChildByName("recommendBar").zIndex=1,this.result.active=!0,this.result.getComponent("ResultPanel").take3StarGet())},showSkip:function(){this.skipBtn.active=!1,this.retryBtn.active=!1,this.skipPanel.active=!0,this.skipPanel.opacity=0,this.skipPanel.runAction(cc.fadeIn(.2)),this.skipPanel.getComponent("SkipPanel").init()},hideSkip:function(){this.skipBtn.active=!0,this.retryBtn.active=!0,this.skipPanel.active=!1,this.bulletsBox.getChildren().length<=0&&this.retry()},update:function(e){this.align()},align:function(){if(!this.reAligned){var e=this.node.getChildren();if(window.facade.Screenratio&&window.facade.Screenratio<.47){for(var t=0;t<e.length;t++)"resultPanel"!=e[t].name&&"skipPanel"!=e[t].name&&e[t].getComponent(cc.Widget)&&(e[t].getComponent(cc.Widget).top+=50,e[t].getComponent(cc.Widget).updateAlignment());this.reAligned=!0}}},postRequest:function(e,t,n){var i=new XMLHttpRequest;i.onreadystatechange=function(e){if(4==i.readyState&&i.status>=200&&i.status<300){var t=JSON.parse(i.responseText);0!=t.code?n&&n.failure&&n.failure(t.code):n&&n.success&&n.success(t.data)}}.bind(this),i.onerror=function(e){n&&n.failure&&n.failure(e)},i.open("POST",e,!1),i.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),i.send(t)}}),cc._RF.pop()},{AnalyticsUtilities:"AnalyticsUtilities",ModuleEventEnum:"ModuleEventEnum"}],Light:[function(e,t,n){"use strict";cc._RF.push(t,"1a4cb7RE4FIYLcW04K1HMy3","Light"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){},start:function(){this.node.runAction(cc.repeatForever(cc.sequence(cc.scaleTo(2,.9),cc.scaleTo(2,1.6)))),this.node.runAction(cc.repeatForever(cc.sequence(cc.fadeTo(1,0),cc.fadeTo(1,80))))},update:function(e){this.node.angle+=200*e}}),cc._RF.pop()},{}],ListViewCtrl:[function(e,t,n){"use strict";cc._RF.push(t,"39954MoSZ1Fb4qgNVX3dBtk","ListViewCtrl"),cc.Class({extends:cc.Component,properties:{itemName:"",spawnCount:0,spacing:0,bufferZone:0,itemAnchor:1,vertical:!0,itemTemplate:cc.Node,scrollView:cc.ScrollView,content:cc.Node},onLoad:function(){this.items=[],this.totalCount=0,this.lastContentPosY=0,this.lastContentPosX=0,this.initialize(),this.content.originY=this.content.y,this.content.originX=this.content.x},initialize:function(){for(var e=0;e<this.spawnCount;++e){var t=null;t=window.pool.has(this.itemName)?window.pool.get(this.itemName):cc.instantiate(this.itemTemplate),this.content.addChild(t),this.vertical?1==this.itemAnchor?t.setPosition(0,-t.height*e-this.spacing*(e+1)):t.setPosition(0,-t.height*(.5+e)-this.spacing*(e+1)):0==this.itemAnchor?t.setPosition((t.width+this.spacing)*e,0):t.setPosition((t.width+this.spacing)*e+(t.width+this.spacing)/2,0),this.items.push(t)}},setList:function(e,t,n){if(this.showData=e,this.custom=n,this.totalCount=this.showData.length,this.vertical){if(this.content.y=this.content.originY,this.content.height=this.totalCount*(this.itemTemplate.height+this.spacing)+this.spacing,this.content.height<this.scrollView.height&&(this.content.height=this.scrollView.height),this.items&&this.items.length>0)for(var i=0;i<this.items.length;i++){var o=this.items[i];this.showData[i]?(o.active=!0,o.getComponent(this.itemName).setItemData(i,i,this.showData[i],this.custom),1==this.itemAnchor?o.setPosition(0,-o.height*i-this.spacing*(i+1)):o.setPosition(0,-o.height*(.5+i)-this.spacing*(i+1)),t&&this.iteamAction(i,o)):o.active=!1}}else if(this.content.x=this.content.originX,this.content.width=this.totalCount*(this.itemTemplate.width+this.spacing)+this.spacing,this.content.width<this.scrollView.width&&(this.content.width=this.scrollView.width),this.items&&this.items.length>0)for(var a=0;a<this.items.length;a++){var s=this.items[a];this.showData[a]?(s.active=!0,s.getComponent(this.itemName).setItemData(a,a,this.showData[a],this.custom),1==this.itemAnchor?s.setPosition((s.width+this.spacing)*a,0):s.setPosition((s.width+this.spacing)*a+(s.width+this.spacing)/2,0)):s.active=!1}},refreshList:function(){this.totalCount=this.showData.length,this.vertical?this.content.height=this.totalCount*(this.itemTemplate.height+this.spacing)+this.spacing:this.content.width=this.totalCount*(this.itemTemplate.width+this.spacing)+this.spacing;for(var e=0;e<this.items.length;e++){var t=this.items[e];if(this.showData[e]){t.active=!0;var n=t.getComponent(this.itemName),i=n.itemID;n.setItemData(e,i,this.showData[i],this.custom)}else t.active=!1}},iteamAction:function(e,t){var n=t;n.opacity=0,n.x=-300;var i=cc.spawn(cc.fadeIn(.2),cc.moveBy(.2,cc.v2(300,0)));n.runAction(cc.sequence(cc.delayTime(.08*e),i,cc.callFunc(function(){n.stopAllActions(),n.x=0,n.opacity=255}.bind(this))))},scrollEvent:function(e,t){4!=t&&9!=t||this.doUpdateList()},getPositionInView:function(e){var t=e.parent.convertToWorldSpaceAR(e.position);return this.scrollView.node.convertToNodeSpaceAR(t)},doUpdateList:function(e){if(this.vertical){var t=this.items;if(0==t.length)return;for(var n=this.bufferZone,i=this.scrollView.content.y<this.lastContentPosY,o=(this.itemTemplate.height+this.spacing)*t.length,a=0;a<t.length;++a){var s=this.getPositionInView(t[a]);if(i){if(s.y<-n&&t[a].y+o<0){t[a].y=t[a].y+o;var c=t[a].getComponent(this.itemName),r=c.itemID-t.length;c.setItemData(a,r,this.showData[r],this.custom)}}else if(s.y>n&&t[a].y-o>-this.content.height){t[a].y=t[a].y-o;var l=t[a].getComponent(this.itemName),d=l.itemID+t.length;l.setItemData(a,d,this.showData[d],this.custom)}}this.lastContentPosY=this.scrollView.content.y}else{var h=this.items;if(0==h.length)return;for(var u=this.bufferZone,p=this.scrollView.content.x<this.lastContentPosX,m=(this.itemTemplate.width+this.spacing)*h.length,g=0;g<h.length;g++){var f=this.getPositionInView(h[g]);if(p){if(f.x<-u&&h[g].x+m<this.scrollView.content.width){h[g].setPositionX(h[g].x+m);var v=h[g].getComponent(this.itemName),C=v.itemID+h.length;v.setItemData(g,C,this.showData[C],this.custom)}}else if(f.x>u&&h[g].x-m>0){h[g].setPositionX(h[g].x-m);var w=h[g].getComponent(this.itemName),S=w.itemID-h.length;w.setItemData(g,S,this.showData[S],this.custom)}}this.lastContentPosX=this.scrollView.content.x}},close:function(){if(window.pool.has(this.itemName))for(var e=0;e<this.items.length;e++){var t=this.items[e];window.pool.put(this.itemName,t)}else window.pool.create(this.itemName,this.spawnCount,cc.instantiate(this.itemTemplate))}}),cc._RF.pop()},{}],LocalizedLabel:[function(e,t,n){"use strict";cc._RF.push(t,"744dcs4DCdNprNhG0xwq6FK","LocalizedLabel");var i=e("LanguageData");cc.Class({extends:cc.Component,editor:{executeInEditMode:!0,menu:"i18n/LocalizedLabel"},properties:{dataID:{get:function(){return this._dataID},set:function(e){this._dataID!==e&&(this._dataID=e,this.updateLabel())}},_dataID:""},onLoad:function(){i.inst||i.init(),this.fetchRender()},fetchRender:function(){var e=this.getComponent(cc.Label);if(e)return this.label=e,void this.updateLabel()},updateLabel:function(){this.label?i.t(this.dataID)&&(this.label.string=i.t(this.dataID)):cc.error("Failed to update localized label, label component is invalid!")}}),cc._RF.pop()},{LanguageData:"LanguageData"}],LocalizedSprite:[function(e,t,n){"use strict";cc._RF.push(t,"f34ac2GGiVOBbG6XlfvgYP4","LocalizedSprite");var i=e("SpriteFrameSet");cc.Class({extends:cc.Component,editor:{executeInEditMode:!0,inspector:"packages://i18n/inspector/localized-sprite.js",menu:"i18n/LocalizedSprite"},properties:{spriteFrameSet:{default:[],type:i}},onLoad:function(){this.fetchRender()},fetchRender:function(){var e=this.getComponent(cc.Sprite);if(e)return this.sprite=e,void this.updateSprite(window.i18n.curLang)},getSpriteFrameByLang:function(e){for(var t=0;t<this.spriteFrameSet.length;++t)if(this.spriteFrameSet[t].language===e)return this.spriteFrameSet[t].spriteFrame},updateSprite:function(e){if(this.sprite){var t=this.getSpriteFrameByLang(e);!t&&this.spriteFrameSet[0]&&(t=this.spriteFrameSet[0].spriteFrame),this.sprite.spriteFrame=t}else cc.error("Failed to update localized sprite, sprite component is invalid!")}}),cc._RF.pop()},{SpriteFrameSet:"SpriteFrameSet"}],MConfig:[function(e,t,n){"use strict";cc._RF.push(t,"bfee8wL3oVIc5xtWAFk4XHB","MConfig");t.exports={};t.exports={Game:{key:"Game",open:!0}},cc._RF.pop()},{}],Magic:[function(e,t,n){"use strict";cc._RF.push(t,"3aaebyd87JH77c8LlcpIrTu","Magic"),e("ModuleEventEnum"),cc.Class({extends:cc.Component,properties:{target:cc.Node},onLoad:function(){},start:function(){},trigger:function(){this.target&&(this.target.active=!0),this.node.removeFromParent()},update:function(e){}}),cc._RF.pop()},{ModuleEventEnum:"ModuleEventEnum"}],MainUI:[function(e,t,n){"use strict";cc._RF.push(t,"ac9baAUfTpI0Kjxci4S1aYw","MainUI");var i=e("ModuleEventEnum"),o=e("AnalyticsUtilities").AnalyticsUtilities;cc.Class({extends:cc.Component,properties:{mainUI:cc.Node,cashLabel:cc.Node,moreGameBtn:cc.Node,bottomBar:cc.Node,buttonClassic:cc.Node,characterShow:cc.Node,soundButton:cc.Node,cashBar:cc.Node,energyBar:cc.Node,titleLogo:cc.Node,recommendBar:cc.Node,totalStar:cc.Node,btnNextGift:cc.Node,btnContent:cc.Node,moreGame:cc.Node},onLoad:function(){cc.systemEvent.on(i.INIT_ROLEINFO_COMPLETED,this.initUI,this),cc.systemEvent.on(i.WX_REGISTERED,this.onGameEntered,this),cc.systemEvent.on(i.FUNCOPEN_UPDATE,this.onFuncOpen.bind(this)),cc.systemEvent.on(i.LEVEL_SELECT,this.onGoLevelSelected,this),cc.systemEvent.on(i.LEVEL_ADDED,this.onGoLevel,this),cc.systemEvent.on(i.LEVEL_ONE_SHOT_ADD,this.onShotGoLevel,this),cc.systemEvent.on(i.BACK_MAIN,this.onBackMain,this),cc.systemEvent.on(i.SAVE_MODE_CHANGE,this.onSaveModeChange,this),this.btnNextGift.active=!1},start:function(){window.facade.isMiniGame=""!=window.net.platformName,facade.isMiniGame&&(window.wx=window[window.net.platformName],wx.hideLoading()),o.logEvent("\u8fdb\u5165\u6e38\u620f\u4e3b\u754c\u9762"),window.audio.getComponent("SoundManager").setBGM("Bgm"),this.recommendBar.active=!facade.SAVE_MODE,this.soundButton.zIndex=100,this.cashBar.zIndex=100,this.energyBar.zIndex=100,facade.needShowSign&&this.initUI()},transition:function(e,t,n){var i=this;cc.director.preloadScene(e),this.mask.active=!0,this.mask.zIndex=cc.macro.MAX_ZINDEX,this.mask.opacity=0,this.mask.runAction(cc.sequence(cc.fadeIn(t||.5),cc.callFunc(function(){cc.director.loadScene(e,function(){i.mask.runAction(cc.sequence(cc.fadeOut(n||.5),cc.callFunc(function(){i.mask.active=!1})))})})))},initUI:function(){this.btnNextGift.active=!window.facade.getComponent("GameModel").gotNextReward;var e=facade.getComponent("GameModel").lastFetchSignInTime;(e=null==e?0:Math.floor(e/864e5))<Math.floor(facade.getComponent("GameModel").getLocalTime()/86400/1e3)&&!popUp.getComponent("Pop").getPopByName("BackEnergyView")&&popUp.getComponent("Pop").addPopByName("SignIn",null,!0)},onFuncOpen:function(){facade.getComponent("PlayerModel").isLoginInterOpen()&&facade.getComponent("InterstitialADModel").showFakeInterAD()},onGameEntered:function(){facade.isMiniGame&&window.facade.getComponent("PlayerModel").wxAdaptor.wxGetUserInfo()},onClickEarnRes:function(e,t){popUp.getComponent("Pop").addPopByName("EntranceUI",t,!0)},onClickCollect:function(){window.wx&&popUp.getComponent("Pop").addPopByName("CollectGift",null,!0,!0)},update:function(e){this.totalStar.getComponent("TextureLabel").setText(String(window.facade.getComponent("LevelModel").getTotalStar())),this.cashLabel.getComponent("TextureLabel").setText(String(window.facade.getComponent("GameModel").cash)),this.align(),this.checkAddEnergy(),this.updateCharater()},align:function(){if(!this.reAligned){var e=this.node.getChildren();if(window.facade.Screenratio&&window.facade.Screenratio<.47){for(var t=0;t<e.length;t++)e[t].getComponent(cc.Widget)&&(e[t].getComponent(cc.Widget).top+=50,e[t].getComponent(cc.Widget).updateAlignment());this.reAligned=!0}}},checkAddEnergy:function(){facade.SAVE_MODE||window.facade.getComponent("GameModel")._offLineEnergy&&0!=window.facade.getComponent("GameModel")._offLineEnergy&&(popUp.getComponent("Pop").addPopByName("BackEnergyView",window.facade.getComponent("GameModel")._offLineEnergy,!0,!1),window.facade.getComponent("GameModel")._offLineEnergy=0)},updateCharater:function(){cc.loader.getRes("roles",cc.SpriteAtlas)&&(facade.getComponent("GameModel").charaterConfig[String(facade.getComponent("GameModel").characterId)]||facade.getComponent("GameModel").onRoleSelected(1),this.characterShow.getChildByName("role").getComponent(cc.Sprite).spriteFrame=cc.loader.getRes("roles",cc.SpriteAtlas).getSpriteFrame("MrBullet_Role_Body_0"+facade.getComponent("GameModel").characterId),this.characterShow.getChildByName("role").getChildByName("hand").getComponent(cc.Sprite).spriteFrame=cc.loader.getRes("roles",cc.SpriteAtlas).getSpriteFrame("MrBullet_Role_AimArm_0"+facade.getComponent("GameModel").characterId))},onGoLevelSelected:function(e){if(1!=this.inUILoading)if(this.bottomBar.active=!1,this.buttonClassic.active=!1,this.characterShow.active=!1,this.mainUI.active=!0,this.selectPanel)this.selectPanel.active=!0;else{if(this._selectPanelPre=cc.loader.getRes("ui/levelSelects",cc.Prefab),this._selectPanelPre)return this.selectPanel=cc.instantiate(this._selectPanelPre),this.selectPanel.name="selectPanel",this.mainUI.addChild(this.selectPanel),void(this.mainUI.active=!0);this.inUILoading=!0,cc.loader.loadRes("ui/levelSelects",cc.Prefab,this.onSelectLoaded.bind(this))}},onGoLevel:function(){this.selectPanel&&(this.selectPanel.active=!1,this.mainUI.active=!1,this.addLevelUI()),this.recommendBar.zIndex=1e4},onShotGoLevel:function(){this.mainUI.active=!1,this.addShotLevelUI(),this.recommendBar.zIndex=1e3},onSaveModeChange:function(){},onSelectLoaded:function(e,t){this.inUILoading=!1,console.log("onSelectLoaded...",t),this._selectPanelPre=t,this.selectPanel=cc.instantiate(this._selectPanelPre),this.selectPanel.name="selectPanel",this.mainUI.active=!0,this.mainUI.addChild(this.selectPanel)},onGoSkin:function(){if(1!=this.inUILoading){if(this.mainUI.active=!0,this.skinPanel)return this.skinPanel.active=!0,this.bottomBar.active=!1,this.buttonClassic.active=!1,this.characterShow.active=!1,this.titleLogo.stopAllActions(),void this.titleLogo.runAction(cc.fadeOut(.3));if(this._skinPanelPre=cc.loader.getRes("ui/skinSelects",cc.Prefab),this._skinPanelPre)return this.skinPanel=cc.instantiate(this._skinPanelPre),this.skinPanel.name="skinPanel",this.mainUI.addChild(this.skinPanel),this.bottomBar.active=!1,this.buttonClassic.active=!1,this.characterShow.active=!1,this.titleLogo.stopAllActions(),void this.titleLogo.runAction(cc.fadeOut(.3));this.inUILoading=!0,cc.loader.loadRes("ui/skinSelects",cc.Prefab,this.onSkinLoaded.bind(this))}},onSkinLoaded:function(e,t){this.inUILoading=!1,console.log("onSkinLoaded...",t),this._skinPanelPre=t,this.skinPanel=cc.instantiate(this._skinPanelPre),this.skinPanel.name="skinPanel",this.mainUI.active=!0,this.mainUI.addChild(this.skinPanel),this.bottomBar.active=!1,this.buttonClassic.active=!1,this.characterShow.active=!1,this.titleLogo.stopAllActions(),this.titleLogo.runAction(cc.fadeOut(.3))},onClickBanner:function(){var t=e("VirBannerCtrl");facade.getComponent("RewardCPAModel").navigateToGame(t.gameInfo,{success:function(){t.hideVirBanner()},failure:function(e){console.log("\u8df3\u8f6c\u5931\u8d25: ",e)}},!1)},addShotLevelUI:function(){return this.levelShotUI?(this.levelShotUI.active=!0,this.levelShotUI.zIndex=this.node.getChildByName("levelPlay").zIndex+1,void this.levelShotUI.getComponent("OneShotUI").init()):(this.bottomBar.active=!1,this.buttonClassic.active=!1,this.characterShow.active=!1,this._levelShotUIPre=cc.loader.getRes("ui/OneShotUI",cc.Prefab),this._levelShotUIPre?(this.levelShotUI=cc.instantiate(this._levelShotUIPre),this.levelShotUI.name="levelShotUI",this.node.addChild(this.levelShotUI),void(this.levelShotUI.zIndex=this.node.getChildByName("levelPlay").zIndex+1)):void cc.loader.loadRes("ui/OneShotUI",cc.Prefab,this.onLevelShotUILoaded.bind(this)))},onLevelShotUILoaded:function(e,t){console.log("onLevelshotUILoaded..."),this._levelShotUIPre=t,this.levelShotUI=cc.instantiate(this._levelShotUIPre),this.levelShotUI.name="levelShotUI",this.node.addChild(this.levelShotUI),this.levelShotUI.zIndex=this.node.getChildByName("levelPlay").zIndex+1},addLevelUI:function(){return this.levelUI?(this.levelUI.active=!0,this.levelUI.zIndex=this.node.getChildByName("levelPlay").zIndex+1,void this.levelUI.getComponent("LevelUI").init()):(this.bottomBar.active=!1,this.buttonClassic.active=!1,this.characterShow.active=!1,this._levelUIPre=cc.loader.getRes("ui/levelUI",cc.Prefab),this._levelUIPre?(this.levelUI=cc.instantiate(this._levelUIPre),this.levelUI.name="levelUI",this.node.addChild(this.levelUI),this.levelUI.getComponent("LevelUI").init(),void(this.levelUI.zIndex=this.node.getChildByName("levelPlay").zIndex+1)):void cc.loader.loadRes("ui/levelUI",cc.Prefab,this.onLevelUILoaded.bind(this)))},onLevelUILoaded:function(e,t){console.log("onLevelUILoaded..."),this._levelUIPre=t,this.levelUI=cc.instantiate(this._levelUIPre),this.levelUI.name="levelUI",this.node.addChild(this.levelUI),this.levelUI.getComponent("LevelUI").init(),this.levelUI.zIndex=this.node.getChildByName("levelPlay").zIndex+1},onBackMain:function(){this.levelShotUI?this.levelShotUI.active?(this.levelShotUI.active=!1,window.facade.getComponent("LevelModel").oneShotLevel=!1):this.levelUI.active&&(this.levelUI.active=!1):this.levelUI.active=!1,this.node.getChildByName("levelPlay").removeFromParent(),window.facade.getComponent("BannerModel").hideBanner(),this.mainUI.active=!0,this.bottomBar.active=!0,this.buttonClassic.active=!0,this.characterShow.active=!0,this.titleLogo.stopAllActions(),this.titleLogo.runAction(cc.fadeIn(.3)),window.audio.getComponent("SoundManager").resumeBGM(),this.recommendBar.zIndex=1},onShowMore:function(){window.popUp.getComponent("Pop").addPopByName("MoreGame",this,!0,!0,!1)},onShowRank:function(){window.popUp.getComponent("Pop").addPopByName("Rank",this,!0,!1,!1)},onShowNext:function(){window.popUp.getComponent("Pop").addPopByName("NextLoginView",null,!0,!0)},hideSelectPanel:function(){this.selectPanel.active=!1,this.bottomBar.active=!0,this.buttonClassic.active=!0,this.characterShow.active=!0},hideSkinPanel:function(){this.skinPanel.active=!1,this.bottomBar.active=!0,this.buttonClassic.active=!0,this.characterShow.active=!0,this.titleLogo.stopAllActions(),this.titleLogo.runAction(cc.fadeIn(.3))},onClickShoping:function(e,t){popUp.getComponent("Pop").addPopByName("ShopView",this,!0,!0,!0)},onGotLoginInfo:function(){}}),cc._RF.pop()},{AnalyticsUtilities:"AnalyticsUtilities",ModuleEventEnum:"ModuleEventEnum",VirBannerCtrl:"VirBannerCtrl"}],MathUtils:[function(e,t,n){"use strict";cc._RF.push(t,"5e9beSyq19GKaycQ6rdU3W/","MathUtils");t.exports={};var i={getRad:function(e,t){var n=e.x,i=e.y,o=t.x,a=t.y,s=(o-n)/cc.pDistance(e,t),c=Math.acos(s);return a<i&&(c=-c),c},getVectorRadians:function(e,t,n,i){return Math.acos((e*n+t*i)/Math.sqrt(e*e+t*t)*Math.sqrt(n*n+i*i))},pointIsInPolygon:function(e,t){var n,i,o,a;n=e,i={x:-1e4,y:e.y};for(var s=0,c=0;c<t.length-1;c++)o=t[c],a=t[c+1],1==this.checkCross(n,i,o,a)&&s++;return o=t[t.length-1],a=t[0],1==this.checkCross(n,i,o,a)&&s++,s%2!=0},crossMul:function(e,t){return e.x*t.y-e.y*t.x},checkCross:function(e,t,n,i){var o={x:e.x-n.x,y:e.y-n.y},a={x:t.x-n.x,y:t.y-n.y},s={x:i.x-n.x,y:i.y-n.y},c=this.crossMul(o,s)*this.crossMul(a,s);return o={x:n.x-e.x,y:n.y-e.y},a={x:i.x-e.x,y:i.y-e.y},s={x:t.x-e.x,y:t.y-e.y},c<=0&&this.crossMul(o,s)*this.crossMul(a,s)<=0}};t.exports=i,cc._RF.pop()},{}],ModuleEventEnum:[function(e,t,n){"use strict";cc._RF.push(t,"8f272fdIARI/6D++v4JtcwP","ModuleEventEnum");t.exports={};var i,o=t;function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var s=(a(i={GO_LOADING:"GO_LOADING",LOADING_END:"LOADING_END",GO_GAME:"GO_GAME",GO_UNIT:"GO_UNIT",SHOW_OPPONENT:"SHOW_OPPONENT",CLOSE_RANK:"CLOSE_RANK",GAME_ENTERD:"GAME_ENTERD",RE_ENTERED:"RE_ENTERED",CHANGE_SCENE:"CHANGE_SCENE",GAMESENE_ENTERED:"GAMESENE_ENTERED",LEVEL_PASSED:"LEVEL_PASSED",LEVEL_SELECT:"LEVEL_SELECT",MORE_GAME:"MORE_GAME",SAVE_MODE_CHANGE:"SAVE_MODE_CHANGE",STAR_JUMP_CHANGE:"STAR_JUMP_CHANGE",PLAYER_NAME_CHANGE:"PLAYER_NAME_CHANGE",PLAYER_RANK_DATA:"PLAYER_RANK_DATA",LEVEL_ONE_SHOT_GO:"LEVEL_ONE_SHOT_GO",LEVEL_ONE_SHOT_ADD:"LEVEL_ONE_SHOT_ADD",LEVEL_SHOT_BULLET_USE:"LEVEL_SHOT_BULLET_USE",LEVEL_SHOT_PASSED:"LEVEL_SHOT_PASSED",GO_SHOT_NEXT:"GO_SHOT_NEXT",SHOT_NOW_OVER_SHOW:"SHOT_NOW_OVER_SHOW",TURN_TABLE_TO_LEVEL:"TURN_TABLE_TO_LEVEL",BACK_TO_APP:"BACK_TO_APP",USER_INFO_ALLOWED:"USER_INFO_ALLOWED",LOGIN_GATE_SUCCESS:"LOGIN_GATE_SUCCESS",RELOGIN_SUCCESS:"RELOGIN_SUCCESS",ADD_NOTICE:"ADD_NOTICE",WX_SHOW:"WX_SHOW",WX_HIDE:"WX_HIDE",ADD_SUBSCRIBE:"ADD_SUBSCRIBE",ASKFOR_LIST:"ASKFOR_LIST",REJECT_ASKFOR:"REJECT_ASKFOR",ACCEPT_ASKFOR:"ACCEPT_ASKFOR",ASKFOR_SEND_SUCC:"ASKFOR_SEND_SUCC",ASKFOR_INFO:"ASKFOR_INFO",OPEN_VIDEO:"OPEN_VIDEO",CONNECTING_HTTP_SERVER:"CONNECTING_HTTP_SERVER",GOT_HTTP_RES:"GOT_HTTP_RES",GOT_SERVER_INFO:"GOT_SERVER_INFO",SERVER_CONNECTED:"SERVER_CONNECTED",NEED_INPUT_ID:"NEED_INPUT_ID",ROLE_INFO_SUCCESS:"ROLE_INFO_SUCCESS",ROLE_ATTRIBUTE_UPDATED:"ROLE_ATTRIBUTE_UPDATED",SERVER_RESPONSE:"SERVER_RESPONSE",SERVER_VERSION:"SERVER_VERSION",POP_ADDED:"POP_ADDED",POP_REMOVED:"POP_REMOVED",POP_FADED:"POP_FADED",RECOMMEND_GAME:"RECOMMEND_GAME"},"MORE_GAME","MORE_GAME"),a(i,"SIGN_IN_SUC","SIGN_IN_SUC"),a(i,"RANK_LIST","RANK_LIST"),a(i,"EFFECT_CHANGE","EFFECT_CHANGE"),a(i,"VOICE_CHANGE","VOICE_CHANGE"),a(i,"TRACK_UNLOCK_CLOSE","TRACK_UNLOCK_CLOSE"),a(i,"SHARE_AD_SUC","SHARE_AD_SUC"),a(i,"COLLECT_GET_REWARD","COLLECT_GET_REWARD"),a(i,"SIGN_CLOSE","SIGN_CLOSE"),a(i,"HOME_RECOMMEND","HOME_RECOMMEND"),a(i,"CAN_FREE_BUY_CAR","CAN_FREE_BUY_CAR"),a(i,"DAILY_SHARE_CLICK","DAILY_SHARE_CLICK"),a(i,"INVITE_FRIEND_CLOCK","INVITE_FRIEND_CLOCK"),a(i,"RESULT_RECOMMEND","RESULT_RECOMMEND"),a(i,"GUIDE_SHOW_BUY","GUIDE_SHOW_BUY"),a(i,"GUIDE_SHOW_COMPOSE","GUIDE_SHOW_COMPOSE"),a(i,"GUIDE_SHOW_MOVETO_TRACK","GUIDE_SHOW_MOVETO_TRACK"),a(i,"GUIDE_SHOW_RECOVER_CAR","GUIDE_SHOW_RECOVER_CAR"),a(i,"GUIDE_SHOW_START","GUIDE_SHOW_START"),a(i,"GUIDE_COMPLETED","GUIDE_COMPLETED"),a(i,"GAMESCENE_START","GAMESCENE_START"),a(i,"PROP_CLOSE","PROP_CLOSE"),a(i,"GET_FUNC_OPEN","GET_FUNC_OPEN"),a(i,"ADVENTURE_UPDATE","ADVENTURE_UPDATE"),a(i,"ADVENTURE_UPDATE_PHY","ADVENTURE_UPDATE_PHY"),a(i,"SCENE_CHANGED","SCENE_CHANGED"),a(i,"PARK_LEFT_CHANGED","PARK_LEFT_CHANGED"),a(i,"ADD_NEW_CAR_TIP","ADD_NEW_CAR_TIP"),a(i,"UPDATE_FULL_TIP","UPDATE_FULL_TIP"),a(i,"UNLOCK_NEW_SCENE","UNLOCK_NEW_SCENE"),a(i,"BACK_MAIN","BACK_MAIN"),a(i,"GO_LEVEL","GO_LEVEL"),a(i,"BULLET_USED","BULLET_USED"),a(i,"BULLET_SHOTED","BULLET_SHOTED"),a(i,"GO_NEXT","GO_NEXT"),a(i,"SKIP","SKIP"),a(i,"FAILURE","FAILURE"),a(i,"FAILURE_BUY_KILL","FAILURE_BUY_KILL"),a(i,"FUNCOPEN_UPDATE","FUNCOPEN_UPDATE"),a(i,"RELOAD_LEVEL","RELOAD_LEVEL"),a(i,"ROLE_SELECTED","ROLE_SELECTED"),a(i,"ENERGY_NEEDED","ENERGY_NEEDED"),a(i,"SKIN_WATCHED","SKIN_WATCHED"),a(i,"CHARACTER_INFO","CHARACTER_INFO"),a(i,"CHARACTER_GOT","CHARACTER_GOT"),a(i,"WX_REGISTERED","WX_REGISTERED"),a(i,"GUIDE_CLOSED","GUIDE_CLOSED"),a(i,"GUIDE_CLEAR","GUIDE_CLEAR"),a(i,"KILLED","KILLED"),a(i,"LEVEL_ADDED","LEVEL_ADDED"),a(i,"UPDATE_COLLECT_SHOW","UPDATE_COLLECT_SHOW"),a(i,"INIT_ROLEINFO_COMPLETED","INIT_ROLEINFO_COMPLETED"),a(i,"GAME_OPEN_NEWBIE_INVITE","GAME_OPEN_NEWBIE_INVITE"),a(i,"GAME_OPEN_DAILY_INVITE","GAME_OPEN_DAILY_INVITE"),a(i,"INVITE_UPDATE_DAILY","INVITE_UPDATE_DAILY"),a(i,"UPDATE_HOVER_SHOW","UPDATE_HOVER_SHOW"),a(i,"SHOW_SKIP_PAGE","SHOW_SKIP_PAGE"),a(i,"LOGININFO_GOT","LOGININFO_GOT"),a(i,"CPA_JUMPED","CPA_JUMPED"),i);o.exports=s,cc._RF.pop()},{}],MoreGameItemOne:[function(e,t,n){"use strict";cc._RF.push(t,"bb2c3XLpqlORKbjbwM4wM0X","MoreGameItemOne");var i=e("MoreGameManager"),o=e("AnalyticsUtilities").AnalyticsUtilities;cc.Class({extends:cc.Component,properties:{iconImg:cc.Sprite,nameL:cc.Label,countL:cc.Label,startC:0,endC:0,count:0,pointL:cc.Label,getNode:cc.Node},onLoad:function(){},setupItemData:function(e){if(this.data=e,e&&e.name){this.node.active=!0;var t=e.name;if(void 0!=t&&(this.nameL.string=t),e.icon&&0==e.icon.indexOf("http")){var n=this;cc.loader.load({url:e.icon,type:"png"},function(e,t){n.iconImg&&t&&(n.iconImg.spriteFrame=new cc.SpriteFrame(t))})}}else this.node.active=!1},update:function(){},btnGoGameOnClick:function(e){1==e&&o.logEvent("\u4e3b\u754c\u9762_\u66f4\u591a\u6e38\u620f",{appId:this.data.appId});var t=this.data.appId,n=this.data.extra;t&&i.navigateToMiniProgram(t,n)}}),cc._RF.pop()},{AnalyticsUtilities:"AnalyticsUtilities",MoreGameManager:"MoreGameManager"}],MoreGameManager:[function(e,t,n){"use strict";cc._RF.push(t,"c82565WzYtIY75m/zF8kaT5","MoreGameManager");t.exports={};var i=t,o=e("Network"),a=(e("GameConfig"),{requestMoreGameList:function(e){},navigateToMiniProgram:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";wx.getSystemInfo({success:function(n){if(e){var i={appId:"wxf88c93d96e079e42",devModel:n.model,devBrand:n.brand,gameVersion:window.gameVersion,WXVersion:n.version,SDKVersion:n.SDKVersion,system:n.system,benchmarkLevel:n.benchmarkLevel,lan:n.language,tAppId:e,uId:window.facade.getComponent("PlayerModel").userId};wx.navigateToMiniProgram({appId:e,path:t,success:function(){i.result=1,o.postRequest("https://games.qdos.com/open/api/record","p="+JSON.stringify(i),{success:function(e){},failure:function(e){}})},fail:function(e){i.result=2,i.errMsg=e,o.postRequest("https://games.qdos.com/open/api/record","p="+JSON.stringify(i),{success:function(e){},failure:function(e){}})}})}}})},initRecommendItems:function(e){this.requestMoreGameList(function(t){for(var n=0;n<e.length;n++)e[n].getComponent("RecommendGameItem").setupItemData(JSON.parse(JSON.stringify(t[n])))})},updateRecommendItems:function(e){this.requestMoreGameList(function(t){for(var n=0;n<e.length;n++)for(var i=0;i<t.length;i++){var o=e[n],a=t[i];if(!o.getComponent("RecommendGameItem").isInHistory(a))return void o.getComponent("RecommendGameItem").setupItemData(a)}})},getData:function(){return this._data}});i.exports=a,cc._RF.pop()},{GameConfig:"GameConfig",Network:"Network"}],MoreGame:[function(e,t,n){"use strict";var i;function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}cc._RF.push(t,"82792L6lzxNDoW+gsddwrMl","MoreGame");var a=e("MoreGameManager");cc.Class((o(i={extends:cc.Component,properties:{scrollView:cc.Node,itemNode:cc.Node,listNode:cc.Node,bg:cc.Node},initData:function(){var e=this;a.requestMoreGameList(function(t){e.boxList=t,e.showMoreGameList()})},onLoad:function(){this.initData()},onDisable:function(){},onEnable:function(){this.node.active=!0}},"onDisable",function(){this.node.active=!1}),o(i,"showMoreGameList",function(){this.listNode.active=!0,this.node.width;for(var e=0;e<this.boxList.length;e++){var t=cc.instantiate(this.itemNode);t.active=!0,t.getComponent("MoreGameItemOne").setupItemData(this.boxList[e]),this.scrollView.addChild(t)}}),o(i,"closeHandler",function(){this.node.active=!1}),o(i,"openHandler",function(){this.node.active=!this.node.active}),i)),cc._RF.pop()},{MoreGameManager:"MoreGameManager"}],MoveBlock:[function(e,t,n){"use strict";cc._RF.push(t,"3b772fRSC9Inax8SQL1xPqD","MoveBlock"),cc.Class({extends:cc.Component,properties:{vertical:{default:!0},horizontal:{default:!1},moveRangeY:100,moveRangeX:100,speed:.5},onLoad:function(){},start:function(){this.originPos=this.node.position,this.rangePos=this.originPos.clone(),this.vertical?this.rangePos.y+=this.moveRangeY:this.rangePos.x+=this.moveRangeX,this.rangeDis=this.rangePos.sub(this.originPos).mag(),this.normalizeVec=this.rangePos.sub(this.originPos).normalizeSelf(),this.dir=1},update:function(e){var t=this.originPos.sub(this.node.position).mag(),n=this.rangePos.sub(this.node.position).mag();t>this.rangeDis?this.dir=-1:n>this.rangeDis&&(this.dir=1),this.node.x+=this.normalizeVec.x*this.speed*this.dir,this.node.y+=this.normalizeVec.y*this.speed*this.dir}}),cc._RF.pop()},{}],Net:[function(e,t,n){"use strict";cc._RF.push(t,"e2a6923pGVIh5GYR0jcVxsZ","Net");var i=e("ModuleEventEnum");cc.Class({extends:cc.Component,properties:{},onLoad:function(){this.init()},start:function(){},init:function(){this.node.TIME_ZONE_OFFSET=-28800,this.inSocketErr=!1,this.inConnecting=!1,this._httpConnector=this.node.getComponent("HttpConnector"),setInterval(this.sendHeart.bind(this),3e4)},fakeLogin:function(){this.node.getComponent("FakeInfoLogic")||(this.node.addComponent("FakeInfoLogic"),this.node.getComponent("FakeInfoLogic").init()),this.node.getComponent("FakeInfoLogic").fakeLogin()},connect:function(e){this._connector.connect(e)},send:function(e){this._connector.send(e)},close:function(){this.inConnecting=!1,this._connector.close()},onConnected:function(){console.log("server connect..."),this.inError=!1,this.inConnecting=!0,cc.systemEvent.emit(i.SERVER_CONNECTED)},updateServerTime:function(e){this.serverTimeSec=e.currTs,this.serverTimeMs=e.currMs,this.serverLaunchMs=e.runTs,this._timeUpdateFlag=(new Date).getTime(),this._canSendHeart=!0},getServerLaunchMs:function(){var e=(new Date).getTime()-this._timeUpdateFlag;return this.serverLaunchMs+e},getServerTimeSec:function(){var e=(new Date).getTime()-this._timeUpdateFlag;return Math.floor(this.serverTimeSec+e/1e3)},getServerToday0Clock:function(){var e=new Date(1e3*window.net.getComponent("Net").getServerTimeSec());return e.setHours(0,0,0,0),Math.floor(e.getTime()/1e3)},onResponse:function(e){switch(console.log("onResponse:",JSON.stringify(e)),e.messageName=e.GetMessageName(),e.messageName){case"Message_login.GCResHeartMessage":this.updateServerTime(e)}cc.systemEvent.emit(i.SERVER_RESPONSE,e)},sendHeart:function(){if(console.log("sendHeart..."),this._canSendHeart){var e=new Message_login.CGReqHeartMessage;e.ctor(this.getServerLaunchMs()),window.net.getComponent("Net").send(e)}},httpRequest:function(e,t){t.hasOwnProperty("token")&&void 0==t.token||this._httpConnector.request(e,t)},requestQQApi:function(e,t){t||(t={}),t.appid=window.facade.qqAppId,t.openid=window.facade.openId,t.openkey=window.facade.openKey,t.pf=window.facade.pF,t.format="json",this._httpConnector.requestQQApi(e,t)},behaveReport:function(e){this._httpConnector.behaveReport(e)},appLinkReport:function(e){this._httpConnector.appLinkReport(e)},requestUrl:function(e,t,n,i,o){this._httpConnector.requestUrl(e,t,n,i,o)},socketErrorDeal:function(){this.inConnecting=!1,this.inError=!0,this.node.runAction(cc.sequence(cc.delayTime(1),cc.callFunc(this.alertNetError,this)))},alertNetError:function(){"Title"!=window.facade.CurrentScene&&this.inError&&window.popUp.getComponent("Pop").addAlert("\u7f51\u7edc\u597d\u50cf\u51fa\u95ee\u9898\u4e86\u54e6\uff01\u70b9\u201c\u786e\u8ba4\u201d\u91cd\u65b0\u767b\u5f55\u8bd5\u8bd5\u5427~",function(){window.facade.reEnter=!0,window.popUp.getComponent("Pop").reset(),cc.systemEvent.emit(i.RE_ENTERED,!0)},!1)}}),cc._RF.pop()},{ModuleEventEnum:"ModuleEventEnum"}],Network1:[function(e,t,n){"use strict";cc._RF.push(t,"ae8ccTMnw5Jo7BCZT8puGT+","Network1");t.exports={};var i={getRequest:function(e,t,n){var i=new XMLHttpRequest;i.onreadystatechange=function(e){if(4==i.readyState&&i.status>=200&&i.status<300){var t=JSON.parse(i.responseText);n.success&&n.success(t)}}.bind(this),i.onerror=function(e){n.failure()&&n.failure(e)},i.open("GET",e,!1),i.send(t)},postRequest:function(e,t,n){var i=new XMLHttpRequest;i.onreadystatechange=function(e){if(4==i.readyState&&i.status>=200&&i.status<300){var t=JSON.parse(i.responseText);0!=t.code?n.failure&&n.failure(t.code):n.success&&n.success(t.data)}}.bind(this),i.onerror=function(e){n.failure()&&n.failure(e)},i.open("POST",e,!1),i.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),i.send(t)},saveGameData:function(e){var t=window.Config.RECORD_SAVE;e.value=0==e.value?-1:e.value,e.value=JSON.stringify(e.value);var n="record_type="+e.key+"&record="+e.value;this.postRequest(t,n,{success:function(t){e.suc(t)},failure:function(t){e.fail&&e.fail(t)}})},getGameData:function(e){var t=window.Config.RECORD_GET,n="record_type="+e.key;this.postRequest(t,n,{success:function(t){t.record=JSON.parse(t.record),t.record=-1==t.record?0:t.record,e.suc(t)},failure:function(t){e.fail&&e.fail(t)}})}};t.exports=i,cc._RF.pop()},{}],Network:[function(e,t,n){"use strict";cc._RF.push(t,"5af39uL7I1I8o6u+xkxZo9F","Network");t.exports={};var i={getRequest:function(e,t,n){var i=new XMLHttpRequest;i.onreadystatechange=function(e){if(4==i.readyState&&i.status>=200&&i.status<300){var t=JSON.parse(i.responseText);n.success&&n.success(t)}}.bind(this),i.onerror=function(e){n.failure()&&n.failure(e)},i.open("GET",e,!1),i.send(t)},postRequest:function(e,t,n){var i=new XMLHttpRequest;i.onreadystatechange=function(e){if(4==i.readyState&&i.status>=200&&i.status<300){var t=JSON.parse(i.responseText);0!=t.code?n.failure&&n.failure(t.code):n.success&&n.success(t.data)}}.bind(this),i.onerror=function(e){n.failure()&&n.failure(e)},i.open("POST",e,!1),i.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),i.send(t)},saveGameData:function(e){var t=window.Config.RECORD_SAVE;e.value=0==e.value?-1:e.value,e.value=JSON.stringify(e.value);var n="record_type="+e.key+"&record="+e.value;this.postRequest(t,n,{success:function(t){e.suc(t)},failure:function(t){e.fail&&e.fail(t)}})},getGameData:function(e){var t=window.Config.RECORD_GET,n="record_type="+e.key;this.postRequest(t,n,{success:function(t){t.record=JSON.parse(t.record),t.record=-1==t.record?0:t.record,e.suc(t)},failure:function(t){e.fail&&e.fail(t)}})}};t.exports=i,cc._RF.pop()},{}],NewerView:[function(e,t,n){"use strict";cc._RF.push(t,"f4556TLwwdJvJjT6mi4rpWe","NewerView"),cc.Class({extends:cc.Component,properties:{takeBtn:cc.Node,iconType:cc.Sprite,iconVideoFrame:cc.SpriteFrame,iconShareFrame:cc.SpriteFrame},onLoad:function(){},start:function(){this.rewardType=window.facade.getComponent("ShareADModel").getShareADType(),2!=this.rewardType?(this.iconType.spriteFrame=this.iconVideoFrame,this.type="Video"):(this.iconType.spriteFrame=this.iconShareFrame,this.type="Share")},initData:function(){},doClose:function(){window.facade.getComponent("GameModel").newerRewardCancelCount++,window.facade.getComponent("GameModel").passLevelCount=0},takeAward:function(){window.facade.getComponent("ShareADModel").showShareAD({inviteId:1535,videoId:21107,assistId:0,interstitalId:31109},{succ:function(e){this.takeAwardSuccess()}.bind(this),fail:function(e,t){popUp.getComponent("FloatTip").showTip(e)}.bind(this)})},takeAwardSuccess:function(){window.facade.getComponent("GameModel").takeNewerReward(),window.facade.getComponent("GameModel").newerRewardCancelCount--,popUp.getComponent("Pop").removeTop()}}),cc._RF.pop()},{}],NextLoginView:[function(e,t,n){"use strict";cc._RF.push(t,"1014b8fE5BCo5l10Ujpz+5B","NextLoginView"),e("ModuleEventEnum"),cc.Class({extends:cc.Component,properties:{takeBtn:cc.Node,tipBtn:cc.Node},onLoad:function(){},start:function(){var e=window.facade.getComponent("GameModel").firstLoginTime1,t=window.facade.getComponent("GameModel").gotNextReward;!t&&(new Date).getTime()-e>864e5?(this.takeBtn.active=!0,this.tipBtn.active=!1):(this.takeBtn.active=!1,this.tipBtn.active=!0),t&&(this.takeBtn.active=!1)},initData:function(){},takeAward:function(){window.facade.getComponent("GameModel").takeNextReward(),popUp.getComponent("Pop").removeTop()}}),cc._RF.pop()},{ModuleEventEnum:"ModuleEventEnum"}],OneShotUI:[function(e,t,n){"use strict";cc._RF.push(t,"36bbc6FyzdPE6mejvUiTSvD","OneShotUI");var i=e("ModuleEventEnum");cc.Class({extends:cc.Component,properties:{result:cc.Node,levelLabel:cc.Label,backBtn:cc.Node,cupLabel:cc.Node},onLoad:function(){cc.systemEvent.on(i.BULLET_SHOTED,this.bulletShoted,this),cc.systemEvent.on(i.LEVEL_SHOT_BULLET_USE,this.bulletUsed,this),cc.systemEvent.on(i.LEVEL_SHOT_PASSED,this.onLevelShotPassed,this),cc.systemEvent.on(i.SHOT_NOW_OVER_SHOW,this.levelShotShowTotal,this)},start:function(){this.init(),cc.director.getScene().getChildByName("Canvas").getChildByName("recommendBar").zIndex=1e3},init:function(){this.passed=!1,this.failed=!1,console.log("levelUI init..."),this.result.active=!1,this.cupLabel.getComponent("TextureLabel").setText(String(window.facade.getComponent("GameModel").cupNumData)),this.levelLabel.string="\u7b2c"+window.facade.getComponent("GameModel").oneShotLevel+"\u5173"},onGuideClosed:function(){if("classic"==facade.selectedLevelType){this.finger=cc.director.getScene().getChildByName("Canvas").getChildByName("levelPlay").getChildByName("finger"),this.finger.active=!0;var e=cc.rotateTo(.8,-30),t=cc.rotateTo(.8,0);e.easing(cc.easeSineOut()),t.easing(cc.easeSineIn()),this.finger.runAction(cc.sequence(cc.repeat(cc.sequence(e,t),3),cc.fadeOut(.5)))}},checkGuide:function(){window.facade.getComponent("LevelModel").playingLevel>1||window.facade.getComponent("LevelModel").isNewLevel()&&popUp.getComponent("Pop").addPopByName("Guide"+facade.selectedLevelType,null,!0,!0)},bulletShoted:function(){window.audio.getComponent("SoundManager").playEffect("empty")},bulletUsed:function(){if(window.facade.getComponent("LevelModel").lastBullets<=0){if(this.passed)return;this.failure()}},isBulletFlying:function(){for(var e=cc.director.getScene().getChildByName("Canvas").getChildByName("levelPlay").getChildren(),t=0;t<e.length;t++)if(e[t].name.match("bullet"))return!0;return!1},backMain:function(){this.isBulletFlying()||cc.systemEvent.emit(i.BACK_MAIN)},retry:function(){window.facade.getComponent("LevelModel").resetLevel(),cc.systemEvent.emit(i.RELOAD_LEVEL)},onFailureKill:function(){this.node.stopAllActions(),this.failure(!0)},failure:function(e){cc.director.getScene().getChildByName("Canvas").getComponent("GameLogic").hasPassed&&!e||this.failed||(20!=window.facade.getComponent("GameModel").oneShotLevel?(cc.systemEvent.emit(i.FAILURE),window.facade.getComponent("LevelModel").resultLevel=window.facade.getComponent("LevelModel").playingLevel,this.failed=!0,this.showResult(!1)):this.levelShotShowTotal())},onLevelShotPassed:function(e){this.node.stopAllActions(),this.passed=!0,popUp.getComponent("FloatTip").showTip("\u6311\u6218\u80dc\u5229")},levelShotShowTotal:function(){this.showResult(!0)},showResult:function(e){this.backBtn.active=!0,cc.director.getScene().getChildByName("Canvas").getChildByName("recommendBar").zIndex=1,0!=e&&(e=!0),this.result.active=!0,this.result.getComponent("ResultShotOne").init(e)},getThreeStarOrJumpResult:function(e){2!=e&&(this.backBtn.active=!0,cc.director.getScene().getChildByName("Canvas").getChildByName("recommendBar").zIndex=1,this.result.active=!0,this.result.getComponent("ResultPanel").take3StarGet())},showSkip:function(){this.skipBtn.active=!1,this.retryBtn.active=!1,this.skipPanel.active=!0,this.skipPanel.opacity=0,this.skipPanel.runAction(cc.fadeIn(.2)),this.skipPanel.getComponent("SkipPanel").init()},hideSkip:function(){this.skipBtn.active=!0,this.retryBtn.active=!0,this.skipPanel.active=!1,this.bulletsBox.getChildren().length<=0&&this.retry()},update:function(e){this.align()},align:function(){if(!this.reAligned){var e=this.node.getChildren();if(window.facade.Screenratio&&window.facade.Screenratio<.47){for(var t=0;t<e.length;t++)"resultPanel"!=e[t].name&&"skipPanel"!=e[t].name&&e[t].getComponent(cc.Widget)&&(e[t].getComponent(cc.Widget).top+=50,e[t].getComponent(cc.Widget).updateAlignment());this.reAligned=!0}}}}),cc._RF.pop()},{ModuleEventEnum:"ModuleEventEnum"}],Pays:[function(e,t,n){"use strict";cc._RF.push(t,"3e997ojAtJJqoWe0Chbx6GJ","Pays");e("Game");var i=e("HttpUtil");cc.Class({extends:cc.Component,properties:{webviewNode:cc.Node,WebView:cc.WebView,priceEdiBox:cc.EditBox,maskNode:cc.Node},onSubmitPay:function(e,t){if(e.stopPropagation(),"0"==t){if(""==(t=this.priceEdiBox.string))return void popUp.getComponent("FloatTip").showTip("\u91d1\u989d\u4e0d\u80fd\u4e3a\u7a7a\uff01");this.priceEdiBox.string=""}var n=JSON.parse(cc.sys.localStorage.getItem("userInfo"));this.webviewNode.active=!0,this.WebView.url="https://igamesland.com/pay?goodsName=gold&price="+t+"&user_id="+n.id},onClosePay:function(e){e.stopPropagation(),this.webviewNode.active=!1,this.WebView.url="",this.getuserinfo()},closeshop:function(e){cc.find("Canvas/ShopMask").destroy()},onstopPropagation:function(e){e.stopPropagation()},onLoadShopView:function(){cc.loader.loadRes("ui/ShopMask",function(e,t){var n=cc.instantiate(t);cc.director.getScene().getChildByName("Canvas").addChild(n)})},getuserinfo:function(){var e=JSON.parse(cc.sys.localStorage.getItem("userInfo"));i.request("user/info",{user_id:e.id},"GET",function(e,t){if(e)self.showTip(e);else if(200==t.status){cc.log("info===",t);var n=t.result.gold,i=JSON.parse(cc.sys.localStorage.getItem("Shooter_GameData"));i.cash=window.facade.getComponent("GameModel").cash=Number(n),cc.sys.localStorage.setItem("Shooter_GameData",JSON.stringify(i))}else cc.log("getuserinfo===",t.message)})}}),cc._RF.pop()},{Game:"Game",HttpUtil:"HttpUtil"}],Pitcher:[function(e,t,n){"use strict";cc._RF.push(t,"5ff50GxvZVF9Ii7D2BAPZ49","Pitcher"),e("MathUtils"),cc.Class({extends:cc.Component,properties:{handGun:cc.Node,grenadePre:cc.Prefab,powerLine:cc.Node,powerPoint:cc.Node,grenadeInHand:cc.Node,isInUI:!1,hand:cc.Node},onLoad:function(){this.isInUI||(this.aim=new cc.Node,this.aim.addComponent(cc.Sprite),this.aim.getComponent(cc.Sprite).spriteFrame=cc.loader.getRes("roles",cc.SpriteAtlas).getSpriteFrame("aim"),this.handGun.addChild(this.aim,999),this.aim.active=!1,this.aim.scale=.5,this.aim.y=10)},start:function(){this.node.parent.on(cc.Node.EventType.TOUCH_START,this.onTouchStart,this),this.node.parent.on(cc.Node.EventType.TOUCH_MOVE,this.onTouchMove,this),this.node.parent.on(cc.Node.EventType.TOUCH_END,this.onTouchEnd,this),this.node.parent.on(cc.Node.EventType.TOUCH_CANCEL,this.onTouchCancel,this),this.powerPoints=[]},onEnable:function(){this.node.parent.on(cc.Node.EventType.TOUCH_START,this.onTouchStart,this),this.node.parent.on(cc.Node.EventType.TOUCH_MOVE,this.onTouchMove,this),this.node.parent.on(cc.Node.EventType.TOUCH_END,this.onTouchEnd,this),this.node.parent.on(cc.Node.EventType.TOUCH_CANCEL,this.onTouchCancel,this)},onDisable:function(){this.node.parent.off(cc.Node.EventType.TOUCH_START,this.onTouchStart,this),this.node.parent.off(cc.Node.EventType.TOUCH_MOVE,this.onTouchMove,this),this.node.parent.off(cc.Node.EventType.TOUCH_END,this.onTouchEnd,this),this.node.parent.off(cc.Node.EventType.TOUCH_CANCEL,this.onTouchCancel,this)},onDestroy:function(){this.node.parent.off(cc.Node.EventType.TOUCH_START,this.onTouchStart,this),this.node.parent.off(cc.Node.EventType.TOUCH_MOVE,this.onTouchMove,this),this.node.parent.off(cc.Node.EventType.TOUCH_END,this.onTouchEnd,this),this.node.parent.off(cc.Node.EventType.TOUCH_CANCEL,this.onTouchCancel,this)},onTouchStart:function(e){var t=e.getLocation();this._inTouch=!0,this.gunPos=this.handGun.convertToWorldSpaceAR(cc.v2()),this.gunDir=t.sub(this.gunPos);var n=this.gunDir.signAngle(cc.v2(1,0));this.handGun.angle=-n/Math.PI*180,this.powerLine&&(this.powerLine.active=!0)},onTouchMove:function(e){var t=e.getLocation();if(this._inTouch){this.gunPos=this.handGun.convertToWorldSpaceAR(cc.v2()),this.gunDir=t.sub(this.gunPos),this.gunDis=this.gunDir.mag();var n=this.gunDir.signAngle(cc.v2(1,0));this.handGun.angle=-n/Math.PI*180,this.aim&&(this.aim.active=!0,this.aim.x=this.gunDis);for(var i=0;i<this.powerPoints.length;i++)this.powerPoints[i].removeFromParent();this.powerPoints=[];var o=(this.gunDis-150)/30;for(o>12&&(o=12),i=0;i<o;i++){var a=cc.instantiate(this.powerPoint);this.powerLine.addChild(a),this.powerPoints.push(a),a.scale=1+.25*i}}},onTouchEnd:function(e){this.isInUI?this.createAGrenade():(this.aim&&(this.aim.active=!1),window.facade.getComponent("Facade").levelPassed||(facade.getComponent("LevelModel").shotedBullets>=facade.getComponent("LevelModel").bulletFilled?window.audio.getComponent("SoundManager").playEffect("empty"):(this.createAGrenade(),window.facade.getComponent("LevelModel").shotABullet(),this.powerLine&&(this.powerLine.active=!1),this.pitchAction())))},pitchAction:function(){this.grenadeInHand.active=!1;var e=cc.rotateBy(.5,360);e.easing(cc.easeSineOut()),this.handGun.runAction(cc.sequence(e,cc.callFunc(function(){this.grenadeInHand.active=!0},this)))},createAGrenade:function(){var e=cc.instantiate(this.grenadePre);e.position=this.node.parent.convertToNodeSpaceAR(this.hand.convertToWorldSpaceAR(cc.v2()));var t=this.gunDir.normalizeSelf();this.node.parent.addChild(e),e.getComponent(cc.RigidBody).applyForceToCenter(t.mulSelf(300*this.powerPoints.length)),this._inTouch=!1},onTouchCancel:function(e){e.getLocation(),this._inTouch=!1,this.handGun.angle=-90,this.powerLine&&(this.powerLine.active=!1),this.aim&&(this.aim.active=!1)},update:function(e){}}),cc._RF.pop()},{MathUtils:"MathUtils"}],PlayerModel:[function(e,t,n){"use strict";cc._RF.push(t,"df6037eLmNDUbR4V2RaPJmY","PlayerModel");var i=e("ModuleEventEnum");cc.Class({extends:cc.Component,properties:{},initConfig:function(){},onLoad:function(){this.userObject=null,this.rewardTplId=null,this.inviteTypeId=null,this.node.addComponent("WxAdaptor"),this.wxAdaptor=this.node.getComponent("WxAdaptor"),facade.isMiniGame&&(this.wxAdaptor.init(this),cc.systemEvent.on(i.GOT_HTTP_RES,this.httpResDeal.bind(this)),facade.isMiniGame&&(cc.systemEvent.on(i.WX_REGISTERED,this.onGotToken.bind(this)),cc.systemEvent.on(i.INIT_ROLEINFO_COMPLETED,this.onRoleInfo,this)))},onGotToken:function(){var e={game_id:window.facade.GameId,token:this.token};window.net.getComponent("Net").httpRequest(window.net.Setting,e),this.checkFuncOpen()},onRoleInfo:function(){this.wxAdaptor.checkBroadcastReward()},httpResDeal:function(e){if(e&&e.data){var t=e.data;t.extra_config&&t.extra_config.online_version&&this.checkVersion(t.extra_config.online_version),t[0]&&t[0].func_id&&(this.addFuncOpenList(t),window.facade.getFunc=!0)}},checkFuncOpen:function(){var e={};e.game_id=window.facade.GameId,e.token=this.token,window.net.getComponent("Net").httpRequest(window.net.CheckFuncOpen,e)},gotServerData:function(e){this.servers=e,cc.systemEvent.emit(i.GOT_SERVER_INFO)},checkVersion:function(e){this.verisonValue=Number(e),this.verisonValue<facade.VERSION?facade.SAVE_MODE=!0:facade.SAVE_MODE=!1,cc.systemEvent.emit(i.SAVE_MODE_CHANGE)},addNoticeData:function(e){this.noticeImgs=e},addFuncOpenList:function(e){for(var t in console.log("func opens:",e),this.funcList={},this.funcParams={},e)this.funcList[e[t].func_id]=e[t].is_open,this.funcParams[e[t].func_id]=e[t].func_params;cc.systemEvent.emit(i.FUNCOPEN_UPDATE)},isIntersADOpen:function(){return!!this.funcList&&!(!this.funcList[11]||"1"!=this.funcList[11])},isIconRandomOrder:function(e){var t=17;switch(e){case"result":t=15;break;case"interstitial":t=16;break;case"bottom":t=17;break;case"banner":t=18}return!!this.funcList&&!(!this.funcList[t]||"1"!=this.funcList[t])},checkVirBannerShow:function(e){if(!facade.SAVE_MODE){if(!this.funcList||!this.funcList[10]||"1"!=this.funcList[10])return!1;var t=this.funcParams[10].split(",");for(var n in t)if(t[n]===String(facade.uiNames[e]))return!0;return!1}},getRecommondType:function(){return!!this.funcList&&!(!this.funcList[12]||"1"!=this.funcList[12])},getRecommondCount:function(){return this.funcParams&&this.funcParams[12]?Number(this.funcParams[12]):19},getBottomRecommondRandomCount:function(){return this.funcParams&&this.funcParams[17]?Number(this.funcParams[17]):0},getInterstiRecommondRandomCount:function(){return this.funcParams&&this.funcParams[16]?Number(this.funcParams[16]):0},getResultRecommondRandomCount:function(){return this.funcParams&&this.funcParams[15]?Number(this.funcParams[15]):0},getBannerRecommondRandomCount:function(e){if(!this.funcParams||!this.funcParams[18])return 0;null==this.virBannerList&&(this.virBannerList=this.funcParams[18].split(","));var t=[];t=t.concat(e);for(var n=0;n!=this.virBannerList.length;){var i=parseInt(this.virBannerList[n]),o=t.splice(0,i);if(this.checkItem(o),console.log("checklist is : ",o),n++,0!=o.length)return o}return parseInt(this.virBannerList[n-1])},checkItem:function(e){for(var t=0;t!=e.length;)e[t].navout_cnt>0?e.splice(t,1):t++},isClickCountLimit:function(e){if(!this.funcParams)return!1;if(!this.funcParams[14])return!1;for(var t=this.funcParams[14].split(","),n=0;n<t.length;n++)if(t[n]==String(e))return!0;return!1},isLoginInterOpen:function(){if(!this.funcParams)return!1;if(!this.funcParams[13])return!1;for(var e=this.funcParams[13].split(","),t=facade.channel_id+"_"+facade.channel_sub,n=0;n<e.length;n++)if(t==e[n])return!0;return!1},connectGameServer:function(e){0==e&&facade.isMiniGame&&window.facade.VERSION>this.verisonValue&&(e=facade.SERVER_ID_BETA,facade.SAVE_MODE=!0),this.currentServer=this.servers[e],this.serverAddresss=this.servers[e].websocket,window.net.getComponent("Net").connect(this.serverAddresss)},onConnected:function(){if(console.log("onConnected...1"),facade.isMiniGame||window.facade.inQQ){console.log("onConnected...2"),this._adultType=3,this._osType=null==window.facade.PhoneInfo.system.match("iOS")?1:2;var e=String(this.userId);e=this.serverAddresss.match("wss://")?String(this.userId):String(this.privateUid),this.loginGameServer(e)}else this._adultType=3,this._osType=3,cc.systemEvent.emit(i.NEED_INPUT_ID)},loginGameServer:function(e){var t=1,n=this.wxAdaptor.getAdScource();console.log("got adSource:",n),n&&0!=n&&n.chanId&&(n=n.chanId+"_"+n.subCid,this.wxAdaptor.chanId=null);var i=this.currentServer.id;facade.isMiniGame?(t=1,window.net.getComponent("Net").behaveReport(window.facade.BEHAVE_LOGIN)):window.facade.inQQ&&(t=window.facade.PhoneInfo.system.match("iOS")?3:2);var o=new Message_login.CGReqUserLoginMessage;o.ctor(e,t,this._osType,i,n,this._adultType),window.net.getComponent("Net").send(o)},getTargetRoleInfo:function(e){var t=new Message_role.CSReqViewTargetProfileMessage;t.ctor(e),window.net.getComponent("Net").send(t)},recordRoleProfile:function(){if(this.platUserInfo){var e={game_id:window.facade.GameId,token:this.token,wx_data:this.wxAdaptor.wxEncryptedData,wx_iv:this.wxAdaptor.wxIv};window.net.getComponent("Net").httpRequest(window.net.RefreshUserInfo,e)}},parseRoleData:function(e){for(var t=e,n=0;n<e.attrList.length;n++){var i=e.attrList[n];t[window.facade.PlayerAtrriKeys[i.type]]=i.value}for(n=0;n<e.resList.length;n++)i=e.resList[n],t[window.facade.PlayerAtrriKeys["res"+i.type]]=i.value;return t},updateRoleData:function(e){var t={},n=0,o=0;if(this.roleInfo&&(o=this.roleInfo.level),e.resList)for(var a=0;a<e.resList.length;a++){var s=e.resList[a];t[window.facade.PlayerAtrriKeys["res"+s.type]]=s.value}if(e.attrList)for(a=0;a<e.attrList.length;a++)s=e.attrList[a],t[window.facade.PlayerAtrriKeys[s.type]]=s.value;if(this.roleInfo){var c=!1;for(var r in t)this.roleInfo[r]=t[r],"level"==r&&(n=t[r]),"vip"==r&&t[r],"midAutumnShop"!=r&&"midAutumnRank"!=r||(c=!0);c&&cc.systemEvent.emit(i.TITLE_MIDAUTUMNPOINT),n&&0!=n&&window.facade.getComponent("RankModel").saveScore(n),this.levelChange=this.roleInfo.level-o,cc.systemEvent.emit(i.ROLE_INFO_UPDATED)}}}),cc._RF.pop()},{ModuleEventEnum:"ModuleEventEnum"}],Pool:[function(e,t,n){"use strict";cc._RF.push(t,"8c2bdWWTadN7p+agiTMJjf4","Pool");var i=t,o=cc.Class({ctor:function(){this._pools={}},create:function(e,t,n){var i=this._pools[e];null==i&&(i=new cc.NodePool,this._pools[e]=i);for(var o=0;o<t;o++)0==o?i.put(n):i.put(cc.instantiate(n))},put:function(e,t){var n=this._pools[e];null==n&&(cc.error("\u540d\u4e3a{0}\u7684\u6c60\u5bf9\u8c61\u4e0d\u5b58\u5728,\u65b0\u521b\u5efa\u4e00\u4e2a".format(e)),n=new cc.NodePool,this._pools[e]=n),n.put(t)},get:function(e){var t=this._pools[e];return null==t?(cc.error("\u540d\u4e3a{0}\u7684\u6c60\u5bf9\u8c61\u4e0d\u5b58\u5728".format(e)),null):0==t.size()?null:t.get()},from:function(e){var t=this._pools[e.name];return null==t||0==t.size()?e.parent?(this.create(e.name,1,cc.instantiate(e)),this.get(e.name)):(this.create(e.name,1,e),this.get(e.name)):this.get(e.name)},has:function(e){return null!=this._pools[e]&&0!=this._pools[e].size()},clear:function(e){var t=this._pools[e];null!=t?(t.clear(),cc.error("\u540d\u4e3a{0}\u7684\u6c60\u5bf9\u8c61\u5df2\u6e05\u7a7a".format(e)),delete this._pools[e]):cc.error("\u540d\u4e3a{0}\u7684\u6c60\u5bf9\u8c61\u4e0d\u5b58\u5728".format(e))},clearAll:function(){for(var e in this._pools)this.clear(e)}});i.exports=new o,cc._RF.pop()},{}],Pop:[function(e,t,n){"use strict";cc._RF.push(t,"bb9875TLphPWriapFTUWXk/","Pop");var i=e("ModuleEventEnum"),o=e("VirBannerCtrl");cc.Class({extends:cc.Component,properties:{},onLoad:function(){this.loadedKeys={},this.popList=[],this.modeShowed=!1,this.doAction=!0,cc.loader.loadRes("modeBg",cc.SpriteFrame),this.IN_POOL_POPS={DailyReward:1,DatingEdit:1,LoveSeaLucky:1,VipReward:1,WXRank:1,InfoEdit:1,GoodInfo:1,Alert:1,Claim:1}},reset:function(){this.removeAll(),this.popList=[],this.modeShowed=!1},start:function(){},addAlert:function(e,t,n,i){var o={detailString:e,enterCallBack:t,needCancel:n,animSpeed:i};this.addPopByName("Alert",o,!0,!0)},addGuide:function(e){this.addPopByName("Guide",e,!1,!1)},showCurtainIn:function(){this._curtainType="in",this.curtainDeal()},showCurtainOut:function(e){this._curtainType="out",this._curtainOutFunc=e,this.curtainDeal()},curtainDeal:function(){if(this.changeAniName="spine/zhuanchang",window.facade.deviceLow&&(this.changeAniName="spine_low/zhuanchang_low"),cc.loader.getRes(this.changeAniName,sp.SkeletonData)){var e=cc.loader.getRes(this.changeAniName,sp.SkeletonData);this.curtainResDeal(e)}else cc.loader.loadRes(this.changeAniName,sp.SkeletonData,function(e,t){this.curtainResDeal(t)}.bind(this))},curtianEnded:function(){this.curtainAnimate.getComponent(sp.Skeleton).setCompleteListener(null),"out"==this._curtainType&&this._curtainOutFunc?(this._curtainOutFunc(),this._curtainOutFunc=null):(this.curtainAnimate.removeFromParent(),this.curtainAnimate=null)},curtainResDeal:function(e){if(null==e&&(e=this.curtainRes),this.curtainRes=e,this.curtainAnimate=new cc.Node,this.curtainAnimate.addComponent(sp.Skeleton),this.curtainAnimate.getComponent(sp.Skeleton).skeletonData=e,this.curtainAnimate.getComponent(sp.Skeleton).premultipliedAlpha=!1,cc.director.getScene().getChildByName("Canvas")||cc.director.getScene().runAction(cc.sequence(cc.delayTime(.2),this.curtainResDeal,this)),cc.director.getScene().getChildByName("Canvas").addChild(this.curtainAnimate,1e3),"out"==this._curtainType){var t=cc.find("Canvas");t&&t.pauseSystemEvents(!0),this.curtainAnimate.getComponent(sp.Skeleton).setAnimation(0,"play",!1)}else this.curtainAnimate.getComponent(sp.Skeleton).setAnimation(0,"play2",!1);this.curtainAnimate.getComponent(sp.Skeleton).setCompleteListener(this.curtianEnded.bind(this))},addPopByName:function(e,t,n,i,o,a,s){console.log("addPopByName:",e),this._tempDatas||(this._tempDatas={}),this._tempDatas[e]=null,this.loadingUrls||(this.loadingUrls={});for(var c=0;c<this.popList.length;c++)if(this.popList[c].getName()==e){this._clearOne=this.popList[c],null!=this._clearOne.getComponent(this._clearOne.name).doClose&&this._clearOne.getComponent(this._clearOne.name).doClose(),this.clearPop();break}if(null==i&&(i=!0),this.doAction=0!=o,this.loadedKeys[e]||cc.loader.getRes("pfb/"+e)){var r=cc.loader.getRes("pfb/"+e),l=this.createNew(r,e,t);l.setName(e),this.addPop(l,n,i,a,s)}else this._tempDatas[e]=t,this.showLoading(),this.loadingUrls[e]=!0,cc.loader.loadRes("pfb/"+e,function(t,o){if(this.hideLoading(),this.loadingUrls[e]){delete this.loadingUrls[e];var c=this.createNew(o,e,this._tempDatas[e]);c.setName(e),this.addPop(c,n,i,a,s)}}.bind(this))},showLoading:function(){null==this.loading?(this.loading=new cc.Node,this.loading.addComponent(cc.Sprite),this.loading.getComponent(cc.Sprite).spriteFrame=cc.loader.getRes("modeBg",cc.SpriteFrame),this.loading.scale=100,this.loading.opacity=40,this.loading.addComponent(cc.Button),cc.director.getScene().getChildByName("Canvas").addChild(this.loading,window.facade.PopOrder-1)):this.loading.active=!0},hideLoading:function(){null!=this.loading&&(this.loading.removeFromParent(),this.loading=null),null!=this.loadingAni&&(this.loadingAni.removeFromParent(),this.loadingAni=null)},createNew:function(e,t,n){console.log("createNew:",t);var i=null;return(this.IN_POOL_POPS[t],i=cc.instantiate(e)).getComponent(t)&&n&&i.getComponent(t).initData(n),i},addPop:function(e,t,n,a,s){if(cc.director.getScene()&&cc.director.getScene().getChildByName("Canvas")){if(t&&this.showMode(n),cc.director.getScene().getChildByName("Canvas").addChild(e,window.facade.PopOrder+this.popList.length+1),this.popList.push(e),console.log("addPop:",e.name,e.zIndex),o.inited||o.init(),this.doAction)this.fadeInPop(e,a,s);else{var c=e.getComponent(e.name);c&&null!=c.viewDidAppear&&c.viewDidAppear(),facade.getComponent("PlayerModel").checkVirBannerShow(e.name)&&(o.curShowName=e.name,o.callData())}cc.systemEvent.emit(i.POP_ADDED)}},fadeInPop:function(e,t,n){if(e.fadeType=t,null==n&&(n=cc.v2(0,0)),"top"==t){e.y=2e3;var i=cc.moveTo(.3,n);return i.easing(cc.easeElasticOut(2)),void e.runAction(i)}if("bottom"==t){e.y=-2e3;var o=cc.moveTo(.3,n);return o.easing(cc.easeElasticOut(2)),void e.runAction(o)}e.scale=.1,e.runAction(cc.sequence(cc.scaleTo(.1,1.1),cc.scaleTo(.1,1),cc.callFunc(this.popFadeIn,this)))},popFadeIn:function(e){var t=e.getComponent(e.name);t&&null!=t.viewDidAppear&&t.viewDidAppear(),facade.getComponent("PlayerModel").checkVirBannerShow(e.name)&&(o.curShowName=e.name,o.callData())},showMode:function(e){if(this.modeShowed&&this.mode&&this.mode.parent)return this.mode.opacity=255,this.mode.zIndex=window.facade.PopOrder+this.popList.length+1,void console.log("addMode:",this.mode.zIndex);this.mode=new cc.Node,this.mode.addComponent(cc.Sprite),this.mode.getComponent(cc.Sprite).spriteFrame=cc.loader.getRes("modeBg",cc.SpriteFrame),this.mode.color="#383838",this.mode.scale=100,this.modeShowed=!0,this.mode.runAction(cc.sequence(cc.delayTime(.21),cc.callFunc(function(){this.mode.addComponent(cc.Button),this.mode.on("click",this.modeClick,this),this.modeClose=e}.bind(this)))),cc.director.getScene().getChildByName("Canvas").addChild(this.mode,window.facade.PopOrder)},removeTop:function(){if(!(null==this.popList||this.popList.length<=0)){var e=this.popList[this.popList.length-1];if(this._clearOne=e,this.doAction){var t=0;if(this._clearOne.getComponent(this._clearOne.name)&&null!=this._clearOne.getComponent(this._clearOne.name).closeActTime&&(t=this._clearOne.getComponent(this._clearOne.name).closeActTime),this._clearOne.getComponent(this._clearOne.name)&&null!=this._clearOne.getComponent(this._clearOne.name).doClose&&this._clearOne.getComponent(this._clearOne.name).doClose(),"top"==e.fadeType)return void e.runAction(cc.sequence(cc.delayTime(t),cc.moveBy(.3,cc.v2(0,2e3)),cc.callFunc(this.clearPop,this)));"bottom"==e.fadeType&&e.runAction(cc.sequence(cc.delayTime(t),cc.moveBy(.3,cc.v2(0,-2e3)),cc.callFunc(this.clearPop,this))),e.runAction(cc.sequence(cc.delayTime(t),cc.scaleTo(.1,1.1),cc.scaleTo(.1,0),cc.callFunc(this.clearPop,this)))}else e.runAction(cc.sequence(cc.delayTime(t),cc.callFunc(this.clearPop,this)))}},clearPop:function(){for(var e=0;e<this.popList.length;e++)if(this.popList[e]==this._clearOne){this.popList.splice(e,1);break}o.virBannerNode&&o.virBannerNode.active&&o.hideVirBanner(),this.modeShowed&&this.mode&&this.mode.parent&&(this.mode.zIndex=window.facade.PopOrder+this.popList.length-1),this.releasePop(this._clearOne),this.popList.length<=0&&this.mode&&(this.mode.removeFromParent(),this.mode=null,this.modeShowed=!1,cc.systemEvent.emit(i.POP_REMOVED),facade.getComponent("BannerModel").hideBanner())},removeByName:function(e){if(!(null==this.popList||this.popList.length<=0)){for(var t=null,n=0;n<this.popList.length;n++)if(this.popList[n].name==e){t=this.popList[n];break}if(t)if(this._clearOne=t,this.doAction){var i=0;if(null!=this._clearOne.getComponent(this._clearOne.name).closeActTime&&(i=this._clearOne.getComponent(this._clearOne.name).closeActTime),null!=this._clearOne.getComponent(this._clearOne.name).doClose&&this._clearOne.getComponent(this._clearOne.name).doClose(),"top"==t.fadeType)return void t.runAction(cc.sequence(cc.delayTime(i),cc.moveBy(.3,cc.v2(0,2e3)),cc.callFunc(this.clearPop,this)));"bottom"==t.fadeType&&t.runAction(cc.sequence(cc.delayTime(i),cc.moveBy(.3,cc.v2(0,-2e3)),cc.callFunc(this.clearPop,this))),t.runAction(cc.sequence(cc.delayTime(i),cc.scaleTo(.1,1.1),cc.scaleTo(.1,0),cc.callFunc(this.clearPop,this)))}else this._clearOne.runAction(cc.sequence(cc.delayTime(i),cc.callFunc(this.clearPop,this)))}},getPopByName:function(e){if(null==this.popList||this.popList.length<=0)return!1;for(var t=null,n=0;n<this.popList.length;n++)if(this.popList[n].name==e){t=this.popList[n];break}return t||null},getTop:function(){return this.popList[this.popList.length-1]},getPopComponent:function(e){if(null==this.popList||this.popList.length<=0)return null;for(var t=null,n=0;n<this.popList.length;n++)if(this.popList[n].name==e){t=this.popList[n];break}return t?t.getComponent(e+"JS"):null},removeAll:function(e){for(var t in this.loadingUrls)t!=e&&delete this.loadingUrls[t];for(var n=0;n<this.popList.length;n++)this.popList[n].name!=e&&(null!=this.popList[n].getComponent(this.popList[n].name).doClose&&this.popList[n].getComponent(this.popList[n].name).doClose(),this.releasePop(this.popList[n]),this.popList.splice(n,1),n--);this.popList.length<=0&&this.mode&&(this.mode.removeFromParent(),this.mode=null,this.modeShowed=!1),cc.systemEvent.emit(i.POP_REMOVED)},releasePop:function(e){this.IN_POOL_POPS[e.name]?window.pool.has(e.name)?window.pool.put(e.name,e):window.pool.create(e.name,1,e):(e.removeFromParent(),e.destroy())},modeClick:function(e){this.modeClose&&this.removeTop()},showGoodTip:function(e,t){var n=function(e){for(var t=null,n=0;n<this.popList.length;n++)if("GoodTips"==this.popList[n].getName()){t=this.popList[n];break}return t}.bind(this);window.popUp.getComponent("Pop").addPopByName("GoodTips",e,!1,!1,!0,"top",t),this.node.runAction(cc.sequence(cc.delayTime(.21),cc.callFunc(function(){var e=n();e&&e.runAction(cc.sequence(cc.delayTime(1.5),cc.callFunc(function(){window.popUp.getComponent("Pop").removeByName("GoodTips")}.bind(this))))}.bind(this))))}}),cc._RF.pop()},{ModuleEventEnum:"ModuleEventEnum",VirBannerCtrl:"VirBannerCtrl"}],RankItem:[function(e,t,n){"use strict";cc._RF.push(t,"750a4cPhSxMZYkHDq0Jm6Dl","RankItem"),cc.Class({extends:cc.Component,properties:{rankL:cc.Node,starL:cc.Node,head:cc.Sprite,nameL:cc.Label,rankSF1:cc.SpriteFrame,rankSF2:cc.SpriteFrame,rankSF3:cc.SpriteFrame,rankImgLay:cc.Node,cashLabel:cc.Label},onLoad:function(){this.frameCount=0},start:function(){},initRecommond:function(){},close:function(){},onDisable:function(){},cutNick:function(e){for(var t="",n=0,i=0;i<e.length;i++)if(e.charCodeAt(i)>127||94==e.charCodeAt(i)?n+=2:n++,t+=e[i],n>=5){t+="...";break}return t},setItemData:function(e,t,n,i){this.itemID=t,this.nameL.string=this.cutNick(n.nick_name),console.log("rank sign:",n),n.rankNo<4?(this.rankL.active=!1,this.rankImgLay.active=!0,this.rankImgLay.getComponent(cc.Sprite).spriteFrame=this["rankSF"+n.rankNo]):(this.rankImgLay.active=!1,this.rankL.active=!0,this.rankL.getComponent("TextureLabel").setText(String(n.rankNo))),n.avatar&&n.avatar.length>0?(this.head.node.active=!1,n.avatar,"/132"==n.avatar.slice(-4)&&(n.avatar=n.avatar.substr(0,n.avatar.length-4),n.avatar+="/46"),this.loadHead(n.avatar),this.head.node.active=!0):(this.head.node.active=!1,this.head.node.parent.active=!1);var o=this.getRankCashNum(n.rankNo);this.cashLabel.string="+"+o,2==i?this.starL.getComponent("TextureLabel").setText(String(n.today_best_score)):this.starL.getComponent("TextureLabel").setText(String(n.best_score))},getRankCashNum:function(e){if(0==e)return 0;for(var t=facade.getComponent("ShareADModel").GameConfig.RankReward.Value.split(","),n=0,i=0;i<t.length;i++)if(e<=t[i].split(":")[0]){n=t[i].split(":")[1];break}return n},setSelfItem:function(e){var t=e;this.nameL.string=this.cutNick(t.nick_name),console.log("rank sign:",t),t.rank_order<4?(this.rankL.active=!1,this.rankImgLay.active=!0,this.rankImgLay.getComponent(cc.Sprite).spriteFrame=this["rankSF"+t.rank_order]):(this.rankImgLay.active=!1,this.rankL.active=!0,this.rankL.getComponent("TextureLabel").setText(String(t.rank_order))),!t.avatar&&t.avatar_url&&(t.avatar=t.avatar_url),t.avatar&&t.avatar.length>0?(this.head.node.active=!1,t.avatar,"/132"==t.avatar.slice(-4)&&(t.avatar=t.avatar.substr(0,t.avatar.length-4),t.avatar+="/46"),this.loadHead(t.avatar),this.head.node.active=!0):(this.head.node.active=!1,this.head.node.parent.active=!1);var n=this.getRankCashNum(t.rank_order);this.cashLabel.string="+"+n,t.best_score&&this.starL.getComponent("TextureLabel").setText(String(t.best_score))},loadHead:function(e){textureManager.getComponent("TextureManager").getTextureOneByOne(e,this.head)}}),cc._RF.pop()},{}],RankModel:[function(e,t,n){"use strict";cc._RF.push(t,"5d6b3c7eRZD8YHT+lHpedrA","RankModel");var i=e("ModuleEventEnum");cc.Class({extends:cc.Component,properties:{},onLoad:function(){cc.systemEvent.on(i.GOT_HTTP_RES,this.httpResDeal.bind(this))},httpResDeal:function(e){var t=e.data;t&&t.nick_name?(this.selfdata=t,cc.systemEvent.emit(i.PLAYER_RANK_DATA,this.selfdata)):t&&t[0]&&t[0].best_score?(this.ranks=t,cc.systemEvent.emit(i.RANK_LIST,this.ranks)):t&&t[0]&&t[0].today_best_score&&(this.ranks=t,cc.systemEvent.emit(i.RANK_LIST,this.ranks))},requestRankList:function(e){var t=1;2==e?t=3:1==e&&(t=1);var n={game_id:window.facade.GameId,token:window.facade.getComponent("PlayerModel").token,rank_type:t,score_type:e,region_id:1,page_count:300,page_num:1};window.net.getComponent("Net").httpRequest(window.net.RankList,n)},requestSelfRank:function(e){var t=1;2==e?t=3:1==e&&(t=1);var n={game_id:window.facade.GameId,token:window.facade.getComponent("PlayerModel").token,rank_type:t,score_type:e};window.net.getComponent("Net").httpRequest(window.net.SelfRankData,n)}}),cc._RF.pop()},{ModuleEventEnum:"ModuleEventEnum"}],Rank:[function(e,t,n){"use strict";cc._RF.push(t,"42a6c8+TH1EL705RRFDlmAl","Rank"),e("CommonFunc");var i=e("ModuleEventEnum");cc.Class({extends:cc.Component,properties:{scroll:cc.Node,content:cc.Node,recommendPre:cc.Prefab},onLoad:function(){var e=this;if(this.frameCount=0,facade.isMiniGame){window.facade.getComponent("PlayerModel").wxAdaptor.wxGetUserInfo(),cc.systemEvent.on(i.USER_INFO_ALLOWED,function(){var e=facade.getComponent("PlayerModel").platUserInfo,t={channel:"wx",appId:"wxf88c93d96e079e42",openid:window.facade.getComponent("PlayerModel").userId,nickName:e.nickName,image:e.avatarUrl,score:window.facade.getComponent("LevelModel").getTotalStar()};facade.getComponent("GameModel").postRequest("https://games.qdos.com/game/commit/score","p="+JSON.stringify(t),{success:function(e){console.error(e)}})});var t={appId:"wxf88c93d96e079e42",openid:window.facade.getComponent("PlayerModel").userId};facade.getComponent("GameModel").postRequest("https://games.qdos.com/game/update/rank","p="+JSON.stringify(t),{success:function(t){for(var n=[],i=0;i<t.length;i++)n.push({avatar:t[i].image,nick_name:t[i].nickName,best_score:t[i].score});e.gotRank(n)}})}},onEnable:function(){cc.director.getScene().getChildByName("Canvas").getChildByName("recommendBar").zIndex=1e4},onDisable:function(){cc.director.getScene().getChildByName("Canvas").getChildByName("recommendBar").zIndex=1},initData:function(e){window.facade.getComponent("GameModel").setOpenRankfFlag(2)},start:function(){window.facade.getComponent("RankModel").requestRankList(1)},doClose:function(){cc.systemEvent.off(i.RANK_LIST,this.gotRank,this)},gotRank:function(e){for(var t=0;t<e.length;t++)e[t].rankNo=t+1;this.scroll.getComponent("ListViewCtrl").setList(e,!1,null)},close:function(){window.popUp.getComponent("Pop").removeTop()},jumpTadayRank:function(){window.popUp.getComponent("Pop").removeTop(),window.popUp.getComponent("Pop").addPopByName("GunMasterRank",this,!0,!0,!1)},setupList:function(e){}}),cc._RF.pop()},{CommonFunc:"CommonFunc",ModuleEventEnum:"ModuleEventEnum"}],RecommendBar:[function(e,t,n){"use strict";cc._RF.push(t,"d982ekeE49BjakyzAVGjtFd","RecommendBar");var i=e("MoreGameManager");cc.Class({extends:cc.Component,properties:{itemPrefab:cc.Prefab,content:cc.Node},onLoad:function(){this.itemId=1,this.node.opacity=0,this.dir=-1,this.node.on(cc.Node.EventType.TOUCH_START,this._onTouchBegan,this,!0),this.node.on(cc.Node.EventType.TOUCH_MOVE,this._onTouchMoved,this,!0),this.node.on(cc.Node.EventType.TOUCH_END,this._onTouchEnded,this,!0),this.node.on(cc.Node.EventType.TOUCH_CANCEL,this._onTouchCancelled,this,!0)},start:function(){this.delayRequest()},delayRequest:function(){var e=this;i.requestMoreGameList(function(t){e.showRecommendGameList(t)})},showRecommendGameList:function(e){if(this.node.opacity=255,this.node.active=!0,this.content.x=0,this.content.removeAllChildren(),e&&!(e.length<=5)){this.datas=e;for(var t=[],n=8,i=0;i<n;i++){var o=this.itemId-5+i;o<0?o=this.datas.length+o:o>=this.datas.length&&(o-=this.datas.length),t[i]=this.datas[o]}for(n=Math.min(t.length,n),i=0;i<n;i++){var a=cc.instantiate(this.itemPrefab);a.data=i,a.getComponent("RecommendGameItem").setupItemData(t[i]),a.x=134*i-400,this.content.addChild(a)}this.updateContent()}},updateContent:function(){this.content.width=134*this.content.getChildren().length},insertToRight:function(e){var t=this.content.getChildren(),n=t[t.length-1],i=n.data+1;i>this.datas.length-1&&(i=0),e.data=i,e.getComponent("RecommendGameItem").setupItemData(this.datas[i]),e.x=n.x+134},insertToLeft:function(e){var t=this.content.getChildren()[0],n=t.data-1;n<0&&(n=this.datas.length-1),e.data=n,e.getComponent("RecommendGameItem").setupItemData(this.datas[n]),e.x=t.x-134},autoRoll:function(){this.deltaMove=cc.v2(this.dir,0),this.content.x+=this.deltaMove.x},_onTouchBegan:function(e,t){var n=e.touch;this._startTouch=n.getLocation().clone(),this._startContentX=this.content.x},_onTouchMoved:function(e,t){var n=e.touch;this.deltaMove=n.getLocation().sub(n.getStartLocation()),this._touchMoved?this.content.x=this._startContentX+this.deltaMove.x:this.deltaMove.mag()>7&&(this.content.x=this._startContentX+this.deltaMove.x,this._touchMoved=!0),this.rollType||(this.content.x>=(this.content.width-this.node.width)/2-60&&(this.content.x=(this.content.width-this.node.width)/2-60),this.content.x<=-(this.content.width-this.node.width)/2+60&&(this.content.x=-(this.content.width-this.node.width)/2+60))},_onTouchEnded:function(e,t){e.touch,this._touchMoved&&e.stopPropagation(),this._touchMoved&&(this._touchMoved=!1)},_onTouchCancelled:function(e,t){this._touchMoved=!1},update:function(e){1==this.rollType?(this.dir=-1,this.rollOneSide()):this.rollReverse()},rollReverse:function(){this._touchMoved||(-1==this.dir?this.content.x--:this.content.x++,this.content.x>=(this.content.width-this.node.width)/2-60&&(this.dir=-1),this.content.x<=-(this.content.width-this.node.width)/2+60&&(this.dir=1),this.autoRoll())},rollOneSide:function(){this._touchMoved||this.autoRoll();for(var e=this.content.getChildren(),t=0;t<e.length;t++){var n=e[t],i=n.convertToWorldSpaceAR(cc.v2(100,0));if(i.x<0&&this.deltaMove.x<0){this.insertToRight(n),this.dir=-1;break}if(i.x>840&&this.deltaMove.x>0){this.insertToLeft(n),this.dir=1;break}}e.sort(function(e,t){return e.x<t.x?-1:1})}}),cc._RF.pop()},{MoreGameManager:"MoreGameManager"}],RecommendGameItem:[function(e,t,n){"use strict";cc._RF.push(t,"c49d74J+qxC15K1IfwvNU5U","RecommendGameItem");var i=e("MoreGameManager");cc.Class({extends:cc.Component,properties:{iconImg:cc.Sprite,name1:cc.Label,itemID:0,startC:0,endC:0,count:0,pointImg:cc.Node,effcount:0,effStartC:0,effEndC:0,effImg:cc.Sprite},update:function(){if(this.frameCount||(this.frameCount=0),this.frameCount++,this.frameCount%5==0){if(this.endC>this.startC){var e=this;if((n=parseInt(this.count)+parseInt(this.startC))<=this.endC){var t=this.data.animUrl+n.toString()+"."+this.type;cc.loader.load({url:t,type:"png"},function(t,n){e.iconImg&&n&&(e.iconImg.spriteFrame=new cc.SpriteFrame(n))}),this.count++}else this.count=1}var n;if(this.effEndC>this.effStartC)e=this,(n=parseInt(this.effcount)+parseInt(this.startC))<=this.effEndC?(t=this.data.effectUrl+n.toString()+"."+this.effType,cc.loader.load({url:t,type:"png"},function(t,n){e.effImg&&n&&(e.effImg.spriteFrame=new cc.SpriteFrame(n),e.effNode.width=120,e.effNode.height=120)}),this.effcount++):this.effcount=1}},setupItemData:function(e){if(e&&e.name){this.node.active=!0,this._historyDataArr||(this._historyDataArr=[]),this._historyDataArr.push(e),this._historyDataArr.length>=i.getData().length&&(this._historyDataArr=[]),this.type,this.data=JSON.parse(JSON.stringify(e)),this.appId=this.data.appId,this.path=this.data.extra;var t=this;if(""!=e.icon&&e.icon&&0==e.icon.indexOf("http")&&(cc.loader.load({url:e.icon,type:"png"},function(e,n){t.iconImg&&n&&(t.iconImg.spriteFrame=new cc.SpriteFrame(n))}),this.startC=this.endC=0),e.name&&this.name1&&(this.name1.string=e.name),e.animation&&""!=e.animation){var n=e.animation.split(",");n.length>=4&&(this.data.animUrl=n[0],this.startC=n[1],this.endC=n[2],this.type=n[3])}if(e.effect&&""!=e.effect){this.effNode||(this.effNode=new cc.Node,this.effImg=this.effNode.addComponent(cc.Sprite),this.effNode.parent=this.node);var o=e.effect.split(",");o.length>=4&&(this.data.effectUrl=o[0],this.effStartC=parseInt(o[1]),this.effEndC=parseInt(o[2]),this.effType=o[3])}else this.effNode&&(this.effNode.destroy(),this.effNode.parent=null,this.effNode=null,this.data.effectUrl=null,this.effStartC=0,this.effEndC=0,this.effType=null)}else this.node.active=!1},isInHistory:function(e){for(var t=0;t<this._historyDataArr.length;t++)if(e.icon==this._historyDataArr[t].icon)return!0;return!1},btnGoGameOnClick:function(){i.navigateToMiniProgram(this.appId,this.path)}}),cc._RF.pop()},{MoreGameManager:"MoreGameManager"}],RecommendGameJS:[function(e,t,n){"use strict";cc._RF.push(t,"fe845VTH15D8L7ukyhSIK5a","RecommendGameJS"),cc.Class({extends:cc.Component,properties:{itemNode:cc.Node,scrollView:cc.Node,itemNodes:[]},onDisable:function(){console.log("recommend onDisable"),cc.systemEvent.off(ME.RECOMMEND_GAME),this.scrollView.getComponent("ListViewCtrl").close()},onEnable:function(){console.log(""),this.scrollView.getComponent("ListViewCtrl").initialize()},onLoad:function(){},requestRecommend:function(){facade.isMiniGame&&(window.facade.SAVE_MODE||(cc.systemEvent.on(ME.RECOMMEND_GAME,this.showRecommendGameList.bind(this)),window.facade.getComponent("RecommendGameModel").requestRecommendGame()))},showRecommendGameList:function(e){this.node.active=!0;var t=e;this.scrollView.getComponent("ListViewCtrl").setList(t,!1,null)},btnToMoreGameOnClick:function(){window.popUp.getComponent("Pop").addPopByName("MoreGame",this,!0,!0,!1)}}),cc._RF.pop()},{}],RecommendGameModel:[function(e,t,n){"use strict";cc._RF.push(t,"8958dDzzrVOUJhC+RnPzxBX","RecommendGameModel");var i=e("Network");cc.Class({extends:cc.Component,properties:{recommendList:[]},uploadNavigateOut:function(e,t,n){var i={game_id:window.facade.GameId,to_game_id:t,final_to_game_id:n,token:window.facade.getComponent("PlayerModel").token};window.net.getComponent("Net").httpRequest(window.net.NavigateOut,i),1==e?this.requestHomeRecommend():(this.requestRecommendGame(),this.requestHomeRecommend())},showRecommendGameList:function(e){this.node.opacity=255,this.node.active=!0,this.content.x=0,this.content.removeAllChildren();for(var t=0;t<e.length;t++){var n=null;(n=cc.instantiate(this.itemPrefab)).x=134*t+67,n.active=!0,n.getComponent("RecommendGameItem").setupItemData(e[t]),this.content.addChild(n)}this.content.width=134*e.length,this.content.width<=this.node.width-40?this.isOpen=!1:(this.isOpen=!0,this.isLeft=!0)},requestHomeRecommend:function(){var e=this,t=window.facade.httpServerAdress+window.net.RecommendGame,n={game_id:window.facade.GameId,token:window.facade.getComponent("PlayerModel").token};i.postRequest(t,n,{success:function(t){var n=facade.getComponent("PlayerModel").getRecommondCount(),i=e.setupRecommendList(t.recommend_info,n,3,[]);cc.systemEvent.emit(ME.HOME_RECOMMEND,i)},failure:function(e){}})},requestResultRecommend:function(){var e=this,t=window.facade.httpServerAdress+window.net.RecommendGame,n={game_id:window.facade.GameId,token:window.facade.getComponent("PlayerModel").token};i.postRequest(t,n,{success:function(t){var n=e.setupRecommendList(t.recommend_info,50,5,[]);cc.systemEvent.emit(ME.RESULT_RECOMMEND,n)},failure:function(e){}})},requestRecommendGame:function(){var e=this,t=window.facade.httpServerAdress+window.net.RecommendGame,n={game_id:window.facade.GameId,token:window.facade.getComponent("PlayerModel").token};i.postRequest(t,n,{success:function(t){var n=e.setupRecommendList(t.recommend_info,4,4,[]);cc.systemEvent.emit(ME.RECOMMEND_GAME,n)},failure:function(e){}})},setupRecommendList:function(e,t,n,i){for(var o=[],a=0;a<e.length;a++){var s=e[a];parseInt(s.group)==n&&o.push(s)}o=o.sort(function(e,t){return parseInt(e.weight)<parseInt(t.weight)?1:parseInt(e.weight)>parseInt(t.weight)?-1:0});for(var c=[],r=[],l=0;l<o.length;l++){var d=o[l];parseInt(d.navout_cnt)<=0?c.push(d):r.push(d)}var h=[];h=o.length<=t?o:c.length>t?c.slice(0,t):c.length<t?c.concat(r.slice(0,t-c.length)):c;for(var u=0;u<h.length;u++){var p=h[u];h[u].status=2;for(var m=0;m<i.length;m++){var g=i[m];p.game_id==g&&(h[u].status=1)}}return this.recommendList=h,console.log("this.recommendList3 =",h),h}}),cc._RF.pop()},{Network:"Network"}],RecommendPage:[function(e,t,n){"use strict";cc._RF.push(t,"85d0620yYpEzZzY/Nko2iiA","RecommendPage");var i=e("MoreGameManager");cc.Class({extends:cc.Component,properties:{itemPrefab:cc.Prefab,content:cc.Node,gameRun:cc.Node},show:function(){this.content.y=0,this.node.active=!0},onEnable:function(){this.initData()},initData:function(){var e=this;i.requestMoreGameList(function(t){e.showRecommendGameList(t)})},showRecommendGameList:function(e){if(this.content.removeAllChildren(),e&&0!=e.length){for(var t=0;t<e.length;t++){var n=cc.instantiate(this.itemPrefab),i=JSON.parse(JSON.stringify(e[t]));i.icon=i.previewUrl,n.getComponent("RecommendGameItem").setupItemData(i),this.content.addChild(n)}this.content.height=252*e.length/2}},start:function(){},scrollEvent:function(e,t){},close:function(){this.node.active=!1}}),cc._RF.pop()},{MoreGameManager:"MoreGameManager"}],ReplayUI:[function(e,t,n){"use strict";cc._RF.push(t,"58860leim1IgZIZt6A7ycS0","ReplayUI"),e("ModuleEventEnum");var i=e("AnalyticsUtilities").AnalyticsUtilities;cc.Class({extends:cc.Component,properties:{retryCostEnergyLabel:cc.Label},onLoad:function(){},onEnable:function(){this.retryCostEnergyLabel.active=!1;var e=this;setTimeout(function(){e.retryCostEnergyLabel.active=!0},2e3),facade.getComponent("LevelModel").costEnergy,this.retryCostEnergyLabel.string="\u6d88\u80171\u4f53\u529b\u91cd\u73a9",i.logEvent("\u8fdb\u5165\u4f53\u529b\u4e0d\u8db3\u754c\u9762")},onDisable:function(){},doClose:function(){this.node.active=!1}}),cc._RF.pop()},{AnalyticsUtilities:"AnalyticsUtilities",ModuleEventEnum:"ModuleEventEnum"}],ResultPanel:[function(e,t,n){"use strict";cc._RF.push(t,"1b5573J1MtI/6DtEPwZCR7w","ResultPanel");var i=e("ModuleEventEnum"),o=e("AnalyticsUtilities").AnalyticsUtilities,a=e("HttpUtil");cc.Class({extends:cc.Component,properties:{star1:cc.Node,star2:cc.Node,star3:cc.Node,reward:cc.Node,linkBox:cc.Node,linkItemPre:cc.Prefab,failNode:cc.Node,passNode:cc.Node,goNextBtn:cc.Node,restartBtn:cc.Node,restartLabel:cc.Node,retryCostEnergy:cc.Node,skipBtn:cc.Node,upBtn:cc.Node,doubleBtn:cc.Node,replayPanel:cc.Node,recommendPage:cc.Node,resultLabel:cc.Node,result3LabelSkin:cc.SpriteFrame,result2LabelSkin:cc.SpriteFrame,result1LabelSkin:cc.SpriteFrame,resultPassLabelSkin:cc.SpriteFrame,btnVideoSkin:cc.SpriteFrame,btnShareSkin:cc.SpriteFrame,bigVideoSkin:cc.SpriteFrame,bigShareSkin:cc.SpriteFrame,iconVideoSkin:cc.SpriteFrame,iconShareSkin:cc.SpriteFrame,btnNextSkin:cc.SpriteFrame,bigNextSkin:cc.SpriteFrame,btnRetrySkin:cc.SpriteFrame,bigRetrySkin:cc.SpriteFrame},onLoad:function(){},start:function(){window.facade.Screenratio&&window.facade.Screenratio<.47?this.skipBtn.parent.getComponent(cc.Widget).bottom=200:this.skipBtn.parent.getComponent(cc.Widget).bottom=10,this.skipBtn.parent.getComponent(cc.Widget).updateAlignment()},onEnable:function(){this.losePlayed=!1,this.replayPanel.active=!1,this.recommendPage.active=!0},onDisable:function(){this.losePlayed=!1,this.replayPanel.active=!1},init:function(e){this.passNode.active=!1,this.failNode.active=!1,this.goNextBtn.parent.active=!1,this.rewardCash=0,this._passed=e,cc.systemEvent.on(i.RESULT_RECOMMEND,this.gotLinks,this),this.goNextBtn.getComponent(cc.Button).interactable=!0,this.restartBtn.getComponent(cc.Button).interactable=!0,this.restartLabel.getComponent(cc.Button).interactable=!0,this.retryCostEnergy.getComponent(cc.Button).interactable=!0,this.skipBtn.getComponent(cc.Button).interactable=!0,this.upBtn.getComponent(cc.Button).interactable=!0,this.doubleBtn.getComponent(cc.Button).interactable=!0,this.restartBtn.getComponent(cc.Widget).isAlignHorizontalCenter=!1,this.updateRewardType(),this.initResult(),this.initLinks(),o.logEvent("\u8fdb\u5165\u7ed3\u7b97\u754c\u9762")},updateRewardType:function(){this.rewardType=window.facade.getComponent("ShareADModel").getShareADType(),2!=this.rewardType?(this.skipBtn.getChildByName("icon").getComponent(cc.Sprite).spriteFrame=this.iconVideoSkin,this.upBtn.getChildByName("icon").getComponent(cc.Sprite).spriteFrame=this.iconVideoSkin,this.doubleBtn.getChildByName("icon").getComponent(cc.Sprite).spriteFrame=this.iconVideoSkin,this.restartBtn.getChildByName("icon").getComponent(cc.Sprite).spriteFrame=this.iconVideoSkin,this.type="Video"):(this.skipBtn.getChildByName("icon").getComponent(cc.Sprite).spriteFrame=this.iconShareSkin,this.upBtn.getChildByName("icon").getComponent(cc.Sprite).spriteFrame=this.iconShareSkin,this.doubleBtn.getChildByName("icon").getComponent(cc.Sprite).spriteFrame=this.iconShareSkin,this.restartBtn.getChildByName("icon").getComponent(cc.Sprite).spriteFrame=this.iconShareSkin,this.type="Share")},initResult:function(){this.passNode.active=!0,this.failNode.active=!1,this.resultLabel.active=!1,this._passed?(o.logEvent("\u8fdb\u5165\u95ef\u5173\u6210\u529f\u754c\u9762: "+window.facade.getComponent("LevelModel").playingLevel),this.reward.getComponent("TextureLabel").setText("0"),this.star1.getChildByName("light").active=!1,this.star2.getChildByName("light").active=!1,this.star3.getChildByName("light").active=!1,this.reward.parent.opacity=0,this.node.runAction(cc.sequence(cc.delayTime(.03),cc.callFunc(this.showResult,this)))):this.initFailed()},initFailed:function(){this.losePlayed||(window.audio.getComponent("SoundManager").playEffect("lose"),this.losePlayed=!0),o.logEvent("\u8fdb\u5165\u95ef\u5173\u5931\u8d25\u754c\u9762: "+window.facade.getComponent("LevelModel").playingLevel),this.passNode.active=!1,this.failNode.active=!0,this.goNextBtn.active=!1,this.restartLabel.active=!1,this.upBtn.active=!1,this.doubleBtn.active=!1,this.restartBtn.active=!0,this.skipBtn.active=!0;var e=this;e.retryCostEnergy.active=!1,setTimeout(function(){e.retryCostEnergy.active=!0},2e3),facade.getComponent("LevelModel").costEnergy,this.retryCostEnergy.active=!0,this.retryCostEnergy.getComponent(cc.Label).string="\u6d88\u80171\u4f53\u529b\u91cd\u73a9",this.goNextBtn.parent.active=!0,window.facade.Screenratio&&window.facade.Screenratio<.47?this.failNode.getComponent(cc.Widget).bottom=381:this.failNode.getComponent(cc.Widget).bottom=170,this.failNode.getComponent(cc.Widget).updateAlignment(),facade.SAVE_MODE?(this.skipBtn.active=!1,this.restartBtn.getComponent(cc.Widget).isAlignHorizontalCenter=!0,this.restartBtn.getComponent(cc.Widget).isAlignRight=!1,this.restartBtn.getComponent(cc.Widget).isAlignLeft=!1,this.restartBtn.getComponent(cc.Widget).horizontalCenter=0,this.restartBtn.getComponent(cc.Widget).updateAlignment()):(this.restartBtn.getComponent(cc.Sprite).spriteFrame=this.bigRetrySkin,this.restartBtn.getComponent(cc.Widget).isAlignRight=!1,this.restartBtn.getComponent(cc.Widget).isAlignLeft=!0,this.restartBtn.getComponent(cc.Widget).left=50,this.restartBtn.getComponent(cc.Widget).updateAlignment(),this.skipBtn.width=205,this.skipBtn.getComponent(cc.Sprite).spriteFrame=this["btn"+this.type+"Skin"],this.skipBtn.getComponent(cc.Widget).right=50,this.skipBtn.getComponent(cc.Widget).updateAlignment()),this.checkLast()},initNeedUp:function(){this.updateRewardType(),this.passNode.active=!0,this.failNode.active=!1,this.restartBtn.active=!1,this.skipBtn.active=!1,this.doubleBtn.active=!1,this.retryCostEnergy.active=!1;var e=this;e.restartLabel.active=!1,setTimeout(function(){e.restartLabel.active=!0},2e3),this.goNextBtn.active=!0,this.upBtn.active=!0,this.goNextBtn.parent.active=!0,this.goNextBtn.width=205,this.goNextBtn.getComponent(cc.Sprite).spriteFrame=this.btnNextSkin,this.goNextBtn.getComponent(cc.Widget).isAlignRight=!1,this.goNextBtn.getComponent(cc.Widget).isAlignLeft=!0,this.goNextBtn.getComponent(cc.Widget).left=50,this.goNextBtn.getComponent(cc.Widget).updateAlignment(),this.upBtn.getComponent(cc.Sprite).spriteFrame=this["big"+this.type+"Skin"],this.upBtn.getComponent(cc.Widget).right=50,this.upBtn.getComponent(cc.Widget).updateAlignment(),this.checkLast()},initDefault:function(){this.updateRewardType(),this.passNode.active=!0,this.failNode.active=!1,this.skipBtn.active=!1,this.restartLabel.active=!1,this.upBtn.active=!1,this.doubleBtn.active=!1,this.goNextBtn.active=!0,this.restartBtn.active=!0,this.goNextBtn.parent.active=!0,this.goNextBtn.width=205,this.goNextBtn.getComponent(cc.Sprite).spriteFrame=this.bigNextSkin,this.goNextBtn.getComponent(cc.Widget).left=50,this.goNextBtn.getComponent(cc.Widget).updateAlignment(),this.restartBtn.getComponent(cc.Sprite).spriteFrame=this.btnRetrySkin,this.restartBtn.getComponent(cc.Widget).isAlignRight=!0,this.restartBtn.getComponent(cc.Widget).isAlignLeft=!1,this.restartBtn.getComponent(cc.Widget).right=50,this.restartBtn.getComponent(cc.Widget).updateAlignment(),this.checkLast()},initDouble:function(){this.updateRewardType(),this.passNode.active=!0,this.failNode.active=!1,this.skipBtn.active=!1,this.restartLabel.active=!1,this.retryCostEnergy.active=!1,this.upBtn.active=!1,this.restartBtn.active=!1,this.goNextBtn.active=!0,this.doubleBtn.active=!0,this.goNextBtn.parent.active=!0,this.goNextBtn.width=205,this.goNextBtn.getComponent(cc.Sprite).spriteFrame=this.btnNextSkin,this.goNextBtn.getComponent(cc.Widget).left=50,this.goNextBtn.getComponent(cc.Widget).updateAlignment(),this.doubleBtn.getComponent(cc.Sprite).spriteFrame=this["big"+this.type+"Skin"],this.doubleBtn.getComponent(cc.Widget).right=50,this.doubleBtn.getComponent(cc.Widget).updateAlignment(),this.checkLast()},checkLast:function(){window.facade.getComponent("LevelModel").isLastLevel()&&(this.goNextBtn.active=!1,this.skipBtn.active=!1)},initLinks:function(){facade.SAVE_MODE?this.linkBox.active=!1:window.facade.getComponent("RecommendGameModel").requestResultRecommend()},showResult:function(){window.facade.Screenratio&&window.facade.Screenratio<.47?this.passNode.getComponent(cc.Widget).bottom=580:this.passNode.getComponent(cc.Widget).bottom=380,this.passNode.getComponent(cc.Widget).updateAlignment(),this.star=window.facade.getComponent("LevelModel").star,this.star<3&&this.initNeedUp(),this.star<=0?this.showTitle():(this.starIndex=1,this.node.runAction(cc.sequence(cc.repeat(cc.sequence(cc.callFunc(this.addStar.bind(this)),cc.delayTime(.5)),this.star),cc.delayTime(.5),cc.callFunc(this.showTitle,this))))},showTitle:function(){this.checkGfit()},addStar:function(){var e=this["star"+this.starIndex].getChildByName("light");e.active=!0,e.opacity=0,e.scale=0;var t=cc.spawn(cc.fadeIn(.4),cc.scaleTo(.4,1));t.easing(cc.easeElasticOut(.2)),e.runAction(t),window.audio.getComponent("SoundManager").playEffect("star"),this.starIndex>=3&&(this.reward.parent.opacity=255,this.reward.parent.getChildByName("moneyEffect").getComponent(cc.ParticleSystem).resetSystem(),this.rewardCash=window.facade.getComponent("LevelModel").playingLevelConfig.Reward,this.reward.getComponent("TextureLabel").setText("+"+this.rewardCash),window.facade.getComponent("GameModel").addCash(Number(this.rewardCash)),this.initDouble()),this.starIndex++},goNext:function(){this.goNextBtn.getComponent(cc.Button).interactable=!1;var e=facade.getComponent("LevelModel").getTotalStar(),t=facade.getComponent("LevelModel").getLevelConfig(window.facade.getComponent("LevelModel").playingLevel+1);if(window.facade.getComponent("LevelModel").getLevelVideo(facade.selectedLevelType+"_"+t.Level)>0)3==t.BonusType&&window.facade.getComponent("LevelModel").getLevelStar(facade.selectedLevelType+"_"+t.Level)<3&&(t.Reward=2*window.facade.getComponent("LevelModel").playingLevelConfig.Reward);else if(t.Level==window.facade.getComponent("LevelModel").playingLevel+1&&t.BonusType>0)return this.watchVideo(),void(this.goNextBtn.getComponent(cc.Button).interactable=!0);var n=facade.getComponent("LevelModel").costEnergy;if(facade.getComponent("GameModel").energy<n)return cc.systemEvent.emit(i.ENERGY_NEEDED),void this.node.runAction(cc.sequence(cc.delayTime(.5),cc.callFunc(function(){this.goNextBtn.getComponent(cc.Button).interactable=!0}.bind(this))));t.Star>e?popUp.getComponent("FloatTip").showTip("\u6536\u96c6"+t.Star+"\u9897\u661f\u661f\u89e3\u9501\u4e0b\u4e00\u5173"):(cc.systemEvent.emit(i.GO_NEXT),o.logEvent("\u95ef\u5173\u6210\u529f\u70b9\u51fb\u4e0b\u4e00\u5173"))},watchVideo:function(){window.facade.getComponent("ShareADModel").showShareAD({inviteId:0,videoId:21111,assistId:0,interstitalId:31106},{succ:function(e){console.log("\u5173\u5361\u89c6\u9891:",e),this.jumpToLevlUi()}.bind(this),fail:function(e,t){popUp.getComponent("FloatTip").showTip(e)}.bind(this)})},jumpToLevlUi:function(){window.facade.getComponent("LevelModel").setOverVideo();var e=facade.getComponent("LevelModel").getLevelConfig(window.facade.getComponent("LevelModel").playingLevel+1);if(facade.getComponent("LevelModel").costEnergy=1,1==e.BonusType){facade.getComponent("LevelModel").costEnergy=0;var t=facade.getComponent("LevelModel").costEnergy;if(facade.getComponent("GameModel").energy<t)return void cc.systemEvent.emit(i.ENERGY_NEEDED)}2==e.BonusType&&(e.LuckyPoint=2*window.facade.getComponent("LevelModel").playingLevelConfig.Reward),3==e.BonusType&&(e.Reward=2*window.facade.getComponent("LevelModel").playingLevelConfig.Reward);var n=facade.getComponent("LevelModel").getTotalStar();e.Star>n?popUp.getComponent("FloatTip").showTip("\u6536\u96c6"+e.Star+"\u9897\u661f\u661f\u89e3\u9501\u4e0b\u4e00\u5173"):cc.systemEvent.emit(i.GO_NEXT)},onRetryLabelHandler:function(){this.replayPanel.active=!0,o.logEvent("\u95ef\u5173\u6210\u529f\u70b9\u51fb\u91cd\u73a9")},onRetry:function(){this.doRetry()},doRetry:function(){window.facade.getComponent("ShareADModel").showShareAD({inviteId:0,videoId:21113,assistId:0,interstitalId:31106},{succ:function(e){console.log("\u514d\u8d39\u91cd\u73a9\u89c6\u9891:",e),window.facade.getComponent("GameModel").levelRetryTouch=!0,this.node.parent.getComponent("LevelUI").retry()}.bind(this),fail:function(e,t){popUp.getComponent("FloatTip").showTip(e)}.bind(this)}),o.logEvent("\u4f53\u529b\u4e0d\u8db3\u754c\u9762\u770b\u89c6\u9891\u6216\u5206\u4eab")},doRetryCostEnergy:function(){this.restartBtn.getComponent(cc.Button).interactable=!1,this.restartLabel.getComponent(cc.Button).interactable=!1,this.retryCostEnergy.getComponent(cc.Button).interactable=!1,window.facade.getComponent("GameModel").levelRetryTouch=!0,this.node.parent.getComponent("LevelUI").retryCostEnergy(),o.logEvent("\u95ef\u5173\u5931\u8d25\u70b9\u51fb\u6d88\u8017\u4f53\u529b")},onTake3Star:function(){if(facade.isMiniGame)if(this.rewardType>2)popUp.getComponent("FloatTip").showTip("\u5df2\u7ecf\u8d85\u51fa\u4eca\u5929\u7684\u5956\u52b1\u4e0a\u9650\u5566\uff01");else{window.facade.getComponent("ShareADModel").showShareAD({inviteId:1530,videoId:21104,assistId:0,interstitalId:31104},{succ:function(e){console.log("\u4e09\u661f\u5206\u4eab\u6210\u529f:",e),this.take3Star()}.bind(this),fail:function(e,t){popUp.getComponent("FloatTip").showTip(e)}.bind(this)})}else this.take3Star()},take3Star:function(){this.upBtn.getComponent(cc.Button).interactable=!1,window.facade.getComponent("LevelModel").force3Star(),this.showResult()},take3StarGet:function(){window.facade.getComponent("LevelModel").force3Star(),this.showResult()},skip:function(){if(!facade.isMiniGame)return this.hide(),void cc.systemEvent.emit(i.SKIP);if(this.rewardType>2)popUp.getComponent("FloatTip").showTip("\u5df2\u7ecf\u8d85\u51fa\u4eca\u5929\u7684\u8df3\u5173\u4e0a\u9650\u5566\uff01");else{window.facade.getComponent("ShareADModel").showShareAD({inviteId:1528,videoId:21102,assistId:0,interstitalId:31102},{succ:function(e){console.log("\u8df3\u5173\u5206\u4eab\u6210\u529f:",e),this.hide(),cc.systemEvent.emit(i.SKIP)}.bind(this),fail:function(e,t){popUp.getComponent("FloatTip").showTip(e)}.bind(this)})}},onDouble:function(){if(facade.isMiniGame)if(this.rewardType>2)popUp.getComponent("FloatTip").showTip("\u5df2\u7ecf\u8d85\u51fa\u4eca\u5929\u7684\u5956\u52b1\u4e0a\u9650\u5566\uff01");else{window.facade.getComponent("ShareADModel").showShareAD({inviteId:1525,videoId:21100,assistId:0,interstitalId:31100},{succ:function(e){console.log("\u53cc\u500d\u5206\u4eab\u6210\u529f:",e),this.takeDouble()}.bind(this),fail:function(e,t){popUp.getComponent("FloatTip").showTip(e)}.bind(this)})}else this.takeDouble()},updateUserPrice:function(e){var t=JSON.parse(cc.sys.localStorage.getItem("userInfo")).id;cc.log("id ===",t,e),a.request("user/deposit",{user_id:t,amount:e},"POST",function(e,t){e?popUp.getComponent("FloatTip").showTip(e):200==t.status?cc.log("deposit===",t):popUp.getComponent("FloatTip").showTip(t.message)})},takeDouble:function(){this.doubleBtn.getComponent(cc.Button).interactable=!1,this.reward.parent.opacity=255,this.reward.parent.getChildByName("moneyEffect").getComponent(cc.ParticleSystem).resetSystem(),this.rewardCash=Number(window.facade.getComponent("LevelModel").playingLevelConfig.Reward);var e=5*this.rewardCash;this.reward.getComponent("TextureLabel").setText("+"+e),window.facade.getComponent("GameModel").addCash(Number(4*this.rewardCash)),this.updateUserPrice(e)},hide:function(){cc.systemEvent.off(i.RESULT_RECOMMEND,this.gotLinks,this),this.node.active=!1,this.restartLabel.active=this.retryCostEnergy.active=!1},gotLinks:function(e){if(this.linkBox.removeAllChildren(),!e||0==e.length)return this.linkBox.opacity=0,void(this.linkBox.active=!1);if(this.linkBox.opacity=255,this.linkBox.active=!0,window.facade.getComponent("PlayerModel").isClickCountLimit(3))for(var t=0;t<e.length;t++)e[t].navout_max_cnt&&""!=e[t].navout_max_cnt&&0!=Number(e[t].navout_max_cnt)&&e[t].navout_cnt>=Number(e[t].navout_max_cnt)&&(e.splice(t,1),t--);if(facade.getComponent("PlayerModel").isIconRandomOrder("result")){var n=facade.getComponent("PlayerModel").getResultRecommondRandomCount(),i=e.slice(0,n),o=e.slice(n,e.length);i&&i.length>1&&i.sort(function(){return.5-Math.random()}),e=[],e=i.concat(o)}else e.sort(function(e,t){return Number(e.weight)>Number(t.weight)?-1:1});for(var a=Math.min(e.length,12),s=0;s<a;s++){var c=null;(c=cc.instantiate(this.linkItemPre)).active=!0,c.scale=1.1,c.getComponent("RecommendGameItem").setupItemData(e[s]),this.linkBox.addChild(c)}},onDestroy:function(){},checkGfit:function(){if(!facade.SAVE_MODE){var e=facade.getComponent("GameModel").checkNewerShowCondtition();0!=e&&window.popUp.getComponent("Pop").addPopByName(e+"View",null,!0,!0)}},update:function(e){}}),cc._RF.pop()},{AnalyticsUtilities:"AnalyticsUtilities",HttpUtil:"HttpUtil",ModuleEventEnum:"ModuleEventEnum"}],ResultShotOne:[function(e,t,n){"use strict";cc._RF.push(t,"9c66eFpRhNF4LYuO+O19Z3v","ResultShotOne");var i=e("ModuleEventEnum");cc.Class({extends:cc.Component,properties:{goNextBtn:cc.Node,restartBtn:cc.Node,linkBox:cc.Node,linkItemPre:cc.Prefab,chanllenLabel:cc.Label,fauilNode:cc.Node,cupNumLabel:cc.Label,returnPlayBt:cc.Node,cupNumNode:cc.Node},onLoad:function(){},start:function(){},onEnable:function(){this.losePlayed=!1},onDisable:function(){this.losePlayed=!1},init:function(e){if(cc.systemEvent.on(i.RESULT_RECOMMEND,this.gotLinks,this),e){this.returnPlayBt.active=!0,this.returnPlayBt.getComponent(cc.Button).interactable=!0,this.cupNumNode.active=!0,this.goNextBtn.active=!1,this.restartBtn.active=!1,this.fauilNode.active=!1;var t=window.facade.getComponent("GameModel").oneShotLevelCupNum;this.cupNumLabel.string="+"+t}else this.returnPlayBt.active=!1,this.cupNumNode.active=!1,this.goNextBtn.active=!0,this.restartBtn.active=!0,this.restartBtn.getComponent(cc.Button).interactable=!0,this.fauilNode.active=!0,this.setChanllenLabel();this.initLinks()},setChanllenLabel:function(){this.chanllenNum=window.facade.getComponent("GameModel").chanllenTimes;var e=facade.getComponent("ShareADModel").GameConfig.OneBulletCnt.Value;this.chanllenLabel.string="\u5269\u4f59\u6b21\u6570:"+(e-this.chanllenNum)+"/"+e},goReturnBegin:function(){this.restartBtn.getComponent(cc.Button).interactable=!1,this.returnPlayBt.getComponent(cc.Button).interactable=!1,this.chanllenNum=window.facade.getComponent("GameModel").chanllenTimes;var e=facade.getComponent("ShareADModel").GameConfig.OneBulletCnt.Value;if(this.chanllenNum<e){if(0==window.facade.getComponent("GameModel").levelShotUpdate)if(window.facade.getComponent("GameModel").getLocalTimeHour()>=21){window.facade.getComponent("GameModel").setShotUpdateData(1);var t="\u4eca\u65e5\u6311\u6218\u65f6\u95f4\u5df2\u7ed3\u675f\uff0c\u8bf7\u9886\u53d6\u5956\u52b1\uff01";popUp.getComponent("FloatTip").showTip(t),this.node.runAction(cc.sequence(cc.delayTime(1),cc.callFunc(this.backMain,this)))}else window.facade.getComponent("GameModel").setAddChanllenNum(),this.chanllenNum++,window.facade.getComponent("GameModel").setOneShotLeves(),this.node.runAction(cc.sequence(cc.delayTime(1),cc.callFunc(this.goToShotNextLevel,this)))}else t="\u4eca\u65e5\u6311\u6218\u6b21\u6570\u5df2\u7528\u5b8c\uff0c\u8bf7\u660e\u65e5\u518d\u6765\uff01",popUp.getComponent("FloatTip").showTip(t),this.node.runAction(cc.sequence(cc.delayTime(1),cc.callFunc(this.backMain,this)))},initLinks:function(){facade.SAVE_MODE?this.linkBox.active=!1:window.facade.getComponent("RecommendGameModel").requestResultRecommend()},backMain:function(){cc.systemEvent.emit(i.BACK_MAIN)},goToShotNextLevel:function(){this.node.active=!1,cc.systemEvent.emit(i.GO_SHOT_NEXT)},goNext:function(){this.node.active=!1,window.facade.getComponent("GameModel").onLevelShotNext()},onRetry:function(){this.restartBtn.getComponent(cc.Button).interactable=!1;var e=facade.getComponent("ShareADModel").GameConfig.OneBulletCnt.Value;if(this.chanllenNum<e){window.facade.getComponent("GameModel").setAddChanllenNum(),this.chanllenNum++;window.facade.getComponent("ShareADModel").showShareAD({inviteId:0,videoId:21109,assistId:0,interstitalId:31106},{succ:function(e){console.log("\u91cd\u73a9\u89c6\u9891:",e),this.node.active=!1,cc.systemEvent.emit(i.GO_SHOT_NEXT)}.bind(this),fail:function(e,t){popUp.getComponent("FloatTip").showTip(e)}.bind(this)})}},hide:function(){cc.systemEvent.off(i.RESULT_RECOMMEND,this.gotLinks,this),this.node.active=!1},gotLinks:function(e){if(this.linkBox.removeAllChildren(),!e||0==e.length)return this.linkBox.opacity=0,void(this.linkBox.active=!1);if(this.linkBox.opacity=255,this.linkBox.active=!0,window.facade.getComponent("PlayerModel").isClickCountLimit(3))for(var t=0;t<e.length;t++)e[t].navout_max_cnt&&""!=e[t].navout_max_cnt&&0!=Number(e[t].navout_max_cnt)&&e[t].navout_cnt>=Number(e[t].navout_max_cnt)&&(e.splice(t,1),t--);if(facade.getComponent("PlayerModel").isIconRandomOrder("result")){var n=facade.getComponent("PlayerModel").getResultRecommondRandomCount(),i=e.slice(0,n),o=e.slice(n,e.length);i&&i.length>1&&i.sort(function(){return.5-Math.random()}),e=[],e=i.concat(o)}else e.sort(function(e,t){return Number(e.weight)>Number(t.weight)?-1:1});for(var a=Math.min(e.length,12),s=0;s<a;s++){var c=null;(c=cc.instantiate(this.linkItemPre)).active=!0,c.scale=1.1,c.getComponent("RecommendGameItem").setupItemData(e[s]),this.linkBox.addChild(c)}},onDestroy:function(){},checkGfit:function(){if(!facade.SAVE_MODE){var e=facade.getComponent("GameModel").checkNewerShowCondtition();0!=e&&window.popUp.getComponent("Pop").addPopByName(e+"View",null,!0,!1)}},update:function(e){}}),cc._RF.pop()},{ModuleEventEnum:"ModuleEventEnum"}],RewardCPAModel:[function(e,t,n){"use strict";var i;function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}cc._RF.push(t,"a71dci2buhBjqyQTP17/sjL","RewardCPAModel");var a=e("ModuleEventEnum"),s=e("Network");cc.Class((o(i={extends:cc.Component,properties:{isCPA:!1,maxCarTerm:0,cpaGameTime:0,boxGameTime:0,resourceMarkup:0,carMarkup:0,cpaRecord:[],boxReward:null},navigateToGame:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=e.link,o=e.link_params,a=e.link_game_id,s=e.game_id;if(wx.navigateToMiniProgram){this.callback=t,o="pages/index/index?"+o,console.log("lc \u6e38\u620f\u8df3\u8f6c : appId=",i,", path=",o," extraData = ",e);var c=this;wx.navigateToMiniProgram({appId:i,extraData:{info:e},path:o,envVersion:n?"develop":"release",success:function(){console.log("lc \u6e38\u620f\u8df3\u8f6c : \u6210\u529f"),c.sendTravelGame(a,s),t&&t.success(),c.isCPA=!0},fail:function(){t&&t.failure(),console.log("lc \u6e38\u620f\u8df3\u8f6c : \u5931\u8d25"),popUp.getComponent("Pop").getPopByName("FakeInterUI")||popUp.getComponent("Pop").addPopByName("FakeInterUI",null,!0)},complete:function(){}})}},sendTravelGame:function(e,t){console.log("lc \u8df3\u8f6c\u6e38\u620f-- \u4e0a\u62a5 webSocket",e,t);var n={game_id:window.facade.GameId,to_game_id:e,final_to_game_id:t,token:window.facade.getComponent("PlayerModel").token};window.net.getComponent("Net").httpRequest(window.net.NavigateOut,n),console.log("lc \u8df3\u8f6c\u6e38\u620f-- \u4e0a\u62a5 \u884c\u884c\u884c ",t),window.net.getComponent("Net").appLinkReport(t)},onLoad:function(){cc.systemEvent.on(a.GAMESENE_ENTERED,this.loadingEnd.bind(this)),cc.systemEvent.on(a.RELOGIN_SUCCESS,this.reLoginSuccess.bind(this)),cc.systemEvent.on(a.SERVER_RESPONSE,this.onServerResponse.bind(this)),this.monitorWXLifeCycle()},monitorWXLifeCycle:function(){if(facade.isMiniGame){var e=this;wx.onShow(function(){setTimeout(function(){"Game"==cc.director.getScene().name&&window.net.getComponent("Net").inConnecting?(console.log("lc cpa-- wx.onShow \u68c0\u6d4b\u5956\u52b1",window.net.getComponent("Net").inConnecting),e.getCPAReward()):console.log("lc cpa-- wx.onShow \u4e0d\u6ee1\u8db3\u9886\u53d6\u6761\u4ef6")},200)})}},loadingEnd:function(){var e=this;setTimeout(function(){"Game"==cc.director.getScene().name&&window.net.getComponent("Net").inConnecting&&(console.log("lc cpa \u52a0\u8f7d\u5b8c\u6210 \u9886\u53d6\u5956\u52b1"),e.getCPAReward())},200)},reLoginSuccess:function(){"Game"==cc.director.getScene().name&&window.net.getComponent("Net").inConnecting&&(console.log("lc cpa \u91cd\u8fde\u6210\u529f \u68c0\u6d4b\u5956\u52b1"),this.getCPAReward())},onServerResponse:function(e){var t=e.detail;switch(t.messageName){case"Message_reward.SCResLinkRewardFetchMessage":console.log("lc cpa -- \u9886\u53d6\u76d2\u5b50\u5956\u52b1 ",t.linkGameId);var n={type:3,content:this.boxReward.content};window.popUp.getComponent("Pop").addPopByName("Prop",[n],!0);break;case"Message_reward.SCResLinkRewardFetchedInfoMessage":console.log("lc cpa -- \u5df2\u7ecf\u9886\u53d6\u4fe1\u606f ",t.linkGameIds),this.callback.success(t.linkGameIds)}},receiveCPAReward:function(e,t,n){var i=this;if(5==(e=parseInt(e)))this.getBoxGameReward(t);else{if(1==e){var o=t;facade.getComponent("GameModel").requestUpGradeACar(o,1),window.facade.getComponent("RewardBoxModel").carId=0,console.log("lc cpa-- \u5f00\u7bb1\u5b50",e,t)}else 2==e?(window.facade.getComponent("RewardOnlineModel").requestOpenEgg(1),console.log("lc cpa-- \u5f00\u7bb1\u5b50",e,t)):3==e?window.facade.getComponent("RewardSubsidyModel").freeMoneyFetch(1):4==e&&cc.systemEvent.emit(a.CAN_FREE_BUY_CAR,t);window.facade.getComponent("RewardCPAModel").getBoxGameRewardInfo({success:function(e){for(var t=!1,o=0;o<e.length;o++)if(e[o]==n){t=!0;break}0==t?setTimeout(function(){i.getBoxGameReward(n),console.log("lc cpa \u76d2\u5b50\u4e2d \u6ca1\u6709\u9886\u53d6\u8fc7")},100):console.log("lc cpa \u76d2\u5b50\u4e2d \u5df2\u7ecf\u9886\u53d6\u8fc7")}})}this.removeCPAReward()},saveCPAReward:function(e,t,n){cc.sys.localStorage.setItem("cpaGame",n),cc.sys.localStorage.setItem("cpaTime",this.clientTimeStamp()),cc.sys.localStorage.setItem("cpaType",e),null!=t&&cc.sys.localStorage.setItem("cpaContent",t),console.log("lc cpa-- \u4fdd\u5b58\u5956\u52b1",e,t)},getCPAReward:function(){var e=cc.sys.localStorage.getItem("cpaGame"),t=cc.sys.localStorage.getItem("cpaTime"),n=cc.sys.localStorage.getItem("cpaType"),i=cc.sys.localStorage.getItem("cpaContent");console.log("lc cpa-- \u83b7\u53d6\u5956\u52b1",t,n,i),t&&""!=t?(console.log("lc cpa \u6709\u5956\u52b1"),this.clientTimeStamp()-t<1e3*(5!=n?this.cpaGameTime:this.boxGameTime)?(console.log("lc cpa \u6ca1\u6709\u8fbe\u5230\u65f6\u95f4\u8981\u6c42"),this.removeCPAReward()):(console.log("lc cpa \u8fbe\u5230\u65f6\u95f4\u8981\u6c42, \u9886\u53d6\u5956\u52b1"),this.receiveCPAReward(n,i,e))):(console.log("lc cpa \u6ca1\u6709\u5956\u52b1"),this.removeCPAReward())},getBoxGameRewardInfo:function(e){this.callback=e,console.log("lc cpa \u67e5\u8be2\u76d2\u5b50\u5956\u52b1")},getBoxGameReward:function(e){console.log("lc cpa \u9886\u53d6\u76d2\u5b50\u5956\u52b1")},removeCPAReward:function(){cc.sys.localStorage.removeItem("cpaGame"),cc.sys.localStorage.removeItem("cpaTime"),cc.sys.localStorage.removeItem("cpaType"),cc.sys.localStorage.removeItem("cpaContent"),console.log("lc cap \u79fb\u9664\u5956\u52b1")},clientTimeStamp:function(){return(new Date).getTime()}},"clientTimeStamp",function(){return(new Date).getTime()}),o(i,"requestCPAGame",function(e){var t=window.facade.httpServerAdress+window.net.RecommendGame,n={game_id:window.facade.GameId,token:window.facade.getComponent("PlayerModel").token},i=this;s.postReq(t,n,{success:function(t){var n=i.setupRecommendList(t.recommend_info);e.success(n)},failure:function(t){e.success(null)}})}),o(i,"setupRecommendList",function(e){for(var t=[],n=0;n<e.length;n++){var i=e[n];5==parseInt(i.group)&&t.push(i)}t=t.sort(function(e,t){return parseInt(e.weight)<parseInt(t.weight)?1:parseInt(e.weight)>parseInt(t.weight)?-1:0});for(var o=[],a=[],s=0;s<t.length;s++){var c=t[s];parseInt(c.navout_cnt)<=0?o.push(c):a.push(c)}if(console.log("lc cpa recommendList =",o,a),o.length>0){var r=parseInt(Math.random()*o.length);return console.log("lc cpa random showParams = ",r,o.length),o[r]}return r=parseInt(Math.random()*a.length),console.log("lc cpa random clickParams = ",r,a.length),a[r]}),o(i,"initConfig",function(){for(var e in this.globalDB=cc.loader.getRes("config/GlobalDB"),this.globalDB){if("47104"==e){var t=this.globalDB[e].value.split("|");this.headOrderIds=t[0].split(":")[1].split(","),this.loopOrderIds=t[0].split(":")[1].split(",")}if("47201"==e&&(this.maxCarTerm=parseInt(this.globalDB[e].value),console.log("lc cpa-- maxCarTerm = ",this.maxCarTerm)),"47202"==e&&(this.cpaGameTime=parseInt(this.globalDB[e].value),console.log("lc cpa-- cpaGameTime = ",this.cpaGameTime)),"47203"==e&&(this.resourceMarkup=parseInt(this.globalDB[e].value),console.log("lc cpa-- resourceMarkup = ",this.resourceMarkup)),"47204"==e&&(this.carMarkup=parseInt(this.globalDB[e].value),console.log("lc cpa-- carMarkup = ",this.carMarkup)),"47301"==e){var n=this.globalDB[e].value;this.boxReward={},this.boxReward.type=n.split(":")[0],this.boxReward.content=n.split(":")[1],console.log("lc cpa-- boxReward = ",this.boxReward)}"47302"==e&&(this.boxGameTime=parseInt(this.globalDB[e].value),console.log("lc cpa-- boxGameTime = ",this.boxGameTime))}}),i)),cc._RF.pop()},{ModuleEventEnum:"ModuleEventEnum",Network:"Network"}],SceneSplash:[function(e,t,n){"use strict";cc._RF.push(t,"c3933dgyJZHjK8wIZQYo7W6","SceneSplash");e("MainUI");var i=e("HttpUtil");cc.Class({extends:cc.Component,properties:{splash:cc.Node,clickTips:cc.Node,loginNode:cc.Node,userNameEb:cc.EditBox,passwordEb:cc.EditBox,isCanGet:{default:!0,visible:!1},dataNode:cc.Node},start:function(){var e=this;cc.game.addPersistRootNode(this.dataNode),this.dataNode.getData=function(){return this.data},cc.director.preloadScene("Start",function(){var t=cc.sys.localStorage.getItem("motaUserName"),n=cc.sys.localStorage.getItem("motaPassword");void 0===t||null==t||"null"==t||"undefined"===n||null==n||"null"==n?(e.userNameEb.string="",e.passwordEb.string=""):(e.userNameEb.string=t,e.passwordEb.string=n),e.clickTips.active=!1,e.loginNode.active=!1,e.splash.opacity=0,e.splash.runAction(cc.sequence(cc.fadeIn(.5),cc.callFunc(function(){cc.sys.isBrowser?(e.clickTips.active=!0,e.clickTips.runAction(cc.repeatForever(cc.blink(1,1))),e.node.on("touchstart",function(){e.loginNode.active=!0})):e.loginNode.active=!0})))})},onClickLoginButton:function(e,t){if(""!=this.userNameEb.string&&""!=this.passwordEb.string){if(0!=this.isCanGet){this.isCanGet=!1;var n=this;i.request("user/login",{},"POST",function(e,t){n.isCanGet=!0,e?n.showTip(e):200==t.status?(console.log("user/gem/buy? == ",t),cc.sys.localStorage.setItem("userInfo",JSON.stringify(t.result.user)),cc.sys.localStorage.setItem("motaUserName",n.userNameEb.string),cc.sys.localStorage.setItem("motaPassword",n.passwordEb.string),n.dataNode.data=t,cc.director.loadScene("Start")):n.showTip(t.message)},3e4,JSON.stringify({password:n.passwordEb.string,username:n.userNameEb.string}))}}else n.showTip("\u7528\u6237\u540d\u5bc6\u7801\u4e0d\u80fd\u4e3a\u7a7a\uff01")},onClickRegisterButton:function(e,t){if(cc.find("Canvas/SaveData").active)if(""!=this.userNameEb.string&&""!=this.passwordEb.string){if(0!=this.isCanGet){this.isCanGet=!1;var n=this;i.request("user/register",{},"POST",function(e,t){n.isCanGet=!0,e?n.showTip(e):200==t.status?(cc.sys.localStorage.setItem("motaUserName",n.userNameEb.string),cc.sys.localStorage.setItem("motaPassword",n.passwordEb.string),n.dataNode.data=t,n.showTip(t.message)):n.showTip(t.message)},3e4,JSON.stringify({password:n.passwordEb.string,username:n.userNameEb.string}))}}else n.showTip("\u7528\u6237\u540d\u5bc6\u7801\u4e0d\u80fd\u4e3a\u7a7a\uff01");else cc.loader.loadRes("ui/PageScrollView",function(e,t){var n=cc.instantiate(t);cc.director.getScene().getChildByName("Canvas").addChild(n)})},showTip:function(e){null==this.floatNode?cc.loader.loadRes("pfb/FloatTip",function(t,n){this.floatNode=cc.instantiate(n),this.floatNode.getChildByName("Label").getComponent(cc.Label).string=e,cc.director.getScene().getChildByName("Canvas").addChild(this.floatNode),this.runFloat()}.bind(this)):(this.floatNode.getChildByName("Label").getComponent(cc.Label).string=e,this.floatNode.stopAllActions(),this.floatNode.opacity=255,this.floatNode.setPosition(0,50),this.runFloat())},runFloat:function(){this.floatNode.opacity=255,this.floatNode.runAction(cc.sequence(cc.delayTime(1),cc.spawn(cc.moveBy(1,cc.v2(0,50)),cc.fadeOut(1)),cc.callFunc(this.hideFloat,this)))},hideFloat:function(){this.floatNode&&(this.floatNode.removeFromParent(),this.floatNode=null)}}),cc._RF.pop()},{HttpUtil:"HttpUtil",MainUI:"MainUI"}],ScrollView:[function(e,t,n){"use strict";cc._RF.push(t,"a76f6YImilJPYbd0LHAHI+u","ScrollView"),cc.Class({extends:cc.Component,properties:{btnStatus:!1,ToggBtn:cc.Toggle,SubmitBtn:cc.Button,SaveData:cc.Node,PageView:cc.Node},readerBtn:function(){this.ToggBtn.isChecked?this.SubmitBtn.interactable=!0:this.SubmitBtn.interactable=!1},submitBtn:function(e,t){this.PageView.destroy(),cc.find("Canvas/SaveData").active=!0}}),cc._RF.pop()},{}],ShareADModel:[function(e,t,n){"use strict";cc._RF.push(t,"635022/PNBBYpoWUCycUJQX","ShareADModel");var i=e("ModuleEventEnum");e("Network"),e("AlertTool"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){this.dayId=1,this.shareCount=0,this.videoCount=0,this.loginCount=1,this.dayShareADCount=0,this.dayShareCount=0,this.dayADCount=0,this.lastLoginTime=this.getLocalTime(),this.shareInterval=500,this.shareOpen=!0,this.initConfig(),facade.isMiniGame&&(cc.systemEvent.on(i.WX_REGISTERED,this.onWxRegistered,this),cc.systemEvent.on(i.GOT_HTTP_RES,this.httpResDeal2.bind(this)),cc.systemEvent.on(i.WX_SHOW,this.onWxShow.bind(this)),cc.systemEvent.on(i.WX_HIDE,this.onWxHide.bind(this)))},initConfig:function(){cc.loader.loadResArray(["config/ASOrderConfig","config/ASRuleConfig","config/GameConfig"],cc.JsonAsset,this.configLoaded.bind(this))},httpResDeal2:function(e){var t;(e=e.data)&&e.invite_newbie&&(this.newerCount=e.invite_newbie.length,this.newbieList=e.invite_newbie,this.newbieList&&this.newbieList.length>1&&(t=this.sortList(this.newbieList,"newbieFetchList")),this.generateOrder(),cc.systemEvent.emit(i.GAME_OPEN_NEWBIE_INVITE,t)),e&&e.invite_alive&&(this.activityCount=e.invite_alive.length,this.activityList=e.invite_alive,this.generateOrder(),cc.systemEvent.emit(i.GAME_OPEN_DAILY_INVITE,this.activityList))},httpResDeal:function(e){if(e&&e.record){var t=JSON.parse(e.record);console.log("ShareADModel data:",t),this.dayCheck(t),this.saveRecord()}},sortList:function(e,t){for(var n=[],i=facade.getComponent("GameModel")[t],o=0;o<e.length;o++){for(var a=0;a<i.length&&i[a].user_id!=e[o].user_id;a++);n.push(e[o])}return n.sort(function(e,t){return e.add_ts>t.add_ts?1:-1}),n},getLocalTime:function(){var e=new Date;return e.getTime()-6e4*e.getTimezoneOffset()},dayCheck:function(e){this.lastLoginTime=Number(e.lastLoginTime),this.dayId=Number(e.dayId),this.loginCount=Number(e.loginCount),this.dayADCount=Number(e.dayADCount),this.dayShareCount=Number(e.dayShareCount),this.dayShareADCount=Number(e.dayShareADCount),this.shareCount=Number(e.shareCount),this.videoCount=Number(e.videoCount);var t=this.getLocalTime(),n=Math.floor(this.lastLoginTime/86400/1e3),o=Math.floor(t/86400/1e3),a=new Date(86400*o*1e3),s=new Date(86400*n*1e3);console.log("lastDay:",s.toString()),console.log("today:",a.toString()),console.log("day check:",n,"----------",o),n<o&&(this.dayId++,this.dayADCount=0,this.dayShareCount=0,this.dayShareADCount=0),this.lastLoginTime=t,this.loginCount++,this.generateOrder(),cc.systemEvent.emit(i.LOGININFO_GOT)},generateOrder:function(){if(this.GameConfig){this.activityCount||(this.activityCount=0),this.newerCount||(this.newerCount=0);var e=this.dayId-1;if(e<1&&(e=1),this.videoFactor=this.videoCount/e,this.newerFactor=this.newerCount/e,this.activityFactor=this.activityCount/e,this.shareFactor=this.newerFactor*Number(this.GameConfig.NewerValue.Value)/100+this.activityFactor*Number(this.GameConfig.OnlineValue.Value)/100,1==this.dayId)this.headOrderIds=this.GameConfig["Day_"+this.dayId+"_AS_Order"].Value.split(":")[0].split(","),this.loopOrderIds=this.GameConfig["Day_"+this.dayId+"_AS_Order"].Value.split(":")[1].split(",");else if(this.dayId<=3){var t=this.GameConfig["Day_"+this.dayId+"_AS_Order"].Value.split("|")[0],n=this.GameConfig["Day_"+this.dayId+"_AS_Order"].Value.split("|")[1],i=t.split(":")[0],o=t.split(":")[1];if(this.newerFactor==Number(i)&&this.shareCount/e<Number(o)&&(this.headOrderIds=n.split(":")[0].split(",")),this.loopOrderIds=n.split(":")[1].split(","),this.videoFactor<1){for(var a=0;a<this.headOrderIds.length;a++)"2"==this.headOrderIds[a]&&(this.headOrderIds[a]="4");for(a=0;a<this.loopOrderIds.length;a++)"2"==this.loopOrderIds[a]&&(this.loopOrderIds[a]="4")}}else{var s=this.GameConfig.Day_4_AS_OrderA.Value.split("|")[0],c=this.GameConfig.Day_4_AS_OrderB.Value.split("|")[0];if(this.loginCount/e<Number(s))this.headOrderIds=this.GameConfig.Day_4_AS_OrderA.Value.split("|")[1].split(",");else if(this.newerCount<Number(c))this.headOrderIds=this.GameConfig.Day_4_AS_OrderB.Value.split("|")[1].split(",");else{var r=this.getRulesId(1,e);this.headOrderIds=this.ASOrderConfig[r].Value}var l=this.getRulesId(2,e);this.loopOrderIds=this.ASOrderConfig[l].Value}}},getRulesId:function(e,t){for(var n=[],i=1;i<=3;i++){for(var o=this.asRules["type_"+i],a=0,s=0;s<o.length;s++){var c=0;1==i?c=this.shareCount/t:2==i?c=this.videoFactor:3==i&&(c=this.shareFactor),c>=o[s].value&&(a=o[s].id)}n.push(a)}var r=e+"";for(i=0;i<n.length;i++)r+="_"+n[i];return r},saveRecord:function(){if("SkipPage"!=facade.CurrentScene){var e={};e.dayId=this.dayId,e.loginCount=this.loginCount,e.lastLoginTime=this.lastLoginTime,e.shareCount=this.shareCount,e.videoCount=this.videoCount,e.dayShareADCount=this.dayShareADCount,e.dayShareCount=this.dayShareCount,e.dayADCount=this.dayADCount,console.log("save shareModel data:",e);var t={game_id:window.facade.GameId,token:window.facade.getComponent("PlayerModel").token,record_type:3,record:JSON.stringify(e)};window.net.getComponent("Net").httpRequest(window.net.SaveRecord,t)}},configLoaded:function(e,t){for(var n=0;n<t.length;n++)"ASOrderConfig"==t[n].name?this.ASOrderConfig=t[n].json:"ASRuleConfig"==t[n].name?this.ASRuleConfig=t[n].json:"GameConfig"==t[n].name&&(this.GameConfig=t[n].json);if(this.GameConfig&&(this.headOrderIds=this.GameConfig.Day_1_AS_Order.Value.split(":")[0].split(","),this.loopOrderIds=this.GameConfig.Day_1_AS_Order.Value.split(":")[1].split(","),this.maxADCount=Number(this.GameConfig.VideoLimit.Value),this.maxShareCount=Number(this.GameConfig.ShareLimit.Value),facade.getComponent("LevelModel").vipStarNeed=Number(this.GameConfig.VipUnlockLevel.Value),facade.getComponent("LevelModel").injuryStarNeed=Number(this.GameConfig.InjuryUnlockLevel.Value),facade.getComponent("LevelModel").gndStarNeed=Number(this.GameConfig.GrenadegrUnlockLevel.Value)),this.ASRuleConfig)for(var i in this.asRules={},this.ASRuleConfig){var o=this.ASRuleConfig[i];this.asRules["type_"+String(o.Type)]||(this.asRules["type_"+String(o.Type)]=[]);var a={};a.id=o.ID,a.value=1==o.ValueType?o.Value:o.Value/1e4,this.asRules["type_"+String(o.Type)].push(a)}this.generateOrder()},getShareADType:function(){console.log("lc shareAD-- \u5206\u4eab\u6b21\u6570 = ",this.dayShareCount),console.log("lc shareAD-- \u89c6\u9891\u6b21\u6570 = ",this.dayADCount),console.log("lc shareAD-- \u5206\u4eab\u89c6\u9891\u5408\u4f53 \u6b21\u6570 =",this.dayShareADCount);var e=void 0;if(this.dayShareADCount<this.headOrderIds.length)e=Number(this.headOrderIds[this.dayShareADCount]),console.log("lc shareAD--  \u521d\u59cb\u5e8f\u5217: \u7c7b\u578b= ",1==parseInt(e)?"\u89c6\u9891":"\u5206\u4eab");else{var t=this.dayShareADCount%this.loopOrderIds.length;e=Number(this.loopOrderIds[t]),console.log("lc shareAD--  \u5faa\u73af\u5e8f\u5217: \u7c7b\u578b= ",1==parseInt(e)?"\u89c6\u9891":"\u5206\u4eab")}return 1==e?this.dayADCount<this.maxADCount?(console.log("lc shareAD-- type \u968f\u673a\uff1a\u770b\u89c6\u9891",this.dayADCount,this.maxADCount),1):this.dayShareCount<this.maxShareCount?(console.log("lc shareAD-- type \u968f\u673a\uff1a \u89c6\u9891\u770b\u5b8c \u53bb\u5206\u4eab",this.dayShareCount,this.maxShareCount),2):(console.log("lc shareAD-- type \u968f\u673a\uff1a \u89c6\u9891\u770b\u5b8c \u5206\u4eab\u8d85\u8fc7\u6b21\u6570",this.dayShareCount,this.dayADCount),3):2==e?this.dayShareCount<this.maxShareCount?(console.log("lc shareAD-- type \u968f\u673a\uff1a \u53bb\u5206\u4eab",this.dayShareCount,this.maxShareCount),2):this.dayADCount<this.maxADCount?(console.log("lc shareAD-- type \u968f\u673a\uff1a\u5206\u4eab\u6b21\u6570\u5b8c\u6210 \u53bb\u770b\u89c6\u9891",this.dayADCount,this.maxADCount),1):(console.log("lc shareAD-- type \u968f\u673a\uff1a\u5206\u4eab\u8d85\u8fc7\u6b21\u6570\uff0c \u89c6\u9891\u770b\u5b8c ",this.dayShareCount,this.dayADCount),3):e},clientTimeStamp:function(){return(new Date).getTime()},showShareAD:function(e,t){this.callback=t,this.type=e,facade.isMiniGame?this.setupShareInfo(t):t.succ(e)},setupVideoInfo:function(){var e=this;null==this.gameVideo?(console.log("lc shareAD--  \u521d\u59cb\u5316 gameVideo"),this.sendMggfBehaveReport(1,1),this.gameVideo=wx.createRewardedVideoAd({adUnitId:"adunit-5b4582e3072248c3"}),this.gameVideo.onError(function(t){e.sendMggfBehaveReport(4,1),console.log("lc shareAD--  \u89c6\u9891\u52a0\u8f7d\u5931\u8d25 = ",t.errMsg),e.setupShareInfo(null)}),this.gameVideo.onClose(function(t){t.isEnded?(console.log("lc shareAD-- \u89c2\u770b\u5b8c\u6210 \u5173\u95ed = "),e.callback&&(e.callback.succ(e.type),e.callback=null),e.sendMggfBehaveReport(3,1)):(console.log("lc shareAD--  \u89c2\u770b\u672a\u5b8c\u6210 \u5173\u95ed = "),e.callback&&(e.callback.fail("\u8fd8\u6ca1\u6709\u770b\u5b8c\u89c6\u9891,\u6ca1\u6cd5\u9886\u53d6\u5956\u52b1\u54e6~",e.type),e.callback=null))})):console.log("lc shareAD--  \u5df2\u7ecf\u521b\u5efa gameVideo"),this.gameVideo.load().then(function(){e.gameVideo.show().then(function(){e.sendMggfBehaveReport(2,1),console.log("lc shareAD--  \u663e\u793a\u6210\u529f, \u4e0a\u62a5")})}).catch(function(t){e.sendMggfBehaveReport(4,1),console.log("lc shareAD--  load \u770b\u89c6\u9891\u5931\u8d25 \u53bb\u5206\u4eab",t),e.setupShareInfo(null)}),this.dayADCount++,this.videoCount++,this.dayShareADCount++,this.saveRecord()},setupShareInfo:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";this.shareDataArr=facade.getComponent("GameModel").shareConfig;var o=this,a=this.shareDataArr[c(0,this.shareDataArr.length)];function s(t){if(e){var n=void 0;t?((n=c(0,3)-1)<0&&(n=0),wx.showToast({title:[" \u5206\u4eab\u6210\u529f","\u5206\u4eab\u6210\u529f"][n]})):((n=c(0,4)-1)<0&&(n=0),wx.showToast({title:["\u5206\u4eab\u5931\u8d25","\u5206\u4eab\u5931\u8d25","\u5206\u4eab\u5931\u8d25"][n]}))}}function c(e,t){return Math.random()*(t-e)+e<<0}""==t&&(t=a.title,n=a.img),this.shareTime=(new Date).getTime(),wx.onShow(function a(){var c=this;e&&(setTimeout(function(){if((new Date).getTime()-o.shareTime>=3e3)Math.random()>.1?(e&&e.succ(),s(!0)):(e&&e.fail(),s(!1));else if(Math.random()>.8)e&&e.succ(),s(!0);else{if(1==o.shareTimes)return e&&e.fail(),s(!1),void(o.shareTimes=0);s(!1),e&&setTimeout(function(){wx.showModal({title:"\u63d0\u793a",content:"\u83b7\u53d6\u5931\u8d25\uff0c\u6362\u6362\u5176\u4ed6\u7684\u597d\u53cb\u8bd5\u8bd5\u5427",showCancel:!0,cancelText:"\u77e5\u9053\u4e86",confirmText:"\u91cd\u65b0\u83b7\u53d6",success:function(a){a.confirm?(o.shareTimes++,o.share(t,n,i,e)):a.cancel&&console.log("\u7528\u6237\u70b9\u51fb\u786e\u5b9a")}})},c,1e3)}},1e3),wx.offShow(a))}),wx.shareAppMessage({title:t,imageUrl:n,query:function(e){if(!e)return"";var t="";for(var n in e)t+=n+"="+e[n]+"&";return t}(i),cancel:function(e){}}),this.dayShareCount++,this.shareCount++,this.dayShareADCount++,this.saveRecord()},onWxRegistered:function(){this.initDefaultShare(),this.requestOnlineInfo(),this.reportInviteInfo(),this.requestInvitee(),this.saveRecord(),cc.systemEvent.emit(i.LOGININFO_GOT)},requestInvitee:function(){var e={game_id:window.facade.GameId,token:window.facade.getComponent("PlayerModel").token};window.net.getComponent("Net").httpRequest(window.net.InviteeList,e)},requestOnlineInfo:function(){var e={game_id:window.facade.GameId,token:window.facade.getComponent("PlayerModel").token,record_type:3},t="",n=0;for(var i in e)n>0&&(t+="&"),n++,t+=i+"="+e[i];var o=window.facade.httpServerAdress+window.net.GetRecord,a=new XMLHttpRequest;a.onreadystatechange=function(){4==a.readyState&&200==a.status&&this.httpResDeal(JSON.parse(a.responseText).data)}.bind(this),a.onerror=function(e){},a.open("POST",o,!0),a.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),a.send(t)},reportInviteInfo:function(){var e=window.facade.getComponent("PlayerModel").wxAdaptor.getinviteRid(),t=window.facade.getComponent("PlayerModel").wxAdaptor.getinviteType(),n={game_id:window.facade.GameId,token:window.facade.getComponent("PlayerModel").token,invite_type:t,inviter_uid:e};window.net.getComponent("Net").httpRequest(window.net.AcceptInvite,n)},countWhetherShare:function(){return!0},getShareConfig:function(e){this.shareConfig=[{count:1,random:0},{count:2,random:500},{count:3,random:1e3},{count:4,random:1500},{count:5,random:8e3}];for(var t=0;t<this.shareConfig.length;t++){var n=this.shareConfig[t];if(n.count==e)return console.log("lc shareAD-- config =  ",n),n}return console.log("lc shareAD-- config1 =  ",{count:2,random:1500}),{count:6,random:1e4}},getShareCount:function(){var e=cc.sys.localStorage.getItem("ShareFailCount");return e||(e=0),console.log("lc shareAD-- getShareErrCount = ",e),e},saveShareFailCount:function(e){if(0==e)cc.sys.localStorage.setItem("ShareFailCount",0);else{var t=cc.sys.localStorage.getItem("ShareFailCount");t||(t=0),t+=1,console.log("lc shareAD-- saveShareErrCount = ",t),cc.sys.localStorage.setItem("ShareFailCount",t)}},initDefaultShare:function(){wx.onShareAppMessage(function(){return{title:"\u5f00\u5c40\u4e00\u6761\u547d\u4e00\u628a98K\uff0c\u4f60\u80fd\u95ef\u591a\u5c11\u5173",imageUrl:"https://gcdn.qdos.com/game/common/file/201911061730043511/ab12312.png"}}),wx.showShareMenu({withShareTicket:!0})},defaultShareParamsInit:function(e,t,n){var i=this;console.log("defaultShareParamsInit...",e,t,n),this.defaultShareText=e,this.defaultShareImge=t,this.defaultShareQuery=n,wx.onShareAppMessage(function(){return console.log("defaultShare..."),i.shareCount++,i.dayShareADCount++,i.dayShareCount++,window.net.getComponent("Net").behaveReport(window.facade.BEHAVE_SHARE),{title:i.defaultShareText,imageUrl:i.defaultShareImge,query:i.defaultShareQuery}})},sendMggfBehaveReport:function(e,t){var n={};n.da_action=e,n.da_position=void 0==this.showId?0:this.showId,n.da_type=t,n.game_id=facade.GameId,n.user_id=window.facade.getComponent("PlayerModel").privateUid,n.time=Math.floor((new Date).getTime()/1e3);var i=this.getMggfSign(n);n.sign=i;var o=window.facade.httpServerAdress+"log/collectorDa",a=new XMLHttpRequest;a.onreadystatechange=function(e){}.bind(this),a.onerror=function(e){},a.open("POST",o,!1),a.send(n)},getMggfSign:function(e){var t="da_action="+e.da_action+"&da_position="+e.da_position+"&da_type="+e.da_type+"&game_id="+e.game_id+"&time="+e.time+"&user_id="+e.user_id+"|"+facade.Client_Secret;return console.log("lc getMggfSign =",t,cc.md5Encode(t).toLowerCase()),cc.md5Encode(t).toLowerCase()},onWxShow:function(){},onWxHide:function(){},onShowInterstital:function(){this.showShareAD({inviteId:0,videoId:0,assistId:0,interstitalId:31107},{succ:function(e){}.bind(this),fail:function(e,t){}.bind(this)})}}),cc._RF.pop()},{AlertTool:"AlertTool",ModuleEventEnum:"ModuleEventEnum",Network:"Network"}],SignIn:[function(e,t,n){"use strict";cc._RF.push(t,"02583WiMTlDYYkJoW2yQZ2M","SignIn"),cc.Class({extends:cc.Component,properties:{sDayImg:cc.Node,sDayIsGet:cc.Node,sDayNow:cc.Node,sDayNum:cc.Label,uiName:cc.Node,title:cc.Label,content:cc.Node,item:cc.Prefab,doubleBtn:cc.Node,normalBtn:cc.Node},onLoad:function(){this.closeActTime=.18,this.normalBtn.scale=1},viewDidAppear:function(){this.content.active=!0,this.initContent(),this.setupShare(),e("VirBannerCtrl").hideVirBanner()},initContent:function(){var e=facade.getComponent("GameModel").getRewardConfig();console.log("config: ",e);var t,n=facade.getComponent("GameModel").fetchDays,i=Math.floor(facade.getComponent("GameModel").lastFetchSignInTime/86400/1e3),o=Math.floor(facade.getComponent("GameModel").getLocalTime()/86400/1e3);null==n&&(n=0),null==i&&(i=0),i>=o&&(this.doubleBtn.active=!1,this.normalBtn.active=!1),0==n?(this.title.string="\u7b2c1\u5929",t=1):(t=n%7==0?7:n%7,i<o&&(t=7==t?1:t+1),this.title.string="\u7b2c"+t+"\u5929"),7==t&&(o>i?(this.sDayNow.active=!0,this.sDayIsGet.active=!1):(this.sDayNow.active=!1,this.sDayIsGet.active=!0)),this.doubleBtn.active=o>i,this.normalBtn.active=o>i;for(var a=0;a<e.length-1;a++){var s=cc.instantiate(this.item);s.getComponent("SigninItem").initData(e[a],t),s.parent=this.content,s.opacity=0,s.scaleY=0}this.sDayNum.string="x"+e[e.length-1].AwardNum;var c="";switch(e[e.length-1].AwardType){case 1:c="cash";break;case 2:c="strength";break;case 3:c="video",this.sDayNum.node.active=!1;break;case 4:c="skin",this.sDayNum.node.active=!1,cc.loader.loadRes("roles",cc.SpriteAtlas,this.updateSkin.bind(this))}this.sDayImg.getChildByName(c).active=!0,this.reward=e[t-1],this.sDayReward=e[6],this.doAction()},doAction:function(){this.title.node.runAction(cc.moveBy(.3,cc.v2(-500,0)).easing(cc.easeInOut(3))),this.uiName.runAction(cc.moveBy(.3,cc.v2(500,0)).easing(cc.easeInOut(3)));for(var e=cc.spawn(cc.fadeIn(.3),cc.scaleTo(.3,1).easing(cc.easeIn(3))),t=cc.spawn(cc.fadeIn(.3),cc.scaleTo(.3,1).easing(cc.easeIn(3))),n=[],i=[],o=this.content.children,a=0;a<o.length;a++)a<3?n.push(o[a]):i.push(o[a]);this.count=1,this.actId=setInterval(function(){if(4!=this.count){if(3==this.count)return this.sDayIsGet.parent.runAction(e.clone()),void this.count++;var t=2==this.count?i:n;for(var o in t)t[o].runAction(e.clone());this.count++}else clearInterval(this.actId)}.bind(this),250),this.doubleBtn.runAction(t),this.normalBtn.opacity=255},setupShare:function(){2!=facade.getComponent("ShareADModel").getShareADType()?this.doubleBtn.getChildByName("video").active=!0:this.doubleBtn.getChildByName("share").active=!0},updateSkin:function(e,t){if(e)console.error(e);else{var n=t.getSpriteFrame("MrBullet_Role_Body_0"+this.sDayReward.AwardNum);this.sDayImg.getChildByName("skin").getChildByName("head").getComponent(cc.Sprite).spriteFrame=n}},onClickNormalGet:function(){facade.getComponent("GameModel").applySignReward(!1,this.reward)},onClickDoubleGet:function(){var e=this;window.facade.getComponent("ShareADModel").showShareAD({inviteId:1531,videoId:21105,assistId:0,interstitalId:31105},{succ:function(t){console.log("\u4e03\u65e5\u767b\u9646 \u5206\u4eab/\u89c6\u9891:",t),facade.getComponent("GameModel").applySignReward(!0,e.reward),window.popUp.getComponent("Pop").removeTop()}.bind(this),fail:function(e,t){popUp.getComponent("FloatTip").showTip(e)}.bind(this)})},onClickClose:function(){popUp.getComponent("Pop").removeTop()},doClose:function(){var e=cc.scaleTo(.2,1.4);this.sDayIsGet.parent.runAction(e.clone());var t=this.content.children;for(var n in t)t[n].runAction(e.clone());this.doubleBtn.runAction(e.clone()),this.title.node.runAction(e.clone()),this.uiName.runAction(e.clone())}}),cc._RF.pop()},{VirBannerCtrl:"VirBannerCtrl"}],SigninItem:[function(e,t,n){"use strict";cc._RF.push(t,"ce226vSGbNOUazJPrIKRQLw","SigninItem"),cc.Class({extends:cc.Component,properties:{now:cc.Node,isGet:cc.Node,day:cc.Label,rewardNode:cc.Node,rewardCount:cc.Label},initData:function(e,t){this.curDay=t,this.mainData=e},start:function(e,t){e=Math.floor(facade.getComponent("GameModel").lastFetchSignInTime/86400/1e3);t=Math.floor(facade.getComponent("GameModel").getLocalTime()/86400/1e3),this.now.active=!1,this.isGet.active=this.curDay>this.mainData.Day,this.curDay==this.mainData.Day&&(e<t?(this.now.active=!0,this.isGet.active=!1):e==t&&(this.now.active=!1,this.isGet.active=!0)),this.day.string="\u7b2c"+this.mainData.Day+"\u5929",this.rewardCount.string="x"+this.mainData.AwardNum;var n="";switch(this.mainData.AwardType){case 1:n="cash";break;case 2:n="strength";break;case 3:n="video",this.rewardCount.node.active=!1;break;case 4:n="skin",this.rewardCount.node.active=!1,cc.loader.loadRes("roles",cc.SpriteAtlas,this.updateSkin.bind(this))}this.rewardNode.getChildByName(n).active=!0},updateSkin:function(e,t){if(e)console.error(e);else{var n=t.getSpriteFrame("MrBullet_Role_Body_0"+this.mainData.AwardNum);this.rewardNode.getChildByName("skin").getChildByName("head").getComponent(cc.Sprite).spriteFrame=n;var i=t.getSpriteFrame("MrBullet_Role_AimArm_0"+this.mainData.AwardNum);this.rewardNode.getChildByName("skin").getChildByName("New Sprite").getComponent(cc.Sprite).spriteFrame=i}}}),cc._RF.pop()},{}],SkinPanel:[function(e,t,n){"use strict";cc._RF.push(t,"cd0bcDc5epDureK6lVcTz12","SkinPanel"),cc.Class({extends:cc.Component,properties:{recommendPre:cc.Prefab},onLoad:function(){},onEnable:function(){"qq"!=net.platformName?cc.director.getScene().getChildByName("Canvas").getChildByName("recommendBar").zIndex=1e4:facade.getComponent("BannerModel").showBanner()},start:function(){},init:function(){this.inited=!0},onClose:function(){cc.director.getScene().getChildByName("Canvas").getComponent("MainUI").hideSkinPanel()},onDisable:function(){this.inited=!1,"qq"!=net.platformName?(cc.director.getScene().getChildByName("Canvas").getChildByName("recommendBar").zIndex=1,cc.director.getScene().getChildByName("Canvas").getChildByName("recommendBar").active=!0):facade.getComponent("BannerModel").hideBanner()},update:function(e){this.node.active&&!this.inited&&this.init()}}),cc._RF.pop()},{}],SkipPanel:[function(e,t,n){"use strict";cc._RF.push(t,"55030g5ChdKTIn/5UiCpRGa","SkipPanel");var i=e("ModuleEventEnum");cc.Class({extends:cc.Component,properties:{skipButton:cc.Sprite,skipByShareSkin:cc.SpriteFrame,skipByVedioSkin:cc.SpriteFrame,recommendPre:cc.Prefab},onLoad:function(){},start:function(){},onEnable:function(){cc.director.getScene().getChildByName("Canvas").getChildByName("recommendBar").zIndex=1e4},initRecommond:function(){},init:function(){this.rewardType=window.facade.getComponent("ShareADModel").getShareADType(),2!=this.rewardType?this.skipButton.spriteFrame=this.skipByVedioSkin:this.skipButton.spriteFrame=this.skipByShareSkin,this.initRecommond()},hide:function(){this.node.parent.getComponent("LevelUI").hideSkip()},onDisable:function(){this.inited=!1,cc.director.getScene().getChildByName("Canvas").getChildByName("recommendBar").zIndex=1,cc.director.getScene().getChildByName("Canvas").getChildByName("recommendBar").active=!0},skip:function(){if(!facade.isMiniGame)return this.hide(),void cc.systemEvent.emit(i.SKIP);if(this.rewardType>2)popUp.getComponent("FloatTip").showTip("\u5df2\u7ecf\u8d85\u51fa\u4eca\u5929\u7684\u8df3\u5173\u4e0a\u9650\u5566\uff01");else{window.facade.getComponent("ShareADModel").showShareAD({inviteId:1528,videoId:21102,assistId:0,interstitalId:31102},{succ:function(e){console.log("\u8df3\u5173\u5206\u4eab\u6210\u529f:",e),this.hide(),cc.systemEvent.emit(i.SKIP)}.bind(this),fail:function(e,t){popUp.getComponent("FloatTip").showTip(e)}.bind(this)})}},update:function(e){}}),cc._RF.pop()},{ModuleEventEnum:"ModuleEventEnum"}],SoundManager:[function(e,t,n){"use strict";cc._RF.push(t,"90890qbQ4ZAzbJfXpRW4aCT","SoundManager"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){},start:function(){this._soundActive=!0,this.isPlayingBgm=!1,this._effectSources={},this._currentMusicVolume=100,this._loadEffectWaits=[]},playEffect:function(e,t,n){t||(t=!1),n||(n=100);var i="audio/"+e+".mp3";if(null==this._effectSources[i]){if(this._soundActive){var o={};o.file=i,o.isLoop=t,o.volume=n,this._loadEffectWaits.push(o)}}else{this._currentVolume=n;var a=cc.audioEngine.play(cc.loader.getRes(i),t,this._currentVolume/100);this._effectSources[i]=a}},loadBGMResCallBack:function(e,t){cc.audioEngine.stop(this.bgmId),this.bgmId=cc.audioEngine.play(t,!0,this._currentMusicVolume/300)},loadEffectResCallBack:function(e,t){this._isLoading=!1;var n=cc.audioEngine.play(t,!1,this._currentVolume/100);this._effectSources[this._currentFile]=n},stopEffect:function(e){var t="audio/"+e+".mp3";cc.audioEngine.stop(this._effectSources[t])},stopAllEffects:function(){for(var e in this._effectSources)cc.audioEngine.stop(this._effectSources[e]),cc.audioEngine.uncache(e),delete this._effectSources[e];this._effectSources={}},setBGM:function(e){if(this._currentBGMKey=e,this._soundActive){if(this._currentBGM==e)return void this.resumeBGM();var t="audio/"+e+".mp3";if(this._currentBGM==t)return void this.resumeBGM();this._currentBGM=t,cc.loader.loadRes(t,this.loadBGMResCallBack.bind(this)),this.isPlayingBgm=!0}},playBGM:function(){},resumeBGM:function(){if(this._soundActive)return null!=this.bgmId&&(this.isPlayingBgm=!0,cc.audioEngine.resume(this.bgmId),!0)},pauseBGM:function(){this.isPlayingBgm=!1,cc.audioEngine.pause(this.bgmId)},stopBGM:function(){this.isPlayingBgm=!1,cc.audioEngine.stop(this.bgmId),cc.audioEngine.uncache(this._currentBGM),this.bgmId=null},setBGMVolume:function(e){this._currentMusicVolume=e},stopAllSound:function(){this.stopAllEffects()},update:function(e){if(0!=this._loadEffectWaits.length&&1!=this._isLoading){var t=this._loadEffectWaits.shift();this._currentFile=t.file,this._currentLoop=t.isLoop,this._currentVolume=t.volume,cc.loader.loadRes(this._currentFile,this.loadEffectResCallBack.bind(this)),this._isLoading=!0}},setSoundEnabled:function(e){this._soundActive=e,e?this.resumeBGM()||(this._currentBGMKey?this.setBGM(this._currentBGMKey):"Game"==window.facade.CurrentScene&&(this._currentBGM=null,this.setBGM("Bgm"))):(this.pauseBGM(),this.stopAllEffects())}}),cc._RF.pop()},{}],SoundSwitch:[function(e,t,n){"use strict";cc._RF.push(t,"c5144yKuW9O4KuGYiJAD6x1","SoundSwitch"),cc.Class({extends:cc.Component,properties:{skinOn:cc.SpriteFrame,skinOff:cc.SpriteFrame},onLoad:function(){this._soundSwitch=!0;var e=cc.sys.localStorage.getItem("Shooter_Sound");this._soundSwitch=!e||"true"==e,this.updateStatus()},start:function(){},trigger:function(){if(facade.FOR_DEVELOP){var e={game_id:window.facade.GameId,token:window.facade.getComponent("PlayerModel").token,record_type:2,record:"{}"};window.net.getComponent("Net").httpRequest(window.net.SaveRecord,e);var t={game_id:window.facade.GameId,token:window.facade.getComponent("PlayerModel").token,record_type:1,record:"{}"};window.net.getComponent("Net").httpRequest(window.net.SaveRecord,t);var n={game_id:window.facade.GameId,token:window.facade.getComponent("PlayerModel").token,record_type:3,record:"{}"};window.net.getComponent("Net").httpRequest(window.net.SaveRecord,n)}this._soundSwitch=!this._soundSwitch,this.updateStatus();var i=this._soundSwitch?"true":"false";cc.sys.localStorage.setItem("Shooter_Sound",i)},updateStatus:function(){audio.getComponent("SoundManager").setSoundEnabled(this._soundSwitch)},update:function(e){this.node.getComponent(cc.Sprite).spriteFrame=this._soundSwitch?this.skinOn:this.skinOff}}),cc._RF.pop()},{}],SpriteFrameSet:[function(e,t,n){"use strict";cc._RF.push(t,"97019Q80jpE2Yfz4zbuCZBq","SpriteFrameSet");var i=t,o=cc.Class({name:"SpriteFrameSet",properties:{language:"",spriteFrame:cc.SpriteFrame}});i.exports=o,cc._RF.pop()},{}],Start:[function(e,t,n){"use strict";cc._RF.push(t,"55616u2pOBPmphrfhKinP2i","Start");var i=e("GameConfig");cc.Class({extends:cc.Component,properties:{platformList:{default:[],type:cc.String},facade:cc.Node,soundInstance:cc.Node,net:cc.Node,popUp:cc.Node,texturemanager:cc.Node,guidemanager:cc.Node},onLoad:function(){for(var t in"wx"==i.PLATFORM&&wx.showLoading({title:"\u6e38\u620f\u52a0\u8f7d\u4e2d",mask:!0}),cc.director.getPhysicsManager().enabled=!0,cc.director.getPhysicsManager().gravity=cc.v2(0,-300),window.facade=this.facade,window.audio=this.soundInstance,window.net=this.net,window.textureManager=this.texturemanager,window.popUp=this.popUp,window.net.platformName="",window.net.checkName="",window.facade.isMiniGame=!("wx"!=i.PLATFORM),this.platformList){var n=this.platformList[t].split(","),o=n[0];if(null!=window[""+o]){window.net.platformName=o,window.net.checkName=n[1],console.log("\u5f53\u524d\u5e73\u53f0\uff1a ",window.net.platformName);break}}cc.view.enableRetina(!0),cc.view.enableAntiAlias(!1),window.pool=e("Pool"),cc.game.addPersistRootNode(this.facade),cc.game.addPersistRootNode(this.soundInstance),cc.game.addPersistRootNode(this.net),cc.game.addPersistRootNode(this.popUp),cc.game.addPersistRootNode(this.texturemanager),window.facade.addComponent("GameModel"),window.facade.addComponent("LevelModel"),window.facade.addComponent("PlayerModel"),window.facade.addComponent("RecommendGameModel"),window.facade.addComponent("RewardCPAModel"),window.facade.addComponent("ShareADModel"),window.facade.addComponent("BannerModel"),window.facade.addComponent("RankModel"),window.facade.addComponent("InterstitialADModel"),this.doStart()},doStart:function(){cc.director.setClearColor((new cc.Color).fromHEX("#758F89")),this.initModules();var e=cc.sequence(cc.fadeOut(.05),cc.callFunc(this.gogame.bind(this)));this.node.runAction(e)},gogame:function(){var t=e("ModuleEventEnum");cc.systemEvent.emit(t.GO_GAME)},initModules:function(){window.facade.modules={};var t=e("MConfig");for(var n in t){var i=t[n].key,o=e(i);o.init(),window.facade.modules[i]=o}}}),cc._RF.pop()},{GameConfig:"GameConfig",MConfig:"MConfig",ModuleEventEnum:"ModuleEventEnum",Pool:"Pool"}],Sun:[function(e,t,n){"use strict";cc._RF.push(t,"308cd9kKHlJKZlOXLpMgn21","Sun"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){},start:function(){this.node.active=!1},update:function(e){this.node.angle+=10}}),cc._RF.pop()},{}],Switch:[function(e,t,n){"use strict";cc._RF.push(t,"1c411JC1bhFP4pXKBIpeLlX","Switch"),e("ModuleEventEnum"),cc.Class({extends:cc.Component,properties:{target:cc.Node},onLoad:function(){},start:function(){this.offSKin=this.node.getComponent(cc.Sprite).spriteFrame.name,this.onSKin=this.offSKin.replace("01","02"),cc.loader.getRes("roles",cc.SpriteAtlas)?this.rolesAtlas=cc.loader.getRes("roles",cc.SpriteAtlas):cc.loader.loadRes("roles",cc.SpriteAtlas)},onBeginContact:function(e,t,n){this.rolesAtlas||(this.rolesAtlas=cc.loader.getRes("roles",cc.SpriteAtlas)),"switch"==t.node.group&&"border"!=n.node.group&&(e.disabled=!0,this.node.getComponent(cc.Sprite).spriteFrame=this.rolesAtlas.getSpriteFrame(this.onSKin),this.trigger(n.node))},trigger:function(e){1!=this.trigged&&(this.trigged=!0,"boom"==this.target.group?this.target.getComponent("Boom").explosive():"magic"==this.target.group&&this.target.getComponent("Magic").trigger())},onPreSolve:function(e,t,n){},update:function(e){}}),cc._RF.pop()},{ModuleEventEnum:"ModuleEventEnum"}],TextureLabel:[function(e,t,n){"use strict";cc._RF.push(t,"31c70P6ot5IfYTpMb8m1Erf","TextureLabel"),cc.Class({extends:cc.Component,properties:{color:"y"},onLoad:function(){},start:function(){},setText:function(e){this._word!=e&&(this._word=e,cc.loader.getRes("uis",cc.SpriteAtlas)?this.createWord():cc.loader.loadRes("uis",cc.SpriteAtlas,this.loaded.bind(this)))},loaded:function(){this.createWord()},createWord:function(){this.node.removeAllChildren();for(var e=this._word.split(""),t=e.length-1;t>=0;t--){var n=new cc.Node,i=e[t];"+"==i?i="plus":"/"==i?i="split":":"==i&&(i="colon");var o=cc.loader.getRes("uis",cc.SpriteAtlas);n.addComponent(cc.Sprite).spriteFrame=o.getSpriteFrame("n"+this.color+"_"+i),n.color=this.node.color,this.node.addChild(n)}}}),cc._RF.pop()},{}],TextureManager:[function(e,t,n){"use strict";cc._RF.push(t,"9ef34pSkLJDzKHeFJ2vVe83","TextureManager"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){this._lib={},this._curKey="",this._loadedUrls={},this.resLoadings=[],this.altasLoadings=[],this.spineLoadings=[],this._loadedSpineUrls=[],this._loadedFloorBgs=[],this._loadedDecos=[],this.resLoadingIndex=0,this.spineCallback},setCurKey:function(e){this._curKey=e},getCurKey:function(){return this._curKey},updateGameTexture:function(e,t,n){this.updateTexture(this._curKey,t,e,n)},updateTexture:function(e,t,n,i,o,a){var s=void 0,c=void 0,r=void 0,l=void 0,d=void 0;this._lib[e]||((s=this._lib[e]={}).urls=[],s.textures=[],s.refs={},s.sfs={}),c=this._lib[e].urls,r=this._lib[e].textures,l=this._lib[e].refs,d=this._lib[e].sfs,l[n]=t,c.indexOf(t)<0&&(c[c.length]=t),console.log("start load image:",t),cc.loader.load({url:t,type:"png"},function(s,c){if(!s){if(!this._lib[e])return cc.loader.release(t),void c.releaseTexture();if(console.log("texture loaded image:",t),r.indexOf(c)<0&&(r[r.length]=c),t===l[n]){var h=new cc.SpriteFrame;h.setTexture(c),i&&(i.spriteFrame=h,i.node.width>=i.node.height?null!=o&&i.node.width>o&&(i.node.scale=o/i.node.width):null!=a&&i.node.height>a&&(i.node.scale=a/i.node.height)),d[n]=h}}}.bind(this))},getGameTexture:function(e,t,n){this.getTexture(this._curKey,t,e,n)},getTexture:function(e,t,n,i,o,a){if(!this._lib[e]||!this._lib[e].sfs||!this._lib[e].sfs[n])return t?void this.updateTexture(e,t,n,i,o,a):-1;i&&(i.spriteFrame=this._lib[e].sfs[n],i.node.width>=i.node.height?null!=o&&i.node.width>o&&(i.node.scale=o/i.node.width):null!=a&&i.node.height>a&&(i.node.scale=a/i.node.height))},loadTextureOneByOne:function(e,t,n,i){null==this._waitings&&(this._waitings=[]),e&&this._waitings.push({url:e,sp:t,wl:n,hl:i}),this._waitings.length<=0||this._inLoading||(this._inLoading=!0,cc.loader.load({url:this._waitings[0].url,type:"png"},function(e,t){if(!e){var n=new cc.SpriteFrame;n.setTexture(t),this._spriteFrameCache[this._waitings[0].url]=n,this._waitings[0].sp&&(this._waitings[0].sp.spriteFrame=n),this._waitings.shift(),this._inLoading=!1,setTimeout(this.loadTextureOneByOne.bind(this),100)}}.bind(this)))},getTextureOneByOne:function(e,t,n,i){if(this._spriteFrameCache||(this._spriteFrameCache={}),!this._spriteFrameCache[e])return e?void this.loadTextureOneByOne(e,t,n,i):-1;t&&t.node.parent&&(t.spriteFrame=this._spriteFrameCache[e],t.node.width>=t.node.height?null!=n&&t.node.width>n&&(t.node.scale=n/t.node.width):null!=i&&t.node.height>i&&(t.node.scale=i/t.node.height))},cancelSkeletonLoad:function(e){for(var t=0;t<this.spineLoadings.length;t++)this.spineLoadings[t].sk==e&&(this.spineLoadings.splice(t,1),t--)},formaSpineName:function(e){if(window.facade.deviceLow){var t=e.split("/");e=t[0]+"_low/"+t[1]+"_low"}return e},getResSpineForUI:function(e,t,n){this.spineCallback=n;for(var i=0;i<t.length;i++){var o=t[i],a=cc.find(o.ui,e),s=o.url;s=o.preloaded?"spine/"+s:"pre_spine/"+s,null!=a?this.getResSpine(s,a.getComponent(sp.Skeleton),o.initAnimate.split(","),i===t.length-1):console.error("node null:",o.ui)}},getResSpine:function(e,t,n,i){if(window.facade.deviceLow){var o=e.split("/");e=o[0]+"_low/"+o[1]+"_low"}if(cc.loader.getRes(e,sp.SkeletonData)){if(t.skeletonData=cc.loader.getRes(e,sp.SkeletonData),null!=n&&n.length>0)for(var a=0;a<n.length;a++)0==a?a+1==n.length?t.setAnimation(0,n[a],!0):t.setAnimation(0,n[a],!1):a+1==n.length?t.addAnimation(0,n[a],!0):t.addAnimation(0,n[a],!1);i&&this.spineCallback&&this.spineCallback.onResSucc()}else{var s=window.textureManager.getComponent("TextureManager").formaSpineName("spine/loading");t.skeletonData=cc.loader.getRes(s,sp.SkeletonData),t.premultipliedAlpha=!1,t.setAnimation(0,"yangchao",!0),t.node.originScale=t.node.scaleX,this.spineLoadings.push({url:e,sk:t,anis:n}),cc.loader.loadRes(e,sp.SkeletonData,this.gotSpine.bind(this))}},gotSpine:function(e,t){for(var n=0;n<this.spineLoadings.length;n++){var i=this.spineLoadings[n],o=cc.loader.getRes(i.url,sp.SkeletonData);if(o){if(i.sk.skeletonData=o,null!=i.anis&&i.anis.length>0)for(var a=0;a<i.anis.length;a++)0==a?a+1==i.anis.length?i.sk.setAnimation(0,i.anis[a],!0):i.sk.setAnimation(0,i.anis[a],!1):a+1==i.anis.length?i.sk.addAnimation(0,i.anis[a],!0):i.sk.addAnimation(0,i.anis[a],!1);this._loadedSpineUrls.push(i.url),this.spineLoadings.splice(n,1),i.sk.node.scale=i.sk.node.originScale,n--}n==this.spineLoadings.length-1&&this.spineCallback&&this.spineCallback.onResSucc()}},releaseAllResSpine:function(){var e=window.facade.getComponent("PlayerModel").roleInfo;if(e.character){for(var t=window.facade.getComponent("PlayerModel").starConfig[e.character].avatar,n=0;n<this._loadedSpineUrls.length;n++)this._loadedSpineUrls[n]=="character/"+t&&cc.loader.releaseRes(this._loadedSpineUrls[n],cc.SpriteAtlas);this._loadedSpineUrls=[]}},getAtlasTexture:function(e,t,n,i,o){cc.loader.getRes(e,cc.SpriteAtlas)?(n.spriteFrame=cc.loader.getRes(e,cc.SpriteAtlas).getSpriteFrame(t),n.node.width>=n.node.height?null!=i&&n.node.width>i&&(n.node.scale=i/n.node.width):null!=o&&n.node.height>o&&(n.node.scale=o/n.node.height)):(this.altasLoadings.push({url:t,sp:n,atlas:e,wl:i,hl:o}),cc.loader.loadRes(e,cc.SpriteAtlas,this.gotAltas.bind(this)))},gotAltas:function(e,t){for(var n=0;n<this.altasLoadings.length;n++){var i=this.altasLoadings[n],o=cc.loader.getRes(i.atlas,cc.SpriteAtlas).getSpriteFrame(i.url),a=i.wl,s=i.hl;o&&i.sp&&i.sp.node&&(i.sp.spriteFrame=o,i.sp.node.width>=i.sp.node.height?null!=a&&i.sp.node.width>a&&(i.sp.node.scale=a/i.sp.node.width):null!=s&&i.sp.node.height>s&&(i.sp.node.scale=s/i.sp.node.height),this.altasLoadings.splice(n,1),n--)}},getIconTexture:function(e,t,n,i,o){null==this.itemConfig&&(this.itemConfig=cc.loader.getRes("config/ItemDB"));var a="";null!=this.itemConfig[String(e)]&&this.itemConfig[String(e)].iconUrl?1==Number(this.itemConfig[String(e)].isIconRemote)?(a=window.facade.puzzleImgUrl+this.itemConfig[String(e)].iconUrl+".png",this.getTexture(a,a,a,t,n,o)):(a="item/"+this.itemConfig[String(e)].iconUrl,this.getResTexture(a,t,n,o)):("number"==typeof e&&(e=window.facade.PlayerAtrriKeys["res"+e]),"string"==typeof e&&e.length<2&&(e=window.facade.PlayerAtrriKeys["res"+Number(e)]),i&&(e+="_"+i),a="icon_"+e,"energy"==e&&(a="v2_"+a),this.getAtlasTexture("ui/common/main_and_common",a,t,n,o))},getResTexture:function(e,t,n,i,o){if(cc.loader.getRes(e)){if(null==t)return;t.spriteFrame=cc.loader.getRes(e,cc.SpriteFrame),t.node.width>=t.node.height?null!=n&&t.node.width>n&&(t.node.scale=n/t.node.width):null!=i&&t.node.height>i&&(t.node.scale=i/t.node.height)}else 0!=o&&t&&(t.node.opacity=0),this.resLoadings.push({url:e,sp:t,wl:n,hl:i}),this.resLoadingIndex++,cc.loader.loadRes(e,cc.SpriteFrame,this.gotResTexture.bind(this))},gotResTexture:function(e,t){for(var n=0;n<this.resLoadings.length;n++){var i=cc.loader.getRes(this.resLoadings[n].url,cc.SpriteFrame),o=this.resLoadings[n].wl;if(i&&this.resLoadings[n].sp&&this.resLoadings[n].sp.node){this.resLoadings[n].sp.spriteFrame=i;var a=this.resLoadings[n];a.sp.node.opacity=255,o=a.wl;var s=a.hl;a.sp.node.width>=a.sp.node.height?null!=o&&a.sp.node.width>o&&(a.sp.node.scale=o/a.sp.node.width):null!=s&&a.sp.node.height>s&&(a.sp.node.scale=s/a.sp.node.height),this._loadedUrls[this.resLoadings[n].url]=!0,this.resLoadings.splice(n,1),n--}}},getDecoTexture:function(e,t,n,i){this._loadedDecos.push(e),this.getResTexture(e,t,n,i)},getFloorBg:function(e,t){this._loadedFloorBgs.push(e),this.getResTexture(e,t,null,null,!1)},releaseAllFloorRes:function(){for(var e=0;e<this._loadedDecos.length;e++)cc.loader.releaseRes(this._loadedDecos[e],cc.SpriteFrame),cc.loader.releaseRes(this._loadedDecos[e],cc.Texture2D);for(this._loadedDecos=[],e=0;e<this._loadedFloorBgs.length;e++)cc.loader.releaseRes(this._loadedFloorBgs[e],cc.SpriteFrame),cc.loader.releaseRes(this._loadedFloorBgs[e],cc.Texture2D);this._loadedFloorBgs=[]},releaseAllResSprite:function(e){for(var e in this._loadedUrls)cc.loader.releaseRes(e,cc.SpriteFrame),cc.loader.releaseRes(e,cc.Texture2D);this._loadedUrls={}},releaseSprite:function(e){cc.loader.releaseRes(e,cc.SpriteFrame),cc.loader.releaseRes(e,cc.Texture2D)},release:function(e){if(this._lib[e]){var t,n,i=this._lib[e],o=void 0,a=void 0;for(i.refs=null,delete i.refs,i.sfs=null,delete i.sfs,a=i.textures,n=i.urls,t=a.length,o=0;o<t;++o)cc.loader.release(n[o]),a[o].releaseTexture();i.urls.length=0,delete i.urls,a.length=0,delete i.textures,this._lib[e]=null,delete this._lib[e]}},releaseGame:function(){this.release(this._curKey)}}),cc._RF.pop()},{}],TurnCricle:[function(e,t,n){"use strict";cc._RF.push(t,"82e21+CTvpFkKOVLTq8cHIi","TurnCricle"),cc.Class({extends:cc.Component,properties:{},start:function(){},update:function(e){this.node.angle++}}),cc._RF.pop()},{}],VirBannerCtrl:[function(e,t,n){"use strict";cc._RF.push(t,"510d3NBWGdKQr10RXkXiHL3","VirBannerCtrl");t.exports={};var i={inited:!1,curShowName:"",gameInfo:null,init:function(){this.inited=!0;var t=e("ModuleEventEnum");cc.systemEvent.on(t.MORE_GAME,this.checkVirBanner,this),this.virBannerNode=new cc.Node,this.virBannerNode.width=640,this.virBannerNode.height=300,this.virBannerNode.addComponent(cc.Widget),this.virBannerNode.addComponent(cc.Button),this.virBannerNode.addComponent(cc.Sprite),this.virBannerNode.getComponent(cc.Widget).isAlignBottom=!0;var n=cc.director.getScene().getChildByName("Canvas"),i=new cc.Component.EventHandler;i.target=n,i.component="MainUI",i.handler="onClickBanner",this.virBannerNode.getComponent(cc.Button).clickEvents.push(i),n.addChild(this.virBannerNode),this.virBannerNode.active=!1},callData:function(){facade.getComponent("MoreGameModel").requestMoreGameList()},checkVirBanner:function(){if(this.curShowName&&""!=this.curShowName){e("ModuleEventEnum"),console.log("cur UI: "+this.curShowName+" need Virbanner");var t=facade.getComponent("MoreGameModel").boxList[0],n=[];for(var i in t)t[i].banner&&""!=t[i].banner&&n.push(t[i]);if(n.sort(function(e,t){return""==e.banner_sort&&(e.banner_sort=0),""==t.banner_sort&&(t.banner_sort=0),parseInt(e.banner_sort)>parseInt(t.banner_sort)?-1:1}),facade.getComponent("PlayerModel").isIconRandomOrder("banner")){var o=facade.getComponent("PlayerModel").getBannerRecommondRandomCount(n);o instanceof Array?(o.sort(function(e,t){return.5-Math.random()}),n=o,console.log("cur show virBanner : ",n),n.length>0&&(this.gameInfo=n[0])):(facade.getComponent("PlayerModel").checkItem(n),n.length>0?this.gameInfo=n[0]:this.gameInfo=null)}this.gameInfo?this.showVirBanner():console.log("\u5df2\u7ecf\u70b9\u5b8c\u6240\u6709cpa")}},showVirBanner:function(){if(this.gameInfo){this.virBannerNode.active=!0;var e=this.gameInfo;""!=e.banner&&e.banner&&0==e.banner.indexOf("http")&&cc.loader.load({url:e.banner,type:"png"},function(e,t){t&&(this.virBannerNode.active=!0,this.virBannerNode.getComponent(cc.Sprite).spriteFrame=new cc.SpriteFrame(t),this.virBannerNode.zIndex=99999,this.virBannerNode.getComponent(cc.Widget).bottom=0,this.virBannerNode.getComponent(cc.Widget).updateAlignment())}.bind(this))}},hideVirBanner:function(){this.curShowName="",this.virBannerNode&&(this.virBannerNode.getComponent(cc.Sprite).spriteFrame=null,this.virBannerNode.zIndex=1,this.virBannerNode.active=!1),facade.getComponent("BannerModel").hideBanner()}};t.exports=i,cc._RF.pop()},{ModuleEventEnum:"ModuleEventEnum"}],WxAdaptor:[function(e,t,n){"use strict";cc._RF.push(t,"6d57awxz/FONLGQodaf5c94","WxAdaptor");var i=e("ModuleEventEnum");cc.Class({extends:cc.Component,properties:{},onLoad:function(){cc.systemEvent.on(i.GOT_HTTP_RES,this.httpResDeal.bind(this)),window.facade.windowWidth=375,window.facade.windowHeight=667,facade.isMiniGame&&wx.wxOnShowRes&&(this._onShowData=wx.wxOnShowRes,wx.wxOnShowRes=null,this.openToService=!1),this.initListener(),this.initVersionLinstener(),facade.isMiniGame&&(wx.showShareMenu({withShareTicket:!0}),wx.setKeepScreenOn({keepScreenOn:!0}),wx.getSystemInfo({success:function(e){if(window.facade.PhoneInfo=e,window.facade.windowWidth=e.windowWidth,window.facade.windowHeight=e.windowHeight,window.facade.Screenratio=Number(e.windowWidth)/Number(e.windowHeight),window.facade.screenWidth=640,window.facade.screenHeight=640/window.facade.Screenratio,window.facade.isIOS=null!=e.system.match("iOS"),canvas.width=e.screenWidth*e.pixelRatio,canvas.height=e.screenHeight*e.pixelRatio,console.log("phoneinfo----------------\x3e",window.facade.PhoneInfo),window.facade.isIOS)(t=e.model.split("")).length>=2&&null!=t[1].match("s")?Number(t[1][0])<6&&(window.facade.deviceLow=!0):"X"!=t[1]&&Number(t[1][0])<=6&&(window.facade.deviceLow=!0);else{var t=e.system.replace("Android ","");Number(t.split(".")[0])<6&&(window.facade.deviceLow=!0)}}}),this.setSharedCancas(),this.login())},setSharedCancas:function(e){try{if(void 0==wx||wx){var t=wx.getOpenDataContext().canvas;t&&(t.width=cc.game.canvas.width,t.height=cc.game.canvas.height)}}catch(e){}},start:function(){facade.isMiniGame&&window.facade.isEnabledVideoAd&&this.createVideo()},init:function(e){this._model=e,this.wxCode=null,this.wxUserInfo=null,this.wxSignature=null,this.wxEncryptedData=null,this.wxRawData=null,this.wxIv=null,this.loginDatas={boxId:24,secret:"f3d7964d586629c82bddb22b65c32b3d",boxUid:0,gameId:0,gameOpenid:0,actId:0,chanId:0,subCid:0},this.behaveReportDatas={openid:0,actId:0,platform:0,chan:0,subChan:0},this.appLinkReportDatas={gmId:91,objGmId:0,openid:0,chan:0,subChan:0}},reportEnter:function(){this.login()},relogin:function(){console.log("do relogin()..."),this.needRelogin=!0,this.login()},login:function(){console.log("login: function () {..."),wx.login({success:function(e){this.wxCode=e.code}.bind(this),complete:function(){this.wxCode?this.loginServer():this.loginWithoutUser()}.bind(this)})},loginWithoutUser:function(){"swan"==window.net.platformName&&wx.getSwanId({success:function(e){this.baidu_swanid=e.data.swanid,this.baidu_swanid_sign=e.data.swanid_signature}.bind(this),complete:function(){this.loginServer()}.bind(this)})},wxGetUserInfo:function(){this.isNewGetInfoApi=!0,wx.getSetting&&wx.getSetting({success:function(e){var t=e.authSetting;!0===t["scope.userInfo"]?(console.log("\u7528\u6237\u5df2\u7ecf\u6388\u6743\uff0c\u53ef\u4ee5\u83b7\u53d6\u7528\u6237\u4fe1\u606f"),this.getUserInfoOldApi()):!1===t["scope.userInfo"]?(console.log("\u7528\u6237\u5df2\u62d2\u7edd\u6388\u6743, \u9700\u8981\u5f15\u5bfc\u7528\u6237\u5230\u8bbe\u7f6e\u9875\u9762\u6253\u5f00\u6388\u6743\u5f00\u5173"),wx.showModal({title:"\u8bf7\u6388\u6743",content:"\u6388\u6743\u9875\u9762\u7684\u8fdb\u5165\u8def\u5f84\u4e3a\uff1a\n\u53f3\u4e0a\u89d2\u83dc\u5355->\u5173\u4e8e->\u53f3\u4e0a\u89d2\u83dc\u5355->\u8bbe\u7f6e",success:function(){console.log("\u70b9\u51fb\u786e\u5b9a")}})):this.createAllowBtn()}.bind(this)})},createAllowBtn:function(){void 0!=cc.sys.os&&0==window.facade.isEnteredGame&&wx.createUserInfoButton&&!window.facade.WXInfoButton?(console.log("====create btn:",window.facade.windowWidth,window.facade.windowHeight),window.facade.WXInfoButton=wx.createUserInfoButton({type:"text",text:"        ",style:{left:0,top:0,width:window.facade.windowWidth,height:window.facade.windowHeight,lineHeight:600,backgroundColor:"#FFFFFF00",borderColor:"#FFFFFF",color:"#FFFFFF",textAlign:"center",fontSize:40,borderRadius:4}}),window.facade.WXInfoButton.onTap(function(e){e.errMsg.indexOf("auth deny")>-1||e.errMsg.indexOf("auth denied")>-1?(console.log("\u7528\u6237\u62d2\u7edd\u6388\u6743"),this.guideActive()):(window.net.getComponent("Net").behaveReport(window.facade.BEHAVE_ALLOWED),this.setUserData(e))}.bind(this)),window.facade.WXInfoButton.show()):this.getUserInfoOldApi()},getUserInfoOldApi:function(){wx.getUserInfo({fail:function(e){(e.errMsg.indexOf("auth deny")>-1||e.errMsg.indexOf("auth denied")>-1)&&(console.log("\u7528\u6237\u62d2\u7edd\u6388\u6743"),this.guideActive())}.bind(this),success:function(e){this.setUserData(e)}.bind(this)})},refreshUserInfo:function(){wx.getUserInfo({success:function(e){this.recordUserData(e)}.bind(this)})},recordUserData:function(e){this.wxUserInfo=e.userInfo,this._model.platUserInfo=e.userInfo,this._model.recordRoleProfile()},setUserData:function(t){window.facade.WXInfoButton&&(window.facade.WXInfoButton.hide(),window.facade.WXInfoButton.destroy(),window.facade.WXInfoButton=null),this.wxUserInfo=t.userInfo,this._model.platUserInfo=t.userInfo,this.wxSignature=t.signature,this.wxEncryptedData=t.encryptedData,this.wxRawData=t.rawData,this.wxIv=t.iv,window.facade.isEnteredGame=!0;var n=e("ModuleEventEnum");cc.systemEvent.emit(n.USER_INFO_ALLOWED),this._model.recordRoleProfile(),cc.systemEvent.emit(n.ENTER_AGREED)},getWxScene:function(){if(this._onShowData&&this._onShowData.scene)return this._onShowData.scene;var e=wx.getLaunchOptionsSync();return e.scene&&e.scene?e.scene:0},checkBroadcastReward:function(){var e=wx.getLaunchOptionsSync();console.log("checkBroadcastReward:",e),"Gongzhonghao"==e.query.lsreward&&(facade.fromBroadcast=!0)},getAdScource:function(){if(facade.isMiniGame){var e=wx.getLaunchOptionsSync();if(e.referrerInfo&&e.referrerInfo.appId&&e.referrerInfo.appId==window.facade.WX_APPID_TENCENTBOX)return e.referrerInfo.appId;if(e.query&&e.query.chanId){var t={};return t.chanId=e.query.chanId,t.subCid=e.query.subCid,t}return"0_0"}return"0_0"},guideActive:function(){wx.showModal({title:"\u8b66\u544a",content:"\u62d2\u7edd\u6388\u6743\u5c06\u65e0\u6cd5\u6b63\u5e38\u6e38\u620f",cancelText:"\u53d6\u6d88",showCancel:!0,confirmText:"\u8bbe\u7f6e",success:function(e){e.confirm&&wx.openSetting({success:function(e){!0===e.authSetting["scope.userInfo"]&&(console.log("openSetting userInfo----------------------\x3e",e),this.getUserInfoOldApi())}.bind(this)})}.bind(this)})},loginServer:function(){var e=this;wx.request({url:"https://games.qdos.com/game/wxLogin",data:{appid:"wxf88c93d96e079e42",js_code:e.wxCode},method:"POST",success:function(t){e._model.userId=t.data.data.openid,cc.systemEvent.emit(i.WX_REGISTERED)}})},httpResDeal:function(e){var t=e.data;if(t&&(console.log(JSON.stringify(t)),t&&t.user_id&&t.token&&t.open_id)){if(this._model.userId=t.token,this._model.privateUid=t.user_id,this._model.token=t.token,this._model.gameGate=t.game_gate,this._model.userState=t.user_state,this.openId=this._model.openId=t.open_id,window.facade.token=this._model.token,window.facade.openId=this._model.openId,window.facade.userId=t.user_id,window.facade.channel_id=t.channel_id,window.facade.channel_sub=t.channel_sub,window.net.getComponent("Net").behaveReport(1001),window.net.getComponent("Net").behaveReport(1002),window.net.getComponent("Net").behaveReport(1),facade.isMiniGame){var n=wx.getLaunchOptionsSync();console.log("lc====== launchData1 :",n),n.query&&n.query.id&&window.net.getComponent("Net").behaveReport(8)}if(this.needRelogin){this.needRelogin=!1;var i={};i.game_id=window.facade.GameId,i.token=this._model.token,window.net.getComponent("Net").httpRequest(window.net.ServerInfo,i)}}},initVersionLinstener:function(){try{if(void 0==wx||wx){if(!wx.getUpdateManager)return;wx.getUpdateManager().onCheckForUpdate(function(e){console.log("hasUpdate",e.hasUpdate),e.hasUpdate&&window.popUp.getComponent("Pop").addAlert("\u5f53\u524d\u6e38\u620f\u7a0b\u5e8f\u4e0d\u662f\u6700\u65b0\u7248\u672c\uff0c\u8fd9\u53ef\u80fd\u4f1a\u9020\u6210\u90e8\u5206\u529f\u80fd\u4f53\u9a8c\u4e0d\u7545\u3002\u4ee3\u7801\u81ea\u884c\u66f4\u65b0\u5b8c\u6210\u540e\u4f1a\u63d0\u9192\u60a8\u54e6\uff01",null,!1)}),wx.getUpdateManager().onUpdateReady(function(){wx.getUpdateManager().applyUpdate()}),wx.getUpdateManager().onUpdateFailed(function(){})}}catch(e){}},checkTicket:function(e){e.query&&e.query.id&&window.net.getComponent("Net").behaveReport(window.facade.BEHAVE_FORM_SHARE),1==window.facade.canShowShareGroup?e.shareTicket&&e.sessionid!=window.facade.lastSessionid&&(window.facade.showShareTicket=e.shareTicket,window.facade.lastSessionid=e.sessionid):window.facade.canShowShareGroup=!0},reEnter:function(){window.facade.reEnter=!0,cc.systemEvent.emit(i.RE_ENTERED)},initListener:function(){try{(void 0==wx||wx)&&(wx.onShow(function(e){if(console.log("lc wxAdaptor ============wx.onShow==========query =",e.query),console.log(e),e.query.id&&(window.facade.queryRoleID=e.query.id),this.checkTicket(e),1==window.facade.isShareOut?window.facade.isShareOut=!1:(window.facade.isEnterGameFirst=!0,this.reEnter()),this._onShowData=e,this._registerList)for(var t=0;t<this._registerList.length;)this._registerList[t].callback(),this._registerList[t].once?this._registerList.splice(t,1):t++;"Gongzhonghao"==e.query.lsreward&&(facade.fromBroadcast=!0)}.bind(this)),wx.onHide(function(e){console.log("wx.onHide==========")}.bind(this)))}catch(e){}},checkIsDebug:function(){if(__wxConfig.envVersion)switch(console.log("__wxConfig.envVersion is :",__wxConfig.envVersion),__wxConfig.envVersion){case"develop":return!0;case"trial":case"release":return!1}},checkClientScene:function(){var e=this.getWxScene();return 1073==e||1081==e},getEnterAnalyzeId:function(){if(this._onShowData&&this._onShowData.query&&this._onShowData.query.enter_analyze_id)return this._onShowData.query.enter_analyze_id;var e=wx.getLaunchOptionsSync();return e.query&&e.query.enter_analyze_id?e.query.enter_analyze_id:0},getinviteRid:function(){if(this._onShowData&&this._onShowData.query&&this._onShowData.query.id)return this._onShowData.query.id;var e=wx.getLaunchOptionsSync();return e.query&&e.query.id?e.query.id:"0"},getinviteType:function(){if(this._onShowData&&this._onShowData.query&&this._onShowData.query.inviteType)return this._onShowData.query.inviteType;var e=wx.getLaunchOptionsSync();return e.query&&e.query.inviteType?e.query.inviteType:0},getInviteId:function(){if(console.log("getInviteId:",wx.getLaunchOptionsSync()),this._onShowData&&this._onShowData.query&&this._onShowData.query.inviteId)return this._onShowData.query.inviteId;var e=wx.getLaunchOptionsSync();return e.query&&e.query.inviteId?e.query.inviteId:0},getInviteQuery:function(){if(this._onShowData&&this._onShowData.query)return this._onShowData.query;var e=wx.getLaunchOptionsSync();return e.query&&e.query?e.query:0},clearShowData:function(){this._onShowData=null},getReferrerInfo:function(){if(this._onShowData&&this._onShowData.referrerInfo)return this._onShowData.referrerInfo;var e=wx.getLaunchOptionsSync();return e.referrerInfo&&e.referrerInfo?e.referrerInfo:0},getLoginParams:function(){if(facade.isMiniGame){var e=this.getInviteQuery(),t=this.getReferrerInfo();if(0!=e)return e.boxId&&(this.loginDatas.boxId=e.boxId,2==e.boxId&&(this.loginDatas.secret="17ed27b11e3bbea460a3a6331361b6f4")),e.boxUid&&(this.loginDatas.boxUid=e.boxUid),e.gameId&&(this.loginDatas.gameId=e.gameId),this.openId&&(this.loginDatas.gameOpenid=this.openId),e.chanId&&(this.loginDatas.chanId=e.chanId),e.subCid&&(this.loginDatas.subCid=e.subCid),t.appId&&(this.loginDatas.appId=t.appId),t.scene&&(this.loginDatas.scene=t.scene),this.loginDatas}},getReportParams:function(){if(facade.isMiniGame){var e=this.getInviteQuery();if(this.getReferrerInfo(),0!=e)return this.openId&&(this.behaveReportDatas.openid=this.openId),e.chanId&&(this.behaveReportDatas.chan=e.chanId),e.subCid&&(this.behaveReportDatas.subChan=e.subCid),this.behaveReportDatas}},getAppLinkParams:function(){if(facade.isMiniGame){var e=this.getInviteQuery();if(this.getReferrerInfo(),0!=e)return this.openId&&(this.appLinkReportDatas.openid=this.openId),e.chanId&&(this.appLinkReportDatas.chan=e.chanId),e.subCid&&(this.appLinkReportDatas.subChan=e.subCid),this.appLinkReportDatas}},removeKeyboard:function(){try{(void 0==wx||wx)&&(wx.offKeyboardComplete(),wx.hideKeyboard())}catch(e){}},gc:function(){try{(void 0==wx||wx)&&wx.triggerGC()}catch(e){}},compareVersion:function(e,t){null==e&&(e=wx.getSystemInfoSync().SDKVersion),e=e.split("."),t=t.split(".");for(var n=Math.max(e.length,t.length);e.length<n;)e.push("0");for(;t.length<n;)t.push("0");for(var i=0;i<n;i++){var o=parseInt(e[i]),a=parseInt(t[i]);if(o>a)return 1;if(o<a)return-1}return 0},isCanShowVideo:function(){var e=!1;if(facade.isMiniGame){var t=wx.getSystemInfoSync().SDKVersion;-1===this.compareVersion(t,"2.0.4")?console.log("=====\u7248\u672c\u4e0d\u591f2.0.4\uff0c\u89c6\u9891\u5e7f\u544a\u4e0d\u80fd\u7528"):e=!0}return e},createVideo:function(e){},loadVideo:function(e){var t=this;if(!this.isCanShowVideo())return window.popUp.getComponent("FloatTip").showTip("\u5fae\u4fe1\u7248\u672c\u8fc7\u4f4e\u65e0\u6cd5\u52a0\u8f7d\u5e7f\u544a"),void(window.facade.isEnabledVideoAd=!1);this.entrance=e,window.facade.getComponent("UserModel").starVideo(e),window.audio.getComponent("SoundManager").isPlayingBgm&&window.audio.getComponent("SoundManager")._soundActive&&(this.videoPauseBGM=!0,window.audio.getComponent("SoundManager").pauseBGM()),facade.isMiniGame&&this.videoAd.load().then(function(){return t.videoAd.show().catch(function(e){return console.log(e)})})},getMenuPos:function(){if(null==window.wx)return null;var e=wx.getSystemInfoSync().screenWidth,t=wx.getSystemInfoSync().screenHeight,n=wx.getMenuButtonBoundingClientRect();return{x:(n.left+n.width/2)/e-.5,y:.5-n.bottom/t}},checkCollectCondi:function(){if(null==window.wx)return!1;var e=wx.getSystemInfoSync().SDKVersion,t=this.compareVersion(e,"2.2.4"),n=this.getWxScene();return console.log("wxScene: ",n),t?-1!=n&&(1001==n||1089==n):-1!=n&&(1103==n||1104==n||1023==n)},checkHoverWinShow:function(){return 1131==this.getWxScene()},reigsterWXFunc:function(e,t){this._registerList=this._registerList||[];var n={};n.callback=e,n.once=t,this._registerList.push(n)},checkInterstitialAd:function(){return!(facade.SAVE_MODE||!facade.isMiniGame)&&this.compareVersion(null,"2.6.0")>=0},createInterstitialAd:function(e){return wx.createInterstitialAd(e)},getClientReward:function(){var e=this;wx.openCustomerServiceConversation({showMessageCard:!0,sendMessageTitle:"",sendMessagePath:"",sendMessageImg:"",success:function(t){e.openToService=!0},fail:function(t){e.openToService=!1}}),net.getComponent("Net").behaveReport(facade.BEHAVE_OPENSERVICE)},update:function(e){}}),cc._RF.pop()},{ModuleEventEnum:"ModuleEventEnum"}],"ald-game-conf":[function(e,t,n){"use strict";cc._RF.push(t,"b0774dREVRG67lIheYsXN64","ald-game-conf");var i=t.exports={};i.app_key="62c19f64be73b9a9eb3c53c944079c41",i.getLocation=!1,cc._RF.pop()},{}],"ald-game":[function(e,t,n){"use strict";cc._RF.push(t,"3480bwYZ+hDyaqVJtgAqutU","ald-game");var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=(t.exports={},"function"==typeof Symbol&&"symbol"==i(Symbol.iterator)?function(e){return void 0===e?"undefined":i(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":void 0===e?"undefined":i(e)});CC_WECHATGAME&&function(){function t(e){var t={};return"Boolean Number String Function Array Date RegExp Object Error Symbol".split(" ").forEach(function(e,n){t["[object "+e+"]"]=e.toLowerCase()}),null==e?e:"object"==(void 0===e?"undefined":o(e))||"function"==typeof e?t[function(e){return Object.prototype.toString.call(e)}.call(e)]||"object":void 0===e?"undefined":o(e)}function n(){function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return e()+e()+e()+e()+e()+e()+e()+e()}function i(e,t){v++,e.as=y,e.at=S,e.rq_c=v,e.ifo=h,e.ak=d.app_key,e.uu=u,e.v=r,e.st=Date.now(),e.ev=t,e.wsr=C,""!==a(e.ufo)&&(e.ufo=e.ufo),e.ec=f,wx.Queue.push(function(){return new Promise(function(t,n){wx.request({url:"https://"+l+".aldwx.com/d.html",data:e,header:{se:m||"",op:g||"",img:L||""},method:"GET",fail:function(){t("")},success:function(e){t(200==e.statusCode?"":"status error")}})})})}function a(e){if(void 0===e||""===e)return"";var t={};for(var n in e)"rawData"!=n&&"errMsg"!=n&&(t[n]=e[n]);return t}function s(e){var t={};for(var n in e)t[n]=e[n];return t}function c(e){for(var t="",n=0;n<e.length;n++)e[n].length>t.length&&(t=e[n]);return t}var r="2.0.0",l="glog",d=e("ald-game-conf");""===d.app_key&&console.error("\u8bf7\u5728\u914d\u7f6e\u6587\u4ef6\u4e2d\u586b\u5199\u60a8\u7684app_key"),d.app_key=d.app_key.replace(/\s/g,""),wx.request({url:"https://"+l+".aldwx.com/config/app.json",method:"GET",success:function(e){200===e.statusCode&&(e.data.version!=r&&console.warn("\u60a8\u7684SDK\u4e0d\u662f\u6700\u65b0\u7248\u672c\uff0c\u8bf7\u5c3d\u5feb\u5347\u7ea7\uff01"),e.data.warn&&console.warn(e.data.warn),e.data.error&&console.error(e.data.error))}});var h="",u=function(){var e="";try{e=wx.getStorageSync("aldstat_uuid"),wx.setStorageSync("ald_ifo",!0)}catch(t){e="uuid_getstoragesync"}if(e)h=!1;else{e=n(),h=!0;try{wx.setStorageSync("aldstat_uuid",e)}catch(e){wx.setStorageSync("aldstat_uuid","uuid_getstoragesync")}}return e}(),p={},m="",g="",f=0,v="",C=wx.getLaunchOptionsSync(),w=Date.now(),S=""+Date.now()+Math.floor(1e7*Math.random()),y=""+Date.now()+Math.floor(1e7*Math.random()),E=0,_="",L="",T=!0,I=!1,N=["aldSendEvent","aldOnShareAppMessage","aldShareAppMessage","aldSendSession","aldSendOpenid","aldLevelEvent"],R=["payStart","paySuccess","payFail","die","revive","tools","award"],M=["complete","fail"];void 0===wx.Queue&&(wx.Queue=new function(){this.concurrency=4,this.queue=[],this.tasks=[],this.activeCount=0;var e=this;this.push=function(t){this.tasks.push(new Promise(function(n,i){var o=function(){e.activeCount++,t().then(function(e){n(e)}).then(function(){e.next()})};e.activeCount<e.concurrency?o():e.queue.push(o)}))},this.all=function(){return Promise.all(this.tasks)},this.next=function(){e.activeCount--,e.queue.length>0&&e.queue.shift()()}},wx.Queue.all()),Promise.all([new Promise(function(e,t){wx.getSetting({success:function(t){t.authSetting["scope.userInfo"]?wx.getUserInfo({success:function(t){L=c(t.userInfo.avatarUrl.split("/")),e(t)},fail:function(){e("")}}):e("")},fail:function(){e("")}})}),new Promise(function(e,t){wx.getNetworkType({success:function(t){e(t)},fail:function(){e("")}})}),new Promise(function(e,t){d.getLocation?wx.getLocation({success:function(t){e(t)},fail:function(){e("")}}):wx.getSetting({success:function(t){t.authSetting["scope.userLocation"]?(wx.getLocation({success:function(t){e(t)},fail:function(){e("")}}),e("")):e("")},fail:function(){e("")}})})]).then(function(e){""!==e[2]?(p.lat=e[2].latitude||"",p.lng=e[2].longitude||"",p.spd=e[2].speed||""):(p.lat="",p.lng="",p.spd=""),""!==e[1]?p.nt=e[1].networkType||"":p.nt="";var t=s(p);""!==e[0]&&(t.ufo=e[0],_=e[0]),i(t,"init")}),wx.onShow(function(e){if(C=e,E=Date.now(),!T&&!I){S=""+Date.now()+Math.floor(1e7*Math.random()),h=!1;try{wx.setStorageSync("ald_ifo",!1)}catch(e){}}T=!1,I=!1;var t=s(p),n=s(p);t.sm=E-w,e.query.ald_share_src&&e.shareTicket&&"1044"===e.scene?(n.tp="ald_share_click",new Promise(function(e,t){"1044"==C.scene?wx.getShareInfo({shareTicket:C.shareTicket,success:function(t){e(t)},fail:function(){e("")}}):e("")}).then(function(e){n.ct=e,i(n,"event")})):e.query.ald_share_src&&(n.tp="ald_share_click",n.ct="1",i(n,"event")),i(t,"show")}),wx.onHide(function(){var e=s(p);e.dr=Date.now()-E,""===_?wx.getSetting({success:function(t){t.authSetting["scope.userInfo"]?wx.getUserInfo({success:function(t){e.ufo=t,_=t,L=c(t.userInfo.avatarUrl.split("/")),i(e,"hide")}}):i(e,"hide")}}):i(e,"hide")}),wx.onError(function(e){var t=s(p);t.tp="ald_error_message",t.ct=e,f++,i(t,"event")});var A={aldSendEvent:function(e,t){var n=s(p);""!==e&&"string"==typeof e&&e.length<=255?(n.tp=e,"string"==typeof t&&t.length<=255?(n.ct=String(t),i(n,"event")):"object"==(void 0===t?"undefined":o(t))?(JSON.stringify(t).length>=255&&console.error("\u81ea\u5b9a\u4e49\u4e8b\u4ef6\u53c2\u6570\u4e0d\u80fd\u8d85\u8fc7255\u4e2a\u5b57\u7b26"),n.ct=JSON.stringify(t),i(n,"event")):void 0===t||""===t?i(n,"event"):console.error("\u4e8b\u4ef6\u53c2\u6570\u5fc5\u987b\u4e3aString,Object\u7c7b\u578b,\u4e14\u53c2\u6570\u957f\u5ea6\u4e0d\u80fd\u8d85\u8fc7255\u4e2a\u5b57\u7b26")):console.error("\u4e8b\u4ef6\u540d\u79f0\u5fc5\u987b\u4e3aString\u7c7b\u578b\u4e14\u4e0d\u80fd\u8d85\u8fc7255\u4e2a\u5b57\u7b26")},aldOnShareAppMessage:function(e){wx.onShareAppMessage(function(){I=!0;var n=e(),o="";o=void 0!==C.query.ald_share_src?void 0!==n.query?(C.query.ald_share_src.indexOf(u),n.query+"&ald_share_src="+C.query.ald_share_src+","+u):(C.query.ald_share_src.indexOf(u),"ald_share_src="+C.query.ald_share_src+","+u):void 0!==n.query?n.query+"&ald_share_src="+u:"ald_share_src="+u,"undefined"!=t(n.ald_desc)&&(o+="&ald_desc="+n.ald_desc),n.query=o;var a=s(p);return a.ct=n,a.ct.sho=1,a.tp="ald_share_chain",i(a,"event"),n})},aldShareAppMessage:function(e){I=!0;var n=e,o="";o=void 0!==C.query.ald_share_src?void 0!==n.query?(C.query.ald_share_src.indexOf(u),n.query+"&ald_share_src="+C.query.ald_share_src+","+u):(C.query.ald_share_src.indexOf(u),"ald_share_src="+C.query.ald_share_src+","+u):void 0!==n.query?n.query+"&ald_share_src="+u:"ald_share_src="+u;var a=s(p);"undefined"!=t(n.ald_desc)&&(o+="&ald_desc="+n.ald_desc),n.query=o,a.ct=n,a.tp="ald_share_chain",i(a,"event"),wx.shareAppMessage(n)},aldSendSession:function(e){if(""!==e&&e){var t=s(p);t.tp="session",t.ct="session",m=e,""===_?wx.getSetting({success:function(e){e.authSetting["scope.userInfo"]?wx.getUserInfo({success:function(e){t.ufo=e,i(t,"event")}}):i(t,"event")}}):(t.ufo=_,""!==_&&(t.gid=""),i(t,"event"))}else console.error("\u8bf7\u4f20\u5165\u4ece\u540e\u53f0\u83b7\u53d6\u7684session_key")},aldSendOpenid:function(e){if(""!==e&&e){g=e;var t=s(p);t.tp="openid",t.ct="openid",i(t,"event")}else console.error("openID\u4e0d\u80fd\u4e3a\u7a7a")}};wx.aldStage=new function(){function e(e){return!/^\d+(.\d+)*$/.test(e.stageId)||e.stageId.length>32?(console.warn("\u5173\u5361stageId\u5fc5\u987b\u7b26\u5408\u4f20\u53c2\u89c4\u5219,\u8bf7\u53c2\u8003\u6587\u6863\u3002"),!1):!("string"!==t(e.stageName)||e.stageName.length>32)||(console.warn("\u5173\u5361\u540d\u79f0\u4e3a\u5fc5\u4f20\u5b57\u6bb5,\u4e14\u957f\u5ea6\u5c0f\u4e8e32\u4e2a\u5b57\u7b26,\u8bf7\u53c2\u8003\u6587\u6863"),!1)}var n="",o="",a=0;this.onStart=function(i){if(e(i)){var s={};a=Date.now(),s.sid=i.stageId,s.snm=i.stageName,s.state="start",o=""+Date.now()+Math.floor(1e7*Math.random()),n=s,("string"===t(i.userId)&&i.userId)<32&&(this.uid=i.uid),this.request()}},this.onRunning=function(i){if(e(i)){var o={params:{}};if(("string"===t(i.userId)&&i.userId)<32&&(this.uid=i.uid),!t(i.event)&&-1!=R.join(",").indexOf(i.event+","))return void R.join(",");if(o.event=i.event,"object"===t(i.params)){if("string"!==t(i.params.itemName)||i.params.itemName.length>32)return void console.warn("\u9053\u5177/\u5546\u54c1\u540d\u79f0\u4e3a\u5fc5\u4f20\u5b57\u6bb5\uff0c\u4e14\u957f\u5ea6\u5c0f\u4e8e32\u4e2a\u5b57\u7b26\uff0c\u8be6\u60c5\u8bf7\u53c2\u8003\u6587\u6863");o.params.itnm=i.params.itemName,"string"===t(i.params.itemId)&&i.params.itemId.length<32&&(o.params.itid=i.params.itemId),"number"===t(i.params.itemCount)&&i.params.itemCount.length<32?o.params.itco=i.params.itemCount:o.params.itco=1,-1!==i.event.indexOf("pay")&&("number"===t(i.params.itemMoney)&&i.params.itemMoney.length<32?o.params.money=i.params.itemMoney:o.params.money=0),"string"===t(i.params.desc)&&i.params.desc.length<64&&(o.params.desc=i.params.desc),o.state="running",o.sid=i.stageId,o.snm=i.stageName,n=o,this.request()}}},this.onEnd=function(i){if(e(i)){var o={state:"end"};if(("string"===t(i.userId)&&i.userId)<32&&(this.uid=i.uid),!t(i.event)&&-1!==M.join(",").indexOf(i.event+","))return void M.join(",");o.sid=i.stageId,o.snm=i.stageName,o.event=i.event,o.sdr=0!==a?Date.now()-a:"",o.params={},"object"===t(i.params)&&"string"===t(i.params.desc)&&i.params.desc.length<64&&(o.params.desc=i.params.desc),n=o,this.request()}},this.request=function(){var e=s(p);n.ss=o,e.ct=n,i(e,"screen")}};for(var b=0;b<N.length;b++)!function(e,t){Object.defineProperty(wx,e,{value:t,writable:!1,enumerable:!0,configurable:!0})}(N[b],A[N[b]]);try{var D=wx.getSystemInfoSync();p.br=D.brand||"",p.md=D.model,p.pr=D.pixelRatio,p.sw=D.screenWidth,p.sh=D.screenHeight,p.ww=D.windowWidth,p.wh=D.windowHeight,p.lang=D.language,p.wv=D.version,p.sv=D.system,p.wvv=D.platform,p.fs=D.fontSizeSetting,p.wsdk=D.SDKVersion,p.bh=D.benchmarkLevel||"",p.bt=D.battery||"",p.wf=D.wifiSignal||"",p.lng="",p.lat="",p.nt="",p.spd="",p.ufo=""}catch(e){}}(),cc._RF.pop()},{"ald-game-conf":"ald-game-conf"}],"polyglot.min":[function(e,t,n){"use strict";cc._RF.push(t,"e26fd9yy65A4q3/JkpVnFYg","polyglot.min");var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=t.exports={},a=t,s="function"==typeof Symbol&&"symbol"==i(Symbol.iterator)?function(e){return void 0===e?"undefined":i(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":void 0===e?"undefined":i(e)};(function(e,t){"function"==typeof define&&define.amd?define([],function(){return t(e)}):"object"==(void 0===o?"undefined":s(o))?a.exports=t(e):e.Polyglot=t(e)})(void 0,function(e){function t(e){e=e||{},this.phrases={},this.extend(e.phrases||{}),this.currentLocale=e.locale||"en",this.allowMissing=!!e.allowMissing,this.warn=e.warn||l}function n(e){var t,n,i,o={};for(t in e)if(e.hasOwnProperty(t))for(i in n=e[t])o[n[i]]=t;return o}function i(e){return e.replace(/^\s+|\s+$/g,"")}function o(e,t,n){var o;return null!=n&&e?i((o=e.split(h))[c(t,n)]||o[0]):e}function a(e){var t=n(p);return t[e]||t.en}function c(e,t){return u[a(e)](t)}function r(e,t){for(var n in t)"_"!==n&&t.hasOwnProperty(n)&&(e=e.replace(new RegExp("%\\{"+n+"\\}","g"),t[n]));return e}function l(t){e.console&&e.console.warn&&e.console.warn("WARNING: "+t)}function d(e){var t={};for(var n in e)t[n]=e[n];return t}t.VERSION="0.4.3",t.prototype.locale=function(e){return e&&(this.currentLocale=e),this.currentLocale},t.prototype.extend=function(e,t){var n;for(var i in e)e.hasOwnProperty(i)&&(n=e[i],t&&(i=t+"."+i),"object"==(void 0===n?"undefined":s(n))?this.extend(n,i):this.phrases[i]=n)},t.prototype.clear=function(){this.phrases={}},t.prototype.replace=function(e){this.clear(),this.extend(e)},t.prototype.t=function(e,t){var n,i;return"number"==typeof(t=null==t?{}:t)&&(t={smart_count:t}),"string"==typeof this.phrases[e]?n=this.phrases[e]:"string"==typeof t._?n=t._:this.allowMissing?n=e:(this.warn('Missing translation for key: "'+e+'"'),i=e),"string"==typeof n&&(t=d(t),i=r(i=o(n,this.currentLocale,t.smart_count),t)),i},t.prototype.has=function(e){return e in this.phrases};var h="||||",u={chinese:function(e){return 0},german:function(e){return 1!==e?1:0},french:function(e){return e>1?1:0},russian:function(e){return e%10==1&&e%100!=11?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2},czech:function(e){return 1===e?0:e>=2&&e<=4?1:2},polish:function(e){return 1===e?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2},icelandic:function(e){return e%10!=1||e%100==11?1:0}},p={chinese:["fa","id","ja","ko","lo","ms","th","tr","zh"],german:["da","de","en","es","fi","el","he","hu","it","nl","no","pt","sv"],french:["fr","tl","pt-br"],russian:["hr","ru"],czech:["cs"],polish:["pl"],icelandic:["is"]};return t}),cc._RF.pop()},{}],shop:[function(e,t,n){"use strict";cc._RF.push(t,"ba5ccjMF+ZErI+lIyewXU/a","shop"),Object.defineProperty(n,"__esModule",{value:!0});var i=cc._decorator,o=i.ccclass,a=(i.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.start=function(){this.node.on(cc.Node.EventType.MOUSE_DOWN,function(){cc.find("ShopView").active=!0})},t.prototype.shopings=function(){cc.log("\u5145\u503c100")},t=__decorate([o],t)}(cc.Component));n.default=a,cc._RF.pop()},{}],"use_v2.1.x_cc.Action":[function(e,t,n){"use strict";cc._RF.push(t,"c07b8ME1VVAcIJKp9Sf4PV2","use_v2.1.x_cc.Action");t.exports={};cc.macro.ROTATE_ACTION_CCW=!0,cc._RF.pop()},{}]},{},["CommonConfig","HttpUtil","ScrollView","SceneSplash","shop","AdvanceView","AlertTool","AnalyticsUtilities","BackEnergyView","BannerModel","Block","Boom","Bullet","ButtonScaler","CarTouch","ChangeNameView","Chapter","CharacterBox","CharacterItem","ClientServerUI","CollectGift","CommonFunc","Earth","EnergyNeedView","EnergyTimer","EntranceItem","EntranceUI","Facade","FakeInterUI","FloatTip","Game","GameConfig","GameEntry","GameLogic","GameModel","GameoverMoreGame","GetTreeStarView","Grenade","Guideclassic","GunMasterRank","Gunner","HoverWinUI","HttpConnector","InterstitialADModel","InviteDailyItem","InviteDailyItem1","InviteDailyUI","InviteNewItem","InviteNewUI","LanguageData","LevelData","LevelItem","LevelLoader","LevelModel","LevelPanel","LevelUI","Light","ListViewCtrl","LocalizedLabel","LocalizedSprite","MConfig","Magic","MainUI","MathUtils","ModuleEventEnum","MoreGame","MoreGameItemOne","MoreGameManager","MoveBlock","Net","Network","Network1","NewerView","NextLoginView","OneShotUI","Pays","Pitcher","PlayerModel","Pool","Pop","Rank","RankItem","RankModel","RecommendBar","RecommendGameItem","RecommendGameJS","RecommendGameModel","RecommendPage","ReplayUI","ResultPanel","ResultShotOne","RewardCPAModel","ShareADModel","SignIn","SigninItem","SkinPanel","SkipPanel","SoundManager","SoundSwitch","SpriteFrameSet","Start","Sun","Switch","TextureLabel","TextureManager","TurnCricle","VirBannerCtrl","WxAdaptor","ald-game-conf","ald-game","polyglot.min","use_v2.1.x_cc.Action"]);